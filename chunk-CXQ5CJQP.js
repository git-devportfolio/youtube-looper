var zb=Object.create;var au=Object.defineProperty,Gb=Object.defineProperties,Yb=Object.getOwnPropertyDescriptor,Zb=Object.getOwnPropertyDescriptors,Qb=Object.getOwnPropertyNames,Ai=Object.getOwnPropertySymbols,Xb=Object.getPrototypeOf,cu=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable;var Qf=(t,e,n)=>e in t?au(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b=(t,e)=>{for(var n in e||={})cu.call(e,n)&&Qf(t,n,e[n]);if(Ai)for(var n of Ai(e))Xf.call(e,n)&&Qf(t,n,e[n]);return t},j=(t,e)=>Gb(t,Zb(e));var er=(t,e)=>{var n={};for(var r in t)cu.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ai)for(var r of Ai(t))e.indexOf(r)<0&&Xf.call(t,r)&&(n[r]=t[r]);return n};var Lt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Kb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Qb(e))!cu.call(t,o)&&o!==n&&au(t,o,{get:()=>e[o],enumerable:!(r=Yb(e,o))||r.enumerable});return t};var Kf=(t,e,n)=>(n=t!=null?zb(Xb(t)):{},Kb(e||!t||!t.__esModule?au(n,"default",{value:t,enumerable:!0}):n,t));var O=(t,e,n)=>new Promise((r,o)=>{var s=c=>{try{a(n.next(c))}catch(u){o(u)}},i=c=>{try{a(n.throw(c))}catch(u){o(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,i);a((n=n.apply(t,e)).next())});var cy=Lt((zj,oi)=>{"use strict";function aI(t){if(Array.isArray(t))return t}oi.exports=aI,oi.exports.__esModule=!0,oi.exports.default=oi.exports});var uy=Lt((Gj,si)=>{"use strict";function cI(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,o=l}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}si.exports=cI,si.exports.__esModule=!0,si.exports.default=si.exports});var ly=Lt((Yj,ii)=>{"use strict";function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}ii.exports=uI,ii.exports.__esModule=!0,ii.exports.default=ii.exports});var fy=Lt((Zj,ai)=>{"use strict";var dy=ly();function lI(t,e){if(t){if(typeof t=="string")return dy(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dy(t,e):void 0}}ai.exports=lI,ai.exports.__esModule=!0,ai.exports.default=ai.exports});var hy=Lt((Qj,ci)=>{"use strict";function dI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ci.exports=dI,ci.exports.__esModule=!0,ci.exports.default=ci.exports});var py=Lt((Xj,ui)=>{"use strict";var fI=cy(),hI=uy(),pI=fy(),mI=hy();function gI(t,e){return fI(t)||hI(t,e)||pI(t,e)||mI()}ui.exports=gI,ui.exports.__esModule=!0,ui.exports.default=ui.exports});var my=Lt((Kj,li)=>{"use strict";function yI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}li.exports=yI,li.exports.__esModule=!0,li.exports.default=li.exports});var ef=Lt((Jj,zn)=>{"use strict";function Jd(t){"@babel/helpers - typeof";return zn.exports=Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn.exports.__esModule=!0,zn.exports.default=zn.exports,Jd(t)}zn.exports=Jd,zn.exports.__esModule=!0,zn.exports.default=zn.exports});var yy=Lt((eB,di)=>{"use strict";var gy=ef().default;function _I(t,e){if(gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}di.exports=_I,di.exports.__esModule=!0,di.exports.default=di.exports});var _y=Lt((tB,fi)=>{"use strict";var vI=ef().default,xI=yy();function bI(t){var e=xI(t,"string");return vI(e)=="symbol"?e:e+""}fi.exports=bI,fi.exports.__esModule=!0,fi.exports.default=fi.exports});var xy=Lt((nB,hi)=>{"use strict";var wI=_y();function vy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wI(r.key),r)}}function DI(t,e,n){return e&&vy(t.prototype,e),n&&vy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}hi.exports=DI,hi.exports.__esModule=!0,hi.exports.default=hi.exports});var tf=Lt((yc,by)=>{"use strict";(function(t,e){typeof yc=="object"&&typeof by<"u"?e(yc,py(),my(),xy()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.automationEvents={},t._slicedToArray,t._classCallCheck,t._createClass))})(yc,function(t,e,n,r){"use strict";var o=function(D,S,I){return{endTime:S,insertTime:I,type:"exponentialRampToValue",value:D}},s=function(D,S,I){return{endTime:S,insertTime:I,type:"linearRampToValue",value:D}},i=function(D,S){return{startTime:S,type:"setValue",value:D}},a=function(D,S,I){return{duration:I,startTime:S,type:"setValueCurve",values:D}},c=function(D,S,I){var V=I.startTime,R=I.target,N=I.timeConstant;return R+(S-R)*Math.exp((V-D)/N)},u=function(D){return D.type==="exponentialRampToValue"},l=function(D){return D.type==="linearRampToValue"},d=function(D){return u(D)||l(D)},h=function(D){return D.type==="setValue"},f=function(D){return D.type==="setValueCurve"},p=function(D,S,I,V){var R=D[S];return R===void 0?V:d(R)||h(R)?R.value:f(R)?R.values[R.values.length-1]:c(I,p(D,S-1,R.startTime,V),R)},m=function(D,S,I,V,R){return I===void 0?[V.insertTime,R]:d(I)?[I.endTime,I.value]:h(I)?[I.startTime,I.value]:f(I)?[I.startTime+I.duration,I.values[I.values.length-1]]:[I.startTime,p(D,S-1,I.startTime,R)]},g=function(D){return D.type==="cancelAndHold"},y=function(D){return D.type==="cancelScheduledValues"},C=function(D){return g(D)||y(D)?D.cancelTime:u(D)||l(D)?D.endTime:D.startTime},A=function(D,S,I,V){var R=V.endTime,N=V.value;return I===N?N:0<I&&0<N||I<0&&N<0?I*Math.pow(N/I,(D-S)/(R-S)):0},L=function(D,S,I,V){var R=V.endTime,N=V.value;return I+(D-S)/(R-S)*(N-I)},T=function(D,S){var I=Math.floor(S),V=Math.ceil(S);return I===V?D[I]:(1-(S-I))*D[I]+(1-(V-S))*D[V]},w=function(D,S){var I=S.duration,V=S.startTime,R=S.values,N=(D-V)/I*(R.length-1);return T(R,N)},_=function(D){return D.type==="setTarget"},v=function(){function E(D){n(this,E),this._automationEvents=[],this._currenTime=0,this._defaultValue=D}return r(E,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(S){var I=C(S);if(g(S)||y(S)){var V=this._automationEvents.findIndex(function(q){return y(S)&&f(q)?q.startTime+q.duration>=I:C(q)>=I}),R=this._automationEvents[V];if(V!==-1&&(this._automationEvents=this._automationEvents.slice(0,V)),g(S)){var N=this._automationEvents[this._automationEvents.length-1];if(R!==void 0&&d(R)){if(N!==void 0&&_(N))throw new Error("The internal list is malformed.");var ae=N===void 0?R.insertTime:f(N)?N.startTime+N.duration:C(N),_e=N===void 0?this._defaultValue:f(N)?N.values[N.values.length-1]:N.value,Ae=u(R)?A(I,ae,_e,R):L(I,ae,_e,R),tt=u(R)?o(Ae,I,this._currenTime):s(Ae,I,this._currenTime);this._automationEvents.push(tt)}if(N!==void 0&&_(N)&&this._automationEvents.push(i(this.getValue(I),I)),N!==void 0&&f(N)&&N.startTime+N.duration>I){var ze=I-N.startTime,pe=(N.values.length-1)/N.duration,X=Math.max(2,1+Math.ceil(ze*pe)),Zt=ze/(X-1)*pe,gn=N.values.slice(0,X);if(Zt<1)for(var W=1;W<X;W+=1){var Pn=Zt*W%1;gn[W]=N.values[W-1]*(1-Pn)+N.values[W]*Pn}this._automationEvents[this._automationEvents.length-1]=a(gn,N.startTime,ze)}}}else{var Ft=this._automationEvents.findIndex(function(q){return C(q)>I}),yn=Ft===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ft-1];if(yn!==void 0&&f(yn)&&C(yn)+yn.duration>I)return!1;var Kn=u(S)?o(S.value,S.endTime,this._currenTime):l(S)?s(S.value,I,this._currenTime):S;if(Ft===-1)this._automationEvents.push(Kn);else{if(f(S)&&I+S.duration>C(this._automationEvents[Ft]))return!1;this._automationEvents.splice(Ft,0,Kn)}}return!0}},{key:"flush",value:function(S){var I=this._automationEvents.findIndex(function(N){return C(N)>S});if(I>1){var V=this._automationEvents.slice(I-1),R=V[0];_(R)&&V.unshift(i(p(this._automationEvents,I-2,R.startTime,this._defaultValue),R.startTime)),this._automationEvents=V}}},{key:"getValue",value:function(S){if(this._automationEvents.length===0)return this._defaultValue;var I=this._automationEvents.findIndex(function(gn){return C(gn)>S}),V=this._automationEvents[I],R=(I===-1?this._automationEvents.length:I)-1,N=this._automationEvents[R];if(N!==void 0&&_(N)&&(V===void 0||!d(V)||V.insertTime>S))return c(S,p(this._automationEvents,R-1,N.startTime,this._defaultValue),N);if(N!==void 0&&h(N)&&(V===void 0||!d(V)))return N.value;if(N!==void 0&&f(N)&&(V===void 0||!d(V)||N.startTime+N.duration>S))return S<N.startTime+N.duration?w(S,N):N.values[N.values.length-1];if(N!==void 0&&d(N)&&(V===void 0||!d(V)))return N.value;if(V!==void 0&&u(V)){var ae=m(this._automationEvents,R,N,V,this._defaultValue),_e=e(ae,2),Ae=_e[0],tt=_e[1];return A(S,Ae,tt,V)}if(V!==void 0&&l(V)){var ze=m(this._automationEvents,R,N,V,this._defaultValue),pe=e(ze,2),X=pe[0],Zt=pe[1];return L(S,X,Zt,V)}return this._defaultValue}}])}(),F=function(D){return{cancelTime:D,type:"cancelAndHold"}},H=function(D){return{cancelTime:D,type:"cancelScheduledValues"}},k=function(D,S){return{endTime:S,type:"exponentialRampToValue",value:D}},M=function(D,S){return{endTime:S,type:"linearRampToValue",value:D}},$=function(D,S,I){return{startTime:S,target:D,timeConstant:I,type:"setTarget"}};t.AutomationEventList=v,t.createCancelAndHoldAutomationEvent=F,t.createCancelScheduledValuesAutomationEvent=H,t.createExponentialRampToValueAutomationEvent=k,t.createLinearRampToValueAutomationEvent=M,t.createSetTargetAutomationEvent=$,t.createSetValueAutomationEvent=i,t.createSetValueCurveAutomationEvent=a})});function fu(t,e){return Object.is(t,e)}var Ye=null,Ni=!1,hu=1,Qt=Symbol("SIGNAL");function oe(t){let e=Ye;return Ye=t,e}function pu(){return Ye}var no={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _s(t){if(Ni)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(t);let e=Ye.nextProducerIndex++;if(Fi(Ye),e<Ye.producerNode.length&&Ye.producerNode[e]!==t&&ys(Ye)){let n=Ye.producerNode[e];Ri(n,Ye.producerIndexOfThis[e])}Ye.producerNode[e]!==t&&(Ye.producerNode[e]=t,Ye.producerIndexOfThis[e]=ys(Ye)?eh(t,Ye,e):0),Ye.producerLastReadVersion[e]=t.version}function Jf(){hu++}function mu(t){if(!(ys(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hu)){if(!t.producerMustRecompute(t)&&!ki(t)){du(t);return}t.producerRecomputeValue(t),du(t)}}function gu(t){if(t.liveConsumerNode===void 0)return;let e=Ni;Ni=!0;try{for(let n of t.liveConsumerNode)n.dirty||Jb(n)}finally{Ni=e}}function yu(){return Ye?.consumerAllowSignalWrites!==!1}function Jb(t){t.dirty=!0,gu(t),t.consumerMarkedDirty?.(t)}function du(t){t.dirty=!1,t.lastCleanEpoch=hu}function vs(t){return t&&(t.nextProducerIndex=0),oe(t)}function Oi(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ys(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ri(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ki(t){Fi(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mu(n),r!==n.version))return!0}return!1}function xs(t){if(Fi(t),ys(t))for(let e=0;e<t.producerNode.length;e++)Ri(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function eh(t,e,n){if(th(t),t.liveConsumerNode.length===0&&nh(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=eh(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ri(t,e){if(th(t),t.liveConsumerNode.length===1&&nh(t))for(let r=0;r<t.producerNode.length;r++)Ri(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Fi(o),o.producerIndexOfThis[r]=e}}function ys(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function th(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function nh(t){return t.producerNode!==void 0}function _u(t,e){let n=Object.create(ew);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(mu(n),_s(n),n.value===Mi)throw n.error;return n.value};return r[Qt]=n,r}var uu=Symbol("UNSET"),lu=Symbol("COMPUTING"),Mi=Symbol("ERRORED"),ew=j(b({},no),{value:uu,dirty:!0,error:null,equal:fu,kind:"computed",producerMustRecompute(t){return t.value===uu||t.value===lu},producerRecomputeValue(t){if(t.value===lu)throw new Error("Detected cycle in computations.");let e=t.value;t.value=lu;let n=vs(t),r,o=!1;try{r=t.computation(),oe(null),o=e!==uu&&e!==Mi&&r!==Mi&&t.equal(e,r)}catch(s){r=Mi,t.error=s}finally{Oi(t,n)}if(o){t.value=e;return}t.value=r,t.version++}});function tw(){throw new Error}var rh=tw;function oh(t){rh(t)}function vu(t){rh=t}var nw=null;function xu(t,e){let n=Object.create(Pi);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(_s(n),n.value);return r[Qt]=n,r}function bs(t,e){yu()||oh(t),t.equal(t.value,e)||(t.value=e,rw(t))}function bu(t,e){yu()||oh(t),bs(t,e(t.value))}var Pi=j(b({},no),{equal:fu,value:void 0,kind:"signal"});function rw(t){t.version++,Jf(),gu(t),nw?.()}function wu(t){let e=oe(null);try{return t()}finally{oe(e)}}var Du;function ws(){return Du}function Ln(t){let e=Du;return Du=t,e}var Li=Symbol("NotFound");function ne(t){return typeof t=="function"}function ro(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Vi=ro(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(s){e=s instanceof Vi?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{sh(s)}catch(i){e=e??[],i instanceof Vi?e=[...e,...i.errors]:e.push(i)}}if(e)throw new Vi(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vr(n,e)}remove(e){let{_finalizers:n}=this;n&&vr(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var Tu=Fe.EMPTY;function ji(t){return t instanceof Fe||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function sh(t){ne(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oo={setTimeout(t,e,...n){let{delegate:r}=oo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bi(t){oo.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function Ds(){}var ih=Su("C",void 0,void 0);function ah(t){return Su("E",void 0,t)}function ch(t){return Su("N",t,void 0)}function Su(t,e,n){return{kind:t,value:e,error:n}}var xr=null;function so(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xr;if(xr=null,n)throw r}}else t()}function uh(t){Xt.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=t)}var br=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ji(e)&&e.add(this)):this.destination=uw}static create(e,n,r){return new io(e,n,r)}next(e){this.isStopped?Eu(ch(e),this):this._next(e)}error(e){this.isStopped?Eu(ah(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eu(ih,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aw=Function.prototype.bind;function Cu(t,e){return aw.call(t,e)}var Iu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qi(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qi(r)}else qi(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qi(n)}}},io=class extends br{constructor(e,n,r){super();let o;if(ne(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Cu(e.next,s),error:e.error&&Cu(e.error,s),complete:e.complete&&Cu(e.complete,s)}):o=e}this.destination=new Iu(o)}};function qi(t){Xt.useDeprecatedSynchronousErrorHandling?uh(t):Bi(t)}function cw(t){throw t}function Eu(t,e){let{onStoppedNotification:n}=Xt;n&&oo.setTimeout(()=>n(t,e))}var uw={closed:!0,next:Ds,error:cw,complete:Ds};var ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(t){return t}function lw(...t){return Au(t)}function Au(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var me=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let s=fw(n)?n:new io(n,r,o);return so(()=>{let{operator:i,source:a}=this;s.add(i?i.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=lh(r),new r((o,s)=>{let i=new io({next:a=>{try{n(a)}catch(c){s(c),i.unsubscribe()}},error:s,complete:o});this.subscribe(i)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ao](){return this}pipe(...n){return Au(n)(this)}toPromise(n){return n=lh(n),new n((r,o)=>{let s;this.subscribe(i=>s=i,i=>o(i),()=>r(s))})}}return t.create=e=>new t(e),t})();function lh(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function dw(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function fw(t){return t&&t instanceof br||dw(t)&&ji(t)}function Nu(t){return ne(t?.lift)}function ce(t){return e=>{if(Nu(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,o){return new Mu(t,e,n,r,o)}var Mu=class extends br{constructor(e,n,r,o,s,i){super(e),this.onFinalize=s,this.shouldUnsubscribe=i,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ou(){return ce((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,s=n;n=null,o&&(!s||o===s)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ku=class extends me{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nu(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return Ou()(this)}};var co={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame,{delegate:r}=co;r&&(e=r.requestAnimationFrame,n=r.cancelAnimationFrame);let o=e(s=>{n=void 0,t(s)});return new Fe(()=>n?.(o))},requestAnimationFrame(...t){let{delegate:e}=co;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=co;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};var dh=ro(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Vt=(()=>{class t extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ui(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dh}next(n){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:s}=this;return r||o?Tu:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,vr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:s}=this;r?n.error(o):s&&n.complete()}asObservable(){let n=new me;return n.source=this,n}}return t.create=(e,n)=>new Ui(e,n),t})(),Ui=class extends Vt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tu}};var wr=class extends Vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ru={now(){return(Ru.delegate||Date).now()},delegate:void 0};var Hi=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ts={setInterval(t,e,...n){let{delegate:r}=Ts;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ts;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var uo=class extends Hi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ts.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ts.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,o;try{this.work(e)}catch(s){r=!0,o=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var lo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};lo.now=Ru.now;var fo=class extends lo{constructor(e,n=lo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Dr=new fo(uo),fh=Dr;var $i=class extends uo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return r!==null&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e._scheduled||(e._scheduled=co.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,r=0){var o;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,n,r);let{actions:s}=e;n!=null&&n===e._scheduled&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==n&&(co.cancelAnimationFrame(n),e._scheduled=void 0)}};var Wi=class extends fo{flush(e){this._active=!0;let n;e?n=e.id:(n=this._scheduled,this._scheduled=void 0);let{actions:r}=this,o;e=e||r.shift();do if(o=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,o){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw o}}};var hw=new Wi($i);var Vn=new me(t=>t.complete());function zi(t){return t&&ne(t.schedule)}function Fu(t){return t[t.length-1]}function Gi(t){return ne(Fu(t))?t.pop():void 0}function _n(t){return zi(Fu(t))?t.pop():void 0}function hh(t,e){return typeof Fu(t)=="number"?t.pop():e}function ot(t,e,n,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function fe(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(l){try{u(r.next(l))}catch(d){i(d)}}function c(l){try{u(r.throw(l))}catch(d){i(d)}}function u(l){l.done?s(l.value):o(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function ph(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(t){return this instanceof Tr?(this.v=t,this):new Tr(t)}function mh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(o[f]=function(m){return new Promise(function(g,y){s.push([f,m,g,y])>1||c(f,m)})},p&&(o[f]=p(o[f])))}function c(f,p){try{u(r[f](p))}catch(m){h(s[0][3],m)}}function u(f){f.value instanceof Tr?Promise.resolve(f.value.v).then(l,d):h(s[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function gh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ph=="function"?ph(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(i){return new Promise(function(a,c){i=t[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},i)}}var Yi=t=>t&&typeof t.length=="number"&&typeof t!="function";function Zi(t){return ne(t?.then)}function Qi(t){return ne(t[ao])}function Xi(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function Ki(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ji=pw();function ea(t){return ne(t?.[Ji])}function ta(t){return mh(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield Tr(n.read());if(o)return yield Tr(void 0);yield yield Tr(r)}}finally{n.releaseLock()}})}function na(t){return ne(t?.getReader)}function Me(t){if(t instanceof me)return t;if(t!=null){if(Qi(t))return mw(t);if(Yi(t))return gw(t);if(Zi(t))return yw(t);if(Xi(t))return yh(t);if(ea(t))return _w(t);if(na(t))return vw(t)}throw Ki(t)}function mw(t){return new me(e=>{let n=t[ao]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gw(t){return new me(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function yw(t){return new me(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bi)})}function _w(t){return new me(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yh(t){return new me(e=>{xw(t,e).catch(n=>e.error(n))})}function vw(t){return yh(ta(t))}function xw(t,e){var n,r,o,s;return fe(this,void 0,void 0,function*(){try{for(n=gh(t);r=yield n.next(),!r.done;){let i=r.value;if(e.next(i),e.closed)return}}catch(i){o={error:i}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(o)throw o.error}}e.complete()})}function bt(t,e,n,r=0,o=!1){let s=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!o)return s}function ra(t,e=0){return ce((n,r)=>{n.subscribe(re(r,o=>bt(r,t,()=>r.next(o),e),()=>bt(r,t,()=>r.complete(),e),o=>bt(r,t,()=>r.error(o),e)))})}function oa(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function _h(t,e){return Me(t).pipe(oa(e),ra(e))}function vh(t,e){return Me(t).pipe(oa(e),ra(e))}function xh(t,e){return new me(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function bh(t,e){return new me(n=>{let r;return bt(n,e,()=>{r=t[Ji](),bt(n,e,()=>{let o,s;try{({value:o,done:s}=r.next())}catch(i){n.error(i);return}s?n.complete():n.next(o)},0,!0)}),()=>ne(r?.return)&&r.return()})}function sa(t,e){if(!t)throw new Error("Iterable cannot be null");return new me(n=>{bt(n,e,()=>{let r=t[Symbol.asyncIterator]();bt(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function wh(t,e){return sa(ta(t),e)}function Dh(t,e){if(t!=null){if(Qi(t))return _h(t,e);if(Yi(t))return xh(t,e);if(Zi(t))return vh(t,e);if(Xi(t))return sa(t,e);if(ea(t))return bh(t,e);if(na(t))return wh(t,e)}throw Ki(t)}function vn(t,e){return e?Dh(t,e):Me(t)}function bw(...t){let e=_n(t);return vn(t,e)}function ww(t,e){let n=ne(t)?t:()=>t,r=o=>o.error(n());return new me(e?o=>e.schedule(r,0,o):r)}function Dw(t){return!!t&&(t instanceof me||ne(t.lift)&&ne(t.subscribe))}var Sr=ro(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Th(t){return t instanceof Date&&!isNaN(t)}function Cr(t,e){return ce((n,r)=>{let o=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,o++))}))})}var{isArray:Tw}=Array;function Sw(t,e){return Tw(e)?t(...e):t(e)}function ia(t){return Cr(e=>Sw(t,e))}var{isArray:Cw}=Array,{getPrototypeOf:Ew,prototype:Iw,keys:Aw}=Object;function aa(t){if(t.length===1){let e=t[0];if(Cw(e))return{args:e,keys:null};if(Nw(e)){let n=Aw(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Nw(t){return t&&typeof t=="object"&&Ew(t)===Iw}function ca(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Mw(...t){let e=_n(t),n=Gi(t),{args:r,keys:o}=aa(t);if(r.length===0)return vn([],e);let s=new me(Ow(r,e,o?i=>ca(o,i):dt));return n?s.pipe(ia(n)):s}function Ow(t,e,n=dt){return r=>{Sh(e,()=>{let{length:o}=t,s=new Array(o),i=o,a=o;for(let c=0;c<o;c++)Sh(e,()=>{let u=vn(t[c],e),l=!1;u.subscribe(re(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--i||r.complete()}))},r)},r)}}function Sh(t,e,n){t?bt(n,t,e):e()}function Ch(t,e,n,r,o,s,i,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=m=>u<r?p(m):c.push(m),p=m=>{s&&e.next(m),u++;let g=!1;Me(n(m,l++)).subscribe(re(e,y=>{o?.(y),s?f(y):e.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;c.length&&u<r;){let y=c.shift();i?bt(e,i,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return t.subscribe(re(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Er(t,e,n=1/0){return ne(e)?Er((r,o)=>Cr((s,i)=>e(r,s,o,i))(Me(t(r,o))),n):(typeof e=="number"&&(n=e),ce((r,o)=>Ch(r,o,t,n)))}function Ss(t=1/0){return Er(dt,t)}function Eh(){return Ss(1)}function ua(...t){return Eh()(vn(t,_n(t)))}function kw(t){return new me(e=>{Me(t()).subscribe(e)})}function Rw(...t){let e=Gi(t),{args:n,keys:r}=aa(t),o=new me(s=>{let{length:i}=n;if(!i){s.complete();return}let a=new Array(i),c=i,u=i;for(let l=0;l<i;l++){let d=!1;Me(n[l]).subscribe(re(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?ca(r,a):a),s.complete())}))}});return e?o.pipe(ia(e)):o}function la(t=0,e,n=fh){let r=-1;return e!=null&&(zi(e)?n=e:r=e),new me(o=>{let s=Th(t)?+t-n.now():t;s<0&&(s=0);let i=0;return n.schedule(function(){o.closed||(o.next(i++),0<=r?this.schedule(void 0,r):o.complete())},s)})}function Pu(t=0,e=Dr){return t<0&&(t=0),la(t,t,e)}function Fw(...t){let e=_n(t),n=hh(t,1/0),r=t;return r.length?r.length===1?Me(r[0]):Ss(n)(vn(r,e)):Vn}function Cs(t,e){return ce((n,r)=>{let o=0;n.subscribe(re(r,s=>t.call(e,s,o++)&&r.next(s)))})}function Ih(t){return ce((e,n)=>{let r=!1,o=null,s=null,i=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let u=o;o=null,n.next(u)}i&&n.complete()},c=()=>{s=null,i&&n.complete()};e.subscribe(re(n,u=>{r=!0,o=u,s||Me(t(u)).subscribe(s=re(n,a,c))},()=>{i=!0,(!r||!s||s.closed)&&n.complete()}))})}function Pw(t,e=Dr){return Ih(()=>la(t,e))}function Ah(t){return ce((e,n)=>{let r=null,o=!1,s;r=e.subscribe(re(n,void 0,void 0,i=>{s=Me(t(i,Ah(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Nh(t,e,n,r,o){return(s,i)=>{let a=n,c=e,u=0;s.subscribe(re(i,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&i.next(c)},o&&(()=>{a&&i.next(c),i.complete()})))}}function Lw(t,e){return ne(e)?Er(t,e,1):Er(t,1)}function Vw(t,e=Dr){return ce((n,r)=>{let o=null,s=null,i=null,a=()=>{if(o){o.unsubscribe(),o=null;let u=s;s=null,r.next(u)}};function c(){let u=i+t,l=e.now();if(l<u){o=this.schedule(void 0,u-l),r.add(o);return}a()}n.subscribe(re(r,u=>{s=u,i=e.now(),o||(o=e.schedule(c,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{s=o=null}))})}function Es(t){return ce((e,n)=>{let r=!1;e.subscribe(re(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Lu(t){return t<=0?()=>Vn:ce((e,n)=>{let r=0;e.subscribe(re(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function jw(t,e=dt){return t=t??Bw,ce((n,r)=>{let o,s=!0;n.subscribe(re(r,i=>{let a=e(i);(s||!t(o,a))&&(s=!1,o=a,r.next(i))}))})}function Bw(t,e){return t===e}function da(t=qw){return ce((e,n)=>{let r=!1;e.subscribe(re(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function qw(){return new Sr}function Uw(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Hw(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Cs((o,s)=>t(o,s,r)):dt,Lu(1),n?Es(e):da(()=>new Sr))}function Vu(t){return t<=0?()=>Vn:ce((e,n)=>{let r=[];e.subscribe(re(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function $w(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Cs((o,s)=>t(o,s,r)):dt,Vu(1),n?Es(e):da(()=>new Sr))}function Ww(t,e){return ce(Nh(t,e,arguments.length>=2,!0))}function zw(...t){let e=_n(t);return ce((n,r)=>{(e?ua(t,n,e):ua(t,n)).subscribe(r)})}function ju(t,e){return ce((n,r)=>{let o=null,s=0,i=!1,a=()=>i&&!o&&r.complete();n.subscribe(re(r,c=>{o?.unsubscribe();let u=0,l=s++;Me(t(c,l)).subscribe(o=re(r,d=>r.next(e?e(c,d,l,u++):d),()=>{o=null,a()}))},()=>{i=!0,a()}))})}function Bu(t){return ce((e,n)=>{Me(t).subscribe(re(n,()=>n.complete(),Ds)),!n.closed&&e.subscribe(n)})}function Gw(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((o,s)=>{var i;(i=r.subscribe)===null||i===void 0||i.call(r);let a=!0;o.subscribe(re(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):dt}var vp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",he=class extends Error{code;constructor(e,n){super(nd(e,n)),this.code=e}};function Yw(t){return`NG0${Math.abs(t)}`}function nd(t,e){return`${Yw(t)}${e?": "+e:""}`}var xp=Symbol("InputSignalNode#UNSET"),Zw=j(b({},Pi),{transformFn:void 0,applyValueToInputSignal(t,e){bs(t,e)}});function bp(t,e){let n=Object.create(Zw);n.value=t,n.transformFn=e?.transform;function r(){if(_s(n),n.value===xp){let o=null;throw new he(-950,o)}return n.value}return r[Qt]=n,r}function zs(t){return{toString:t}.toString()}var fa="__parameters__";function Qw(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function wp(t,e,n){return zs(()=>{let r=Qw(e);function o(...s){if(this instanceof o)return r.apply(this,s),this;let i=new o(...s);return a.annotation=i,a;function a(c,u,l){let d=c.hasOwnProperty(fa)?c[fa]:Object.defineProperty(c,fa,{value:[]})[fa];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(i),c}}return o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var Mh=globalThis;function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function Xw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(wt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Oh(t,e){return t?e?`${t} ${e}`:t:e||""}var Kw=Ee({__forward_ref__:Ee});function Dp(t){return t.__forward_ref__=Dp,t.toString=function(){return wt(this())},t}function ft(t){return Tp(t)?t():t}function Tp(t){return typeof t=="function"&&t.hasOwnProperty(Kw)&&t.__forward_ref__===Dp}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Sp(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qa(t){return kh(t,Cp)||kh(t,Ep)}function UP(t){return Qa(t)!==null}function kh(t,e){return t.hasOwnProperty(e)?t[e]:null}function Jw(t){let e=t&&(t[Cp]||t[Ep]);return e||null}function Rh(t){return t&&(t.hasOwnProperty(Fh)||t.hasOwnProperty(eD))?t[Fh]:null}var Cp=Ee({\u0275prov:Ee}),Fh=Ee({\u0275inj:Ee}),Ep=Ee({ngInjectableDef:Ee}),eD=Ee({ngInjectorDef:Ee}),ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ip(t){return t&&!!t.\u0275providers}var tD=Ee({\u0275cmp:Ee}),nD=Ee({\u0275dir:Ee}),rD=Ee({\u0275pipe:Ee}),oD=Ee({\u0275mod:Ee}),ba=Ee({\u0275fac:Ee}),Ms=Ee({__NG_ELEMENT_ID__:Ee}),Ph=Ee({__NG_ENV_ID__:Ee});function xn(t){return typeof t=="string"?t:t==null?"":String(t)}function sD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():xn(t)}function Ap(t,e){throw new he(-200,t)}function rd(t,e){throw new he(-201,!1)}var ue=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ue||{}),tl;function Np(){return tl}function jt(t){let e=tl;return tl=t,e}function Mp(t,e,n){let r=Qa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ue.Optional)return null;if(e!==void 0)return e;rd(t,"Injector")}var iD={},Ir=iD,nl="__NG_DI_FLAG__",wa=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?Li:Ir,r)}},Da="ngTempTokenPath",aD="ngTokenPath",cD=/\n/gm,uD="\u0275",Lh="__source";function lD(t,e=ue.Default){if(ws()===void 0)throw new he(-203,!1);if(ws()===null)return Mp(t,void 0,e);{let n=ws(),r;return n instanceof wa?r=n.injector:r=n,r.get(t,e&ue.Optional?null:void 0,e)}}function Qe(t,e=ue.Default){return(Np()||lD)(ft(t),e)}function Y(t,e=ue.Default){return Qe(t,Xa(e))}function Xa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function rl(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new he(900,!1);let o,s=ue.Default;for(let i=0;i<r.length;i++){let a=r[i],c=dD(a);typeof c=="number"?c===-1?o=a.token:s|=c:o=a}e.push(Qe(o,s))}else e.push(Qe(r))}return e}function Op(t,e){return t[nl]=e,t.prototype[nl]=e,t}function dD(t){return t[nl]}function fD(t,e,n,r){let o=t[Da];throw e[Lh]&&o.unshift(e[Lh]),t.message=hD(`
`+t.message,o,n,r),t[aD]=o,t[Da]=null,t}function hD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==uD?t.slice(2):t;let o=wt(e);if(Array.isArray(e))o=e.map(wt).join(" -> ");else if(typeof e=="object"){let s=[];for(let i in e)if(e.hasOwnProperty(i)){let a=e[i];s.push(i+":"+(typeof a=="string"?JSON.stringify(a):wt(a)))}o=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(cD,`
  `)}`}var pD=Op(wp("Optional"),8);var mD=Op(wp("SkipSelf"),4);function vo(t,e){let n=t.hasOwnProperty(ba);return n?t[ba]:null}function gD(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],s=e[r];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}function yD(t){return t.flat(Number.POSITIVE_INFINITY)}function od(t,e){t.forEach(n=>Array.isArray(n)?od(n,e):e(n))}function kp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ta(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function _D(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let s=o-2;t[o]=t[s],o--}t[e]=n,t[e+1]=r}}function vD(t,e,n){let r=Gs(t,e);return r>=0?t[r|1]=n:(r=~r,_D(t,r,e,n)),r}function qu(t,e){let n=Gs(t,e);if(n>=0)return t[n|1]}function Gs(t,e){return xD(t,e,1)}function xD(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let s=r+(o-r>>1),i=t[s<<n];if(e===i)return s<<n;i>e?o=s:r=s+1}return~(o<<n)}var Nr={},Bt=[],Sa=new ye(""),Rp=new ye("",-1),Fp=new ye(""),Ca=class{get(e,n=Ir){if(n===Ir){let r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Pp(t,e){let n=t[oD]||null;if(!n&&e===!0)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function or(t){return t[tD]||null}function bD(t){return t[nD]||null}function wD(t){return t[rD]||null}function Lp(t){return{\u0275providers:t}}function DD(...t){return{\u0275providers:Vp(!0,t),\u0275fromNgModule:!0}}function Vp(t,...e){let n=[],r=new Set,o,s=i=>{n.push(i)};return od(e,i=>{let a=i;ol(a,s,[],r)&&(o||=[],o.push(a))}),o!==void 0&&jp(o,s),n}function jp(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];sd(o,s=>{e(s,r)})}}function ol(t,e,n,r){if(t=ft(t),!t)return!1;let o=null,s=Rh(t),i=!s&&or(t);if(!s&&!i){let c=t.ngModule;if(s=Rh(c),s)o=c;else return!1}else{if(i&&!i.standalone)return!1;o=t}let a=r.has(o);if(i){if(a)return!1;if(r.add(o),i.dependencies){let c=typeof i.dependencies=="function"?i.dependencies():i.dependencies;for(let u of c)ol(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(o);let u;try{od(s.imports,l=>{ol(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&jp(u,e)}if(!a){let u=vo(o)||(()=>new o);e({provide:o,useFactory:u,deps:Bt},o),e({provide:Fp,useValue:o,multi:!0},o),e({provide:Sa,useValue:()=>Qe(o),multi:!0},o)}let c=s.providers;if(c!=null&&!a){let u=t;sd(c,l=>{e(l,u)})}}else return!1;return o!==t&&t.providers!==void 0}function sd(t,e){for(let n of t)Ip(n)&&(n=n.\u0275providers),Array.isArray(n)?sd(n,e):e(n)}var TD=Ee({provide:String,useValue:Ee});function Bp(t){return t!==null&&typeof t=="object"&&TD in t}function SD(t){return!!(t&&t.useExisting)}function CD(t){return!!(t&&t.useFactory)}function xo(t){return typeof t=="function"}function ED(t){return!!t.useClass}var qp=new ye(""),ma={},Vh={},Uu;function Ka(){return Uu===void 0&&(Uu=new Ca),Uu}var sr=class{},Os=class extends sr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,il(e,i=>this.processProvider(i)),this.records.set(Rp,ho(void 0,this)),o.has("environment")&&this.records.set(sr,ho(void 0,this));let s=this.records.get(qp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Fp,Bt,ue.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?Li:Ir,r)}destroy(){As(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return As(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){As(this);let n=Ln(this),r=jt(void 0),o;try{return e()}finally{Ln(n),jt(r)}}get(e,n=Ir,r=ue.Default){if(As(this),e.hasOwnProperty(Ph))return e[Ph](this);r=Xa(r);let o,s=Ln(this),i=jt(void 0);try{if(!(r&ue.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=OD(e)&&Qa(e);u&&this.injectableDefInScope(u)?c=ho(sl(e),ma):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&ue.Self?Ka():this.parent;return n=r&ue.Optional&&n===Ir?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Da]=a[Da]||[]).unshift(wt(e)),s)throw a;return fD(a,e,"R3InjectorError",this.source)}else throw a}finally{jt(i),Ln(s)}}resolveInjectorInitializers(){let e=oe(null),n=Ln(this),r=jt(void 0),o;try{let s=this.get(Sa,Bt,ue.Self);for(let i of s)i()}finally{Ln(n),jt(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ft(e);let n=xo(e)?e:ft(e&&e.provide),r=AD(e);if(!xo(e)&&e.multi===!0){let o=this.records.get(n);o||(o=ho(void 0,ma,!0),o.factory=()=>rl(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let o=oe(null);try{return n.value===Vh?Ap(wt(e)):n.value===ma&&(n.value=Vh,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&MD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sl(t){let e=Qa(t),n=e!==null?e.factory:vo(t);if(n!==null)return n;if(t instanceof ye)throw new he(204,!1);if(t instanceof Function)return ID(t);throw new he(204,!1)}function ID(t){if(t.length>0)throw new he(204,!1);let n=Jw(t);return n!==null?()=>n.factory(t):()=>new t}function AD(t){if(Bp(t))return ho(void 0,t.useValue);{let e=Up(t);return ho(e,ma)}}function Up(t,e,n){let r;if(xo(t)){let o=ft(t);return vo(o)||sl(o)}else if(Bp(t))r=()=>ft(t.useValue);else if(CD(t))r=()=>t.useFactory(...rl(t.deps||[]));else if(SD(t))r=(o,s)=>Qe(ft(t.useExisting),s!==void 0&&s&ue.Optional?ue.Optional:void 0);else{let o=ft(t&&(t.useClass||t.provide));if(ND(t))r=()=>new o(...rl(t.deps));else return vo(o)||sl(o)}return r}function As(t){if(t.destroyed)throw new he(205,!1)}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ND(t){return!!t.deps}function MD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function OD(t){return typeof t=="function"||typeof t=="object"&&t instanceof ye}function il(t,e){for(let n of t)Array.isArray(n)?il(n,e):n&&Ip(n)?il(n.\u0275providers,e):e(n)}function Hp(t,e){let n;t instanceof Os?(As(t),n=t):n=new wa(t);let r,o=Ln(n),s=jt(void 0);try{return e()}finally{Ln(o),jt(s)}}function $p(){return Np()!==void 0||ws()!=null}function Ja(t){if(!$p())throw new he(-203,!1)}function kD(t){return typeof t=="function"}var Un=0,se=1,te=2,it=3,Jt=4,tn=5,ks=6,Ea=7,Ze=8,bo=9,jn=10,Ke=11,Rs=12,jh=13,Co=14,en=15,Mr=16,po=17,Bn=18,ec=19,Wp=20,nr=21,Hu=22,Or=23,qt=24,yo=25,Ut=26,zp=1;var kr=7,Ia=8,wo=9,st=10;function rr(t){return Array.isArray(t)&&typeof t[zp]=="object"}function Hn(t){return Array.isArray(t)&&t[zp]===!0}function Gp(t){return(t.flags&4)!==0}function Eo(t){return t.componentOffset>-1}function id(t){return(t.flags&1)===1}function wn(t){return!!t.template}function Aa(t){return(t[te]&512)!==0}function Io(t){return(t[te]&256)===256}var al=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Yp(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var RD=(()=>{let t=()=>Zp;return t.ngInherit=!0,t})();function Zp(t){return t.type.prototype.ngOnChanges&&(t.setInput=PD),FD}function FD(){let t=Xp(this),e=t?.current;if(e){let n=t.previous;if(n===Nr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PD(t,e,n,r,o){let s=this.declaredInputs[r],i=Xp(t)||LD(t,{previous:Nr,current:null}),a=i.current||(i.current={}),c=i.previous,u=c[s];a[s]=new al(u&&u.currentValue,n,c===Nr),Yp(t,e,o,n)}var Qp="__ngSimpleChanges__";function Xp(t){return t[Qp]||null}function LD(t,e){return t[Qp]=e}var Bh=null;var Te=function(t,e=null,n){Bh?.(t,e,n)},Kp="svg",VD="math";function Dn(t){for(;Array.isArray(t);)t=t[Un];return t}function Jp(t,e){return Dn(e[t])}function Sn(t,e){return Dn(e[t.index])}function ad(t,e){return t.data[e]}function Tn(t,e){let n=e[t];return rr(n)?n:n[Un]}function jD(t){return(t[te]&4)===4}function cd(t){return(t[te]&128)===128}function BD(t){return Hn(t[it])}function Do(t,e){return e==null?null:t[e]}function em(t){t[po]=0}function tm(t){t[te]&1024||(t[te]|=1024,cd(t)&&Ao(t))}function qD(t,e){for(;t>0;)e=e[Co],t--;return e}function tc(t){return!!(t[te]&9216||t[qt]?.dirty)}function cl(t){t[jn].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),tc(t)&&Ao(t)}function Ao(t){t[jn].changeDetectionScheduler?.notify(0);let e=Rr(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!cd(e)));)e=Rr(e)}function nm(t,e){if(Io(t))throw new he(911,!1);t[nr]===null&&(t[nr]=[]),t[nr].push(e)}function UD(t,e){if(t[nr]===null)return;let n=t[nr].indexOf(e);n!==-1&&t[nr].splice(n,1)}function Rr(t){let e=t[it];return Hn(e)?e[it]:e}function ud(t){return t[Ea]??=[]}function ld(t){return t.cleanup??=[]}function HD(t,e,n,r){let o=ud(e);o.push(n),t.firstCreatePass&&ld(t).push(r,o.length-1)}var ie={lFrame:dm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ul=!1;function $D(){return ie.lFrame.elementDepthCount}function WD(){ie.lFrame.elementDepthCount++}function zD(){ie.lFrame.elementDepthCount--}function rm(){return ie.bindingsEnabled}function GD(){return ie.skipHydrationRootTNode!==null}function YD(t){return ie.skipHydrationRootTNode===t}function ZD(){ie.skipHydrationRootTNode=null}function ge(){return ie.lFrame.lView}function at(){return ie.lFrame.tView}function HP(t){return ie.lFrame.contextLView=t,t[Ze]}function $P(t){return ie.lFrame.contextLView=null,t}function Dt(){let t=om();for(;t!==null&&t.type===64;)t=t.parent;return t}function om(){return ie.lFrame.currentTNode}function QD(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ys(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function sm(){return ie.lFrame.isParent}function XD(){ie.lFrame.isParent=!1}function im(){return ul}function Na(t){let e=ul;return ul=t,e}function KD(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function am(){return ie.lFrame.bindingIndex}function JD(t){return ie.lFrame.bindingIndex=t}function Zs(){return ie.lFrame.bindingIndex++}function dd(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eT(){return ie.lFrame.inI18n}function tT(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,ll(e)}function nT(){return ie.lFrame.currentDirectiveIndex}function ll(t){ie.lFrame.currentDirectiveIndex=t}function rT(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function cm(){return ie.lFrame.currentQueryIndex}function fd(t){ie.lFrame.currentQueryIndex=t}function oT(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[tn]:null}function um(t,e,n){if(n&ue.SkipSelf){let o=e,s=t;for(;o=o.parent,o===null&&!(n&ue.Host);)if(o=oT(s),o===null||(s=s[Co],o.type&10))break;if(o===null)return!1;e=o,t=s}let r=ie.lFrame=lm();return r.currentTNode=e,r.lView=t,!0}function hd(t){let e=lm(),n=t[se];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function lm(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?dm(t):e}function dm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function fm(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var hm=fm;function pd(){let t=fm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sT(t){return(ie.lFrame.contextLView=qD(t,ie.lFrame.contextLView))[Ze]}function $n(){return ie.lFrame.selectedIndex}function Fr(t){ie.lFrame.selectedIndex=t}function md(){let t=ie.lFrame;return ad(t.tView,t.selectedIndex)}function WP(){ie.lFrame.currentNamespace=Kp}function zP(){iT()}function iT(){ie.lFrame.currentNamespace=null}function aT(){return ie.lFrame.currentNamespace}var pm=!0;function gd(){return pm}function yd(t){pm=t}function cT(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=e.type.prototype;if(r){let i=Zp(e);(n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i)}o&&(n.preOrderHooks??=[]).push(0-t,o),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function mm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;i&&(t.contentHooks??=[]).push(-n,i),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function ga(t,e,n){gm(t,e,3,n)}function ya(t,e,n,r){(t[te]&3)===n&&gm(t,e,n,r)}function $u(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function gm(t,e,n,r){let o=r!==void 0?t[po]&65535:0,s=r??-1,i=e.length-1,a=0;for(let c=o;c<i;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[po]+=65536),(a<s||s==-1)&&(uT(t,n,e,c),t[po]=(t[po]&4294901760)+c+2),c++}function qh(t,e){Te(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),Te(5,t,e)}}function uT(t,e,n,r){let o=n[r]<0,s=n[r+1],i=o?-n[r]:n[r],a=t[i];o?t[te]>>14<t[po]>>16&&(t[te]&3)===e&&(t[te]+=16384,qh(a,s)):qh(a,s)}var _o=-1,Pr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function lT(t){return(t.flags&8)!==0}function dT(t){return(t.flags&16)!==0}function fT(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let s=n[r++],i=n[r++],a=n[r++];t.setAttribute(e,i,a,s)}else{let s=o,i=n[++r];hT(s)?t.setProperty(e,s,i):t.setAttribute(e,s,i),r++}}return r}function ym(t){return t===3||t===4||t===6}function hT(t){return t.charCodeAt(0)===64}function Fs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Uh(t,n,o,null,e[++r]):Uh(t,n,o,null,null))}}return t}function Uh(t,e,n,r,o){let s=0,i=t.length;if(e===-1)i=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){i=-1;break}else if(a>e){i=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){o!==null&&(t[s+1]=o);return}s++,o!==null&&s++}i!==-1&&(t.splice(i,0,e),s=i+1),t.splice(s++,0,n),o!==null&&t.splice(s++,0,o)}function _m(t){return t!==_o}function Ma(t){return t&32767}function pT(t){return t>>16}function Oa(t,e){let n=pT(t),r=e;for(;n>0;)r=r[Co],n--;return r}var dl=!0;function Hh(t){let e=dl;return dl=t,e}var mT=256,vm=mT-1,xm=5,gT=0,bn={};function yT(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ms)&&(r=n[Ms]),r==null&&(r=n[Ms]=gT++);let o=r&vm,s=1<<o;e.data[t+(o>>xm)]|=s}function ka(t,e){let n=bm(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Wu(r.data,t),Wu(e,null),Wu(r.blueprint,null));let o=_d(t,e),s=t.injectorIndex;if(_m(o)){let i=Ma(o),a=Oa(o,e),c=a[se].data;for(let u=0;u<8;u++)e[s+u]=a[i+u]|c[i+u]}return e[s+8]=o,s}function Wu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function bm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _d(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=Cm(o),r===null)return _o;if(n++,o=o[Co],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _o}function fl(t,e,n){yT(t,e,n)}function _T(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,o=0;for(;o<r;){let s=n[o];if(ym(s))break;if(s===0)o=o+2;else if(typeof s=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(s===e)return n[o+1];o=o+2}}}return null}function wm(t,e,n){if(n&ue.Optional||t!==void 0)return t;rd(e,"NodeInjector")}function Dm(t,e,n,r){if(n&ue.Optional&&r===void 0&&(r=null),(n&(ue.Self|ue.Host))===0){let o=t[bo],s=jt(void 0);try{return o?o.get(e,r,n&ue.Optional):Mp(e,r,n&ue.Optional)}finally{jt(s)}}return wm(r,e,n)}function Tm(t,e,n,r=ue.Default,o){if(t!==null){if(e[te]&2048&&!(r&ue.Self)){let i=wT(t,e,n,r,bn);if(i!==bn)return i}let s=Sm(t,e,n,r,bn);if(s!==bn)return s}return Dm(e,n,r,o)}function Sm(t,e,n,r,o){let s=xT(n);if(typeof s=="function"){if(!um(e,t,r))return r&ue.Host?wm(o,n,r):Dm(e,n,r,o);try{let i;if(i=s(r),i==null&&!(r&ue.Optional))rd(n);else return i}finally{hm()}}else if(typeof s=="number"){let i=null,a=bm(t,e),c=_o,u=r&ue.Host?e[en][tn]:null;for((a===-1||r&ue.SkipSelf)&&(c=a===-1?_d(t,e):e[a+8],c===_o||!Wh(r,!1)?a=-1:(i=e[se],a=Ma(c),e=Oa(c,e)));a!==-1;){let l=e[se];if($h(s,a,l.data)){let d=vT(a,e,n,i,r,u);if(d!==bn)return d}c=e[a+8],c!==_o&&Wh(r,e[se].data[a+8]===u)&&$h(s,a,e)?(i=l,a=Ma(c),e=Oa(c,e)):a=-1}}return o}function vT(t,e,n,r,o,s){let i=e[se],a=i.data[t+8],c=r==null?Eo(a)&&dl:r!=i&&(a.type&3)!==0,u=o&ue.Host&&s===a,l=_a(a,i,n,c,u);return l!==null?Ps(e,i,l,a,o):bn}function _a(t,e,n,r,o){let s=t.providerIndexes,i=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=o?a+l:u;for(let f=d;f<h;f++){let p=i[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(o){let f=i[c];if(f&&wn(f)&&f.type===n)return c}return null}function Ps(t,e,n,r,o){let s=t[n],i=e.data;if(s instanceof Pr){let a=s;a.resolving&&Ap(sD(i[n]));let c=Hh(a.canSeeViewProviders);a.resolving=!0;let u,l=a.injectImpl?jt(a.injectImpl):null,d=um(t,r,ue.Default);try{s=t[n]=a.factory(void 0,o,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&cT(n,i[n],e)}finally{l!==null&&jt(l),Hh(c),a.resolving=!1,hm()}}return s}function xT(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ms)?t[Ms]:void 0;return typeof e=="number"?e>=0?e&vm:bT:e}function $h(t,e,n){let r=1<<t;return!!(n[e+(t>>xm)]&r)}function Wh(t,e){return!(t&ue.Self)&&!(t&ue.Host&&e)}var Ar=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Tm(this._tNode,this._lView,e,Xa(r),n)}};function bT(){return new Ar(Dt(),ge())}function GP(t){return zs(()=>{let e=t.prototype.constructor,n=e[ba]||hl(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let s=o[ba]||hl(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function hl(t){return Tp(t)?()=>{let e=hl(ft(t));return e&&e()}:vo(t)}function wT(t,e,n,r,o){let s=t,i=e;for(;s!==null&&i!==null&&i[te]&2048&&!Aa(i);){let a=Sm(s,i,n,r|ue.Self,bn);if(a!==bn)return a;let c=s.parent;if(!c){let u=i[Wp];if(u){let l=u.get(n,bn,r);if(l!==bn)return l}c=Cm(i),i=i[Co]}s=c}return o}function Cm(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[tn]:null}function DT(t){return _T(Dt(),t)}function zh(t,e=null,n=null,r){let o=Em(t,e,n,r);return o.resolveInjectorInitializers(),o}function Em(t,e=null,n=null,r,o=new Set){let s=[n||Bt,DD(t)];return r=r||(typeof t=="object"?void 0:wt(t)),new Os(s,e||Ka(),r||null,o)}var qn=class t{static THROW_IF_NOT_FOUND=Ir;static NULL=new Ca;static create(e,n){if(Array.isArray(e))return zh({name:""},n,e,"");{let r=e.name??"";return zh({name:r},e.parent,e.providers,r)}}static \u0275prov=Z({token:t,providedIn:"any",factory:()=>Qe(Rp)});static __NG_ELEMENT_ID__=-1};var TT=new ye("");TT.__NG_ELEMENT_ID__=t=>{let e=Dt();if(e===null)throw new he(204,!1);if(e.type&2)return e.value;if(t&ue.Optional)return null;throw new he(204,!1)};var Im=!1,nn=(()=>{class t{static __NG_ELEMENT_ID__=ST;static __NG_ENV_ID__=n=>n}return t})(),Ra=class extends nn{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Io(n)?(e(),()=>{}):(nm(n,e),()=>UD(n,e))}};function ST(){return new Ra(ge())}var Lr=class{},vd=new ye("",{providedIn:"root",factory:()=>!1});var Am=new ye(""),Nm=new ye(""),nc=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new wr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}return t})();var pl=class extends Vt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,$p()&&(this.destroyRef=Y(nn,{optional:!0})??void 0,this.pendingTasks=Y(nc,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let o=e,s=n||(()=>null),i=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),s=c.error?.bind(c),i=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),i&&(i=this.wrapInTimeout(i)));let a=super.subscribe({next:o,error:s,complete:i});return e instanceof Fe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},tr=pl;function Ls(...t){}function Mm(t){let e,n;function r(){t=Ls;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Gh(t){return queueMicrotask(()=>t()),()=>{t=Ls}}var xd="isAngularZone",Fa=xd+"_ID",CT=0,It=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new tr(!1);onMicrotaskEmpty=new tr(!1);onStable=new tr(!1);onError=new tr(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:s=Im}=e;if(typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!o&&r,i.shouldCoalesceRunChangeDetection=o,i.callbackScheduled=!1,i.scheduleInRootZone=s,AT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xd)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new he(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+o,e,ET,Ls,Ls);try{return s.runTask(i,n,r)}finally{s.cancelTask(i)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ET={};function bd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function IT(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Mm(()=>{t.callbackScheduled=!1,ml(t),t.isCheckStableRunning=!0,bd(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),ml(t)}function AT(t){let e=()=>{IT(t)},n=CT++;t._inner=t._inner.fork({name:"angular",properties:{[xd]:!0,[Fa]:n,[Fa+n]:!0},onInvokeTask:(r,o,s,i,a,c)=>{if(NT(c))return r.invokeTask(s,i,a,c);try{return Yh(t),r.invokeTask(s,i,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Zh(t)}},onInvoke:(r,o,s,i,a,c,u)=>{try{return Yh(t),r.invoke(s,i,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!MT(c)&&e(),Zh(t)}},onHasTask:(r,o,s,i)=>{r.hasTask(s,i),o===s&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,ml(t),bd(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(r,o,s,i)=>(r.handleError(s,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function ml(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Yh(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Zh(t){t._nesting--,bd(t)}var gl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new tr;onMicrotaskEmpty=new tr;onStable=new tr;onError=new tr;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function NT(t){return Om(t,"__ignore_ng_zone__")}function MT(t){return Om(t,"__scheduler_tick__")}function Om(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ir=class{_console=console;handleError(e){this._console.error("ERROR",e)}},OT=new ye("",{providedIn:"root",factory:()=>{let t=Y(It),e=Y(ir);return n=>t.runOutsideAngular(()=>e.handleError(n))}}),yl=class{destroyed=!1;listeners=null;errorHandler=Y(ir,{optional:!0});destroyRef=Y(nn);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new he(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(nd(953,!1));return}if(this.listeners===null)return;let n=oe(null);try{for(let r of this.listeners)try{r(e)}catch(o){this.errorHandler?.handleError(o)}}finally{oe(n)}}};function YP(t){return new yl}function Qh(t,e){return bp(t,e)}function kT(t){return bp(xp,t)}var ZP=(Qh.required=kT,Qh);function RT(){return No(Dt(),ge())}function No(t,e){return new Br(Sn(t,e))}var Br=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=RT}return t})();function FT(t){return t instanceof Br?t.nativeElement:t}function z(t,e){let n=xu(t,e?.equal),r=n[Qt];return n.set=o=>bs(r,o),n.update=o=>bu(r,o),n.asReadonly=PT.bind(n),n}function PT(){let t=this[Qt];if(t.readonlyFn===void 0){let e=()=>this();e[Qt]=t,t.readonlyFn=e}return t.readonlyFn}function LT(){return this._results[Symbol.iterator]()}var _l=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Vt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=yD(e);(this._changesDetected=!gD(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=LT};function km(t){return(t.flags&128)===128}var Rm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Rm||{}),Fm=new Map,VT=0;function jT(){return VT++}function BT(t){Fm.set(t[ec],t)}function vl(t){Fm.delete(t[ec])}var Xh="__ngContext__";function Qs(t,e){rr(e)?(t[Xh]=e[ec],BT(e)):t[Xh]=e}function Pm(t){return Vm(t[Rs])}function Lm(t){return Vm(t[Jt])}function Vm(t){for(;t!==null&&!Hn(t);)t=t[Jt];return t}var xl;function QP(t){xl=t}function qT(){if(xl!==void 0)return xl;if(typeof document<"u")return document;throw new he(210,!1)}var XP=new ye("",{providedIn:"root",factory:()=>UT}),UT="ng",HT=new ye(""),$T=new ye("",{providedIn:"platform",factory:()=>"unknown"});var KP=new ye(""),JP=new ye("",{providedIn:"root",factory:()=>qT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var WT="h",zT="b";var jm=!1,GT=new ye("",{providedIn:"root",factory:()=>jm});var wd=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(wd||{}),rc=new ye(""),Kh=new Set;function Mo(t){Kh.has(t)||(Kh.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Dd=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=YT}return t})();function YT(){return new Dd(ge(),Dt())}var mo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(mo||{}),Bm=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}return t})(),ZT=[mo.EarlyRead,mo.Write,mo.MixedReadWrite,mo.Read],QT=(()=>{class t{ngZone=Y(It);scheduler=Y(Lr);errorHandler=Y(ir,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Y(rc,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Te(16),this.executing=!0;for(let r of ZT)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=o.hooks[r];return s(o.pipelinedValue)},o.snapshot))}catch(s){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Te(17)}register(n){let{view:r}=n;r!==void 0?((r[yo]??=[]).push(n),Ao(r),r[te]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(wd.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}return t})(),bl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,s,i=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=i,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[yo];e&&(this.view[yo]=e.filter(n=>n!==this))}};function XT(t,e){!e?.injector&&Ja(XT);let n=e?.injector??Y(qn);return Mo("NgAfterNextRender"),JT(t,n,e,!0)}function KT(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function JT(t,e,n,r){let o=e.get(Bm);o.impl??=e.get(QT);let s=e.get(rc,null,{optional:!0}),i=n?.phase??mo.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(nn):null,c=e.get(Dd,null,{optional:!0}),u=new bl(o.impl,KT(t,i),c?.view,r,a,s?.snapshot(null));return o.impl.register(u),u}var eS=(t,e,n,r)=>{};function tS(t,e,n,r){eS(t,e,n,r)}var nS=()=>null;function qm(t,e,n=!1){return nS(t,e,n)}function Um(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let o=0;o<n.length;o+=2){let s=n[o],i=n[o+1];if(i!==-1){let a=t.data[i];fd(s),a.contentQueries(2,e[i],i)}}}finally{oe(r)}}}function wl(t,e,n){fd(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function Hm(t,e,n){if(Gp(e)){let r=oe(null);try{let o=e.directiveStart,s=e.directiveEnd;for(let i=o;i<s;i++){let a=t.data[i];if(a.contentQueries){let c=n[i];a.contentQueries(1,c,i)}}}finally{oe(r)}}}var Vs=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vs||{});var ha;function rS(){if(ha===void 0&&(ha=null,Mh.trustedTypes))try{ha=Mh.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ha}function Jh(t){return rS()?.createScriptURL(t)||t}var Pa=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vp})`}};function oc(t){return t instanceof Pa?t.changingThisBreaksApplicationSecurity:t}function $m(t,e){let n=oS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${vp})`)}return n===e}function oS(t){return t instanceof Pa&&t.getTypeName()||null}var sS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function iS(t){return t=String(t),t.match(sS)?t:"unsafe:"+t}var Td=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Td||{});function aS(t){let e=Wm();return e?e.sanitize(Td.URL,t)||"":$m(t,"URL")?oc(t):iS(xn(t))}function cS(t){let e=Wm();if(e)return Jh(e.sanitize(Td.RESOURCE_URL,t)||"");if($m(t,"ResourceURL"))return Jh(oc(t));throw new he(904,!1)}function uS(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?cS:aS}function eL(t,e,n){return uS(e,n)(t)}function Wm(){let t=ge();return t&&t[jn].sanitizer}function tL(t){return t.ownerDocument}function zm(t){return t instanceof Function?t():t}function lS(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let s=e.length;if(o+s===r||t.charCodeAt(o+s)<=32)return o}n=o+1}}var Gm="ng-template";function dS(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&lS(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Sd(t))return!1;if(o=e.indexOf(1,o),o>-1){let s;for(;++o<e.length&&typeof(s=e[o])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Sd(t){return t.type===4&&t.value!==Gm}function fS(t,e,n){let r=t.type===4&&!n?Gm:t.value;return e===r}function hS(t,e,n){let r=4,o=t.attrs,s=o!==null?gS(o):0,i=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!i&&!Kt(r)&&!Kt(c))return!1;if(i&&Kt(c))continue;i=!1,r=c|r&1;continue}if(!i)if(r&4){if(r=2|r&1,c!==""&&!fS(t,c,n)||c===""&&e.length===1){if(Kt(r))return!1;i=!0}}else if(r&8){if(o===null||!dS(t,o,c,n)){if(Kt(r))return!1;i=!0}}else{let u=e[++a],l=pS(c,o,Sd(t),n);if(l===-1){if(Kt(r))return!1;i=!0;continue}if(u!==""){let d;if(l>s?d="":d=o[l+1].toLowerCase(),r&2&&u!==d){if(Kt(r))return!1;i=!0}}}}return Kt(r)||i}function Kt(t){return(t&1)===0}function pS(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let s=!1;for(;o<e.length;){let i=e[o];if(i===t)return o;if(i===3||i===6)s=!0;else if(i===1||i===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(i===4)break;if(i===0){o+=4;continue}}o+=s?1:2}return-1}else return yS(e,t)}function mS(t,e,n=!1){for(let r=0;r<e.length;r++)if(hS(t,e[r],n))return!0;return!1}function gS(t){for(let e=0;e<t.length;e++){let n=t[e];if(ym(n))return e}return t.length}function yS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ep(t,e){return t?":not("+e.trim()+")":e}function _S(t){let e=t[0],n=1,r=2,o="",s=!1;for(;n<t.length;){let i=t[n];if(typeof i=="string")if(r&2){let a=t[++n];o+="["+i+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+i:r&4&&(o+=" "+i);else o!==""&&!Kt(i)&&(e+=ep(s,o),o=""),r=i,s=s||!Kt(r);n++}return o!==""&&(e+=ep(s,o)),e}function vS(t){return t.map(_S).join(",")}function xS(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")o===2?s!==""&&e.push(s,t[++r]):o===8&&n.push(s);else{if(!Kt(o))break;o=s}r++}return n.length&&e.push(1,...n),e}var At={};function bS(t,e){return t.createText(e)}function wS(t,e,n){t.setValue(e,n)}function Ym(t,e,n){return t.createElement(e,n)}function La(t,e,n,r,o){t.insertBefore(e,n,r,o)}function Zm(t,e,n){t.appendChild(e,n)}function tp(t,e,n,r,o){r!==null?La(t,e,n,r,o):Zm(t,e,n)}function DS(t,e,n){t.removeChild(null,e,n)}function TS(t,e,n){t.setAttribute(e,"style",n)}function SS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qm(t,e,n){let{mergedAttrs:r,classes:o,styles:s}=n;r!==null&&fT(t,e,r),o!==null&&SS(t,e,o),s!==null&&TS(t,e,s)}function Cd(t,e,n,r,o,s,i,a,c,u,l){let d=Ut+r,h=d+o,f=CS(d,h),p=typeof u=="function"?u():u;return f[se]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof i=="function"?i():i,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function CS(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:At);return n}function ES(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ed(t,e,n,r,o,s,i,a,c,u,l){let d=e.blueprint.slice();return d[Un]=o,d[te]=r|4|128|8|64|1024,(u!==null||t&&t[te]&2048)&&(d[te]|=2048),em(d),d[it]=d[Co]=t,d[Ze]=n,d[jn]=i||t&&t[jn],d[Ke]=a||t&&t[Ke],d[bo]=c||t&&t[bo]||null,d[tn]=s,d[ec]=jT(),d[ks]=l,d[Wp]=u,d[en]=e.type==2?t[en]:d,d}function IS(t,e,n){let r=Sn(e,t),o=ES(n),s=t[jn].rendererFactory,i=Id(t,Ed(t,o,null,Xm(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=i}function Xm(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Km(t,e,n,r){if(n===0)return-1;let o=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Id(t,e){return t[Rs]?t[jh][Jt]=e:t[Rs]=e,t[jh]=e,e}function nL(t=1){Jm(at(),ge(),$n()+t,!1)}function Jm(t,e,n,r){if(!r)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ga(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ya(e,s,0,n)}Fr(n)}var sc=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(sc||{});function Dl(t,e,n,r){let o=oe(null);try{let[s,i,a]=t.inputs[n],c=null;(i&sc.SignalBased)!==0&&(c=e[s][Qt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,s):Yp(e,c,s,r)}finally{oe(o)}}function eg(t,e,n,r,o){let s=$n(),i=r&2;try{Fr(-1),i&&e.length>Ut&&Jm(t,e,Ut,!1),Te(i?2:0,o),n(r,o)}finally{Fr(s),Te(i?3:1,o)}}function Ad(t,e,n){RS(t,e,n),(n.flags&64)===64&&FS(t,e,n)}function tg(t,e,n=Sn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let s=0;s<r.length;s+=2){let i=r[s+1],a=i===-1?n(e,t):t[i];t[o++]=a}}}function AS(t,e,n,r){let s=r.get(GT,jm)||n===Vs.ShadowDom,i=t.selectRootElement(e,s);return NS(i),i}function NS(t){MS(t)}var MS=()=>null;function OS(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function ng(t,e,n,r,o,s,i,a){if(!a&&Nd(e,t,n,r,o)){Eo(e)&&kS(n,e.index);return}if(e.type&3){let c=Sn(e,n);r=OS(r),o=i!=null?i(o,e.value||"",r):o,s.setProperty(c,r,o)}else e.type&12}function kS(t,e){let n=Tn(e,t);n[te]&16||(n[te]|=64)}function RS(t,e,n){let r=n.directiveStart,o=n.directiveEnd;Eo(n)&&IS(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ka(n,e);let s=n.initialInputs;for(let i=r;i<o;i++){let a=t.data[i],c=Ps(e,t,i,n);if(Qs(c,e),s!==null&&jS(e,i-r,c,a,n,s),wn(a)){let u=Tn(n.index,e);u[Ze]=Ps(e,t,i,n)}}}function FS(t,e,n){let r=n.directiveStart,o=n.directiveEnd,s=n.index,i=nT();try{Fr(s);for(let a=r;a<o;a++){let c=t.data[a],u=e[a];ll(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&PS(c,u)}}finally{Fr(-1),ll(i)}}function PS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rg(t,e){let n=t.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];mS(e,s.selectors,!1)&&(r??=[],wn(s)?r.unshift(s):r.push(s))}return r}function LS(t,e,n,r,o,s){let i=Sn(t,e);VS(e[Ke],i,s,t.value,n,r,o)}function VS(t,e,n,r,o,s,i){if(s==null)t.removeAttribute(e,o,n);else{let a=i==null?xn(s):i(s,r||"",o);t.setAttribute(e,o,a,n)}}function jS(t,e,n,r,o,s){let i=s[e];if(i!==null)for(let a=0;a<i.length;a+=2){let c=i[a],u=i[a+1];Dl(r,n,c,u)}}function BS(t,e){let n=t[bo],r=n?n.get(ir,null):null;r&&r.handleError(e)}function Nd(t,e,n,r,o){let s=t.inputs?.[r],i=t.hostDirectiveInputs?.[r],a=!1;if(i)for(let c=0;c<i.length;c+=2){let u=i[c],l=i[c+1],d=e.data[u];Dl(d,n[u],l,o),a=!0}if(s)for(let c of s){let u=n[c],l=e.data[c];Dl(l,u,r,o),a=!0}return a}function qS(t,e){let n=Tn(e,t),r=n[se];US(r,n);let o=n[Un];o!==null&&n[ks]===null&&(n[ks]=qm(o,n[bo])),Te(18),Md(r,n,n[Ze]),Te(19,n[Ze])}function US(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Md(t,e,n){hd(e);try{let r=t.viewQuery;r!==null&&wl(1,r,n);let o=t.template;o!==null&&eg(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bn]?.finishViewCreation(t),t.staticContentQueries&&Um(t,e),t.staticViewQueries&&wl(2,t.viewQuery,n);let s=t.components;s!==null&&HS(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,pd()}}function HS(t,e){for(let n=0;n<e.length;n++)qS(t,e[n])}function ic(t,e,n,r){let o=oe(null);try{let s=e.tView,a=t[te]&4096?4096:16,c=Ed(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Mr]=u;let l=t[Bn];return l!==null&&(c[Bn]=l.createEmbeddedView(s)),Md(s,c,n),c}finally{oe(o)}}function js(t,e){return!e||e.firstChild===null||km(t)}var $S;function Od(t,e){return $S(t,e)}var Tl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tl||{});function og(t){return(t.flags&32)===32}function go(t,e,n,r,o){if(r!=null){let s,i=!1;Hn(r)?s=r:rr(r)&&(i=!0,r=r[Un]);let a=Dn(r);t===0&&n!==null?o==null?Zm(e,n,a):La(e,n,a,o||null,!0):t===1&&n!==null?La(e,n,a,o||null,!0):t===2?DS(e,a,i):t===3&&e.destroyNode(a),s!=null&&nC(e,t,s,n,o)}}function WS(t,e){sg(t,e),e[Un]=null,e[tn]=null}function zS(t,e,n,r,o,s){r[Un]=o,r[tn]=e,cc(t,r,n,1,o,s)}function sg(t,e){e[jn].changeDetectionScheduler?.notify(9),cc(t,e,e[Ke],2,null,null)}function GS(t){let e=t[Rs];if(!e)return zu(t[se],t);for(;e;){let n=null;if(rr(e))n=e[Rs];else{let r=e[st];r&&(n=r)}if(!n){for(;e&&!e[Jt]&&e!==t;)rr(e)&&zu(e[se],e),e=e[it];e===null&&(e=t),rr(e)&&zu(e[se],e),n=e&&e[Jt]}e=n}}function kd(t,e){let n=t[wo],r=n.indexOf(e);n.splice(r,1)}function ac(t,e){if(Io(e))return;let n=e[Ke];n.destroyNode&&cc(t,e,n,3,null,null),GS(e)}function zu(t,e){if(Io(e))return;let n=oe(null);try{e[te]&=-129,e[te]|=256,e[qt]&&xs(e[qt]),ZS(t,e),YS(t,e),e[se].type===1&&e[Ke].destroy();let r=e[Mr];if(r!==null&&Hn(e[it])){r!==e[it]&&kd(r,e);let o=e[Bn];o!==null&&o.detachView(t)}vl(e)}finally{oe(n)}}function YS(t,e){let n=t.cleanup,r=e[Ea];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let a=n[i+3];a>=0?r[a]():r[-a].unsubscribe(),i+=2}else{let a=r[n[i+1]];n[i].call(a)}r!==null&&(e[Ea]=null);let o=e[nr];if(o!==null){e[nr]=null;for(let i=0;i<o.length;i++){let a=o[i];a()}}let s=e[Or];if(s!==null){e[Or]=null;for(let i of s)i.destroy()}}function ZS(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof Pr)){let s=n[r+1];if(Array.isArray(s))for(let i=0;i<s.length;i+=2){let a=o[s[i]],c=s[i+1];Te(4,a,c);try{c.call(a)}finally{Te(5,a,c)}}else{Te(4,o,s);try{s.call(o)}finally{Te(5,o,s)}}}}}function QS(t,e,n){return XS(t,e.parent,n)}function XS(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Un];if(Eo(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===Vs.None||o===Vs.Emulated)return null}return Sn(r,n)}function KS(t,e,n){return eC(t,e,n)}function JS(t,e,n){return t.type&40?Sn(t,n):null}var eC=JS,np;function Rd(t,e,n,r){let o=QS(t,r,e),s=e[Ke],i=r.parent||e[tn],a=KS(i,r,e);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)tp(s,o,n[c],a,!1);else tp(s,o,n,a,!1);np!==void 0&&np(s,r,e,n,o)}function Ns(t,e){if(e!==null){let n=e.type;if(n&3)return Sn(e,t);if(n&4)return Sl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ns(t,r);{let o=t[e.index];return Hn(o)?Sl(-1,o):Dn(o)}}else{if(n&128)return Ns(t,e.next);if(n&32)return Od(e,t)()||Dn(t[e.index]);{let r=ig(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Rr(t[en]);return Ns(o,r)}else return Ns(t,e.next)}}}return null}function ig(t,e){if(e!==null){let r=t[en][tn],o=e.projection;return r.projection[o]}return null}function Sl(t,e){let n=st+t+1;if(n<e.length){let r=e[n],o=r[se].firstChild;if(o!==null)return Ns(r,o)}return e[kr]}function Fd(t,e,n,r,o,s,i){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(i&&e===0&&(a&&Qs(Dn(a),r),n.flags|=2),!og(n))if(c&8)Fd(t,e,n.child,r,o,s,!1),go(e,t,o,a,s);else if(c&32){let u=Od(n,r),l;for(;l=u();)go(e,t,o,l,s);go(e,t,o,a,s)}else c&16?tC(t,e,r,n,o,s):go(e,t,o,a,s);n=i?n.projectionNext:n.next}}function cc(t,e,n,r,o,s){Fd(n,r,t.firstChild,e,o,s,!1)}function tC(t,e,n,r,o,s){let i=n[en],c=i[tn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];go(e,t,o,l,s)}else{let u=c,l=i[it];km(r)&&(u.flags|=128),Fd(t,e,u,l,o,s,!0)}}function nC(t,e,n,r,o){let s=n[kr],i=Dn(n);s!==i&&go(e,t,r,s,o);for(let a=st;a<n.length;a++){let c=n[a];cc(c[se],c,t,e,r,s)}}function rC(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Tl.DashCase;o==null?t.removeStyle(n,r,s):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),s|=Tl.Important),t.setStyle(n,r,o,s))}}function Va(t,e,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Dn(s)),Hn(s)&&oC(s,r);let i=n.type;if(i&8)Va(t,e,n.child,r);else if(i&32){let a=Od(n,e),c;for(;c=a();)r.push(c)}else if(i&16){let a=ig(e,n);if(Array.isArray(a))r.push(...a);else{let c=Rr(e[en]);Va(c[se],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function oC(t,e){for(let n=st;n<t.length;n++){let r=t[n],o=r[se].firstChild;o!==null&&Va(r[se],r,o,e)}t[kr]!==t[Un]&&e.push(t[kr])}function ag(t){if(t[yo]!==null){for(let e of t[yo])e.impl.addSequence(e);t[yo].length=0}}var cg=[];function sC(t){return t[qt]??iC(t)}function iC(t){let e=cg.pop()??Object.create(cC);return e.lView=t,e}function aC(t){t.lView[qt]!==t&&(t.lView=null,cg.push(t))}var cC=j(b({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ao(t.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function uC(t){let e=t[qt]??Object.create(lC);return e.lView=t,e}var lC=j(b({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Rr(t.lView);for(;e&&!ug(e[se]);)e=Rr(e);e&&tm(e)},consumerOnSignalRead(){this.lView[qt]=this}});function ug(t){return t.type!==2}function lg(t){if(t[Or]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Or])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[te]&8192)}}var dC=100;function dg(t,e=!0,n=0){let o=t[jn].rendererFactory,s=!1;s||o.begin?.();try{fC(t,n)}catch(i){throw e&&BS(t,i),i}finally{s||o.end?.()}}function fC(t,e){let n=im();try{Na(!0),Cl(t,e);let r=0;for(;tc(t);){if(r===dC)throw new he(103,!1);r++,Cl(t,1)}}finally{Na(n)}}function hC(t,e,n,r){if(Io(e))return;let o=e[te],s=!1,i=!1;hd(e);let a=!0,c=null,u=null;s||(ug(t)?(u=sC(e),c=vs(u)):pu()===null?(a=!1,u=uC(e),c=vs(u)):e[qt]&&(xs(e[qt]),e[qt]=null));try{em(e),JD(t.bindingStartIndex),n!==null&&eg(t,e,n,2,r);let l=(o&3)===3;if(!s)if(l){let f=t.preOrderCheckHooks;f!==null&&ga(e,f,null)}else{let f=t.preOrderHooks;f!==null&&ya(e,f,0,null),$u(e,0)}if(i||pC(e),lg(e),fg(e,0),t.contentQueries!==null&&Um(t,e),!s)if(l){let f=t.contentCheckHooks;f!==null&&ga(e,f)}else{let f=t.contentHooks;f!==null&&ya(e,f,1),$u(e,1)}gC(t,e);let d=t.components;d!==null&&pg(e,d,0);let h=t.viewQuery;if(h!==null&&wl(2,h,r),!s)if(l){let f=t.viewCheckHooks;f!==null&&ga(e,f)}else{let f=t.viewHooks;f!==null&&ya(e,f,2),$u(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Hu]){for(let f of e[Hu])f();e[Hu]=null}s||(ag(e),e[te]&=-73)}catch(l){throw s||Ao(e),l}finally{u!==null&&(Oi(u,c),a&&aC(u)),pd()}}function fg(t,e){for(let n=Pm(t);n!==null;n=Lm(n))for(let r=st;r<n.length;r++){let o=n[r];hg(o,e)}}function pC(t){for(let e=Pm(t);e!==null;e=Lm(e)){if(!(e[te]&2))continue;let n=e[wo];for(let r=0;r<n.length;r++){let o=n[r];tm(o)}}}function mC(t,e,n){Te(18);let r=Tn(e,t);hg(r,n),Te(19,r[Ze])}function hg(t,e){cd(t)&&Cl(t,e)}function Cl(t,e){let r=t[se],o=t[te],s=t[qt],i=!!(e===0&&o&16);if(i||=!!(o&64&&e===0),i||=!!(o&1024),i||=!!(s?.dirty&&ki(s)),i||=!1,s&&(s.dirty=!1),t[te]&=-9217,i)hC(r,t,r.template,t[Ze]);else if(o&8192){lg(t),fg(t,1);let a=r.components;a!==null&&pg(t,a,1),ag(t)}}function pg(t,e,n){for(let r=0;r<e.length;r++)mC(t,e[r],n)}function gC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Fr(~o);else{let s=o,i=n[++r],a=n[++r];tT(i,s);let c=e[s];Te(24,c),a(2,c),Te(25,c)}}}finally{Fr(-1)}}function Pd(t,e){let n=im()?64:1088;for(t[jn].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=Rr(t);if(Aa(t)&&!r)return t;t=r}return null}function mg(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function gg(t,e){let n=st+e;if(n<t.length)return t[n]}function uc(t,e,n,r=!0){let o=e[se];if(yC(o,e,t,n),r){let i=Sl(n,t),a=e[Ke],c=a.parentNode(t[kr]);c!==null&&zS(o,t[tn],a,e,c,i)}let s=e[ks];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function yg(t,e){let n=Bs(t,e);return n!==void 0&&ac(n[se],n),n}function Bs(t,e){if(t.length<=st)return;let n=st+e,r=t[n];if(r){let o=r[Mr];o!==null&&o!==t&&kd(o,r),e>0&&(t[n-1][Jt]=r[Jt]);let s=Ta(t,st+e);WS(r[se],r);let i=s[Bn];i!==null&&i.detachView(s[se]),r[it]=null,r[Jt]=null,r[te]&=-129}return r}function yC(t,e,n,r){let o=st+r,s=n.length;r>0&&(n[o-1][Jt]=e),r<s-st?(e[Jt]=n[o],kp(n,st+r,e)):(n.push(e),e[Jt]=null),e[it]=n;let i=e[Mr];i!==null&&n!==i&&_g(i,e);let a=e[Bn];a!==null&&a.insertView(t),cl(e),e[te]|=128}function _g(t,e){let n=t[wo],r=e[it];if(rr(r))t[te]|=2;else{let o=r[it][en];e[en]!==o&&(t[te]|=2)}n===null?t[wo]=[e]:n.push(e)}var qs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[se];return Va(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ze]}set context(e){this._lView[Ze]=e}get destroyed(){return Io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(Hn(e)){let n=e[Ia],r=n?n.indexOf(this):-1;r>-1&&(Bs(e,r),Ta(n,r))}this._attachedToViewContainer=!1}ac(this._lView[se],this._lView)}onDestroy(e){nm(this._lView,e)}markForCheck(){Pd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){cl(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,dg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Aa(this._lView),n=this._lView[Mr];n!==null&&!e&&kd(n,this._lView),sg(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=e;let n=Aa(this._lView),r=this._lView[Mr];r!==null&&!n&&_g(r,this._lView),cl(this._lView)}};var To=(()=>{class t{static __NG_ELEMENT_ID__=xC}return t})(),_C=To,vC=class extends _C{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let o=ic(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new qs(o)}};function xC(){return Ld(Dt(),ge())}function Ld(t,e){return t.type&4?new vC(e,t,No(t,e)):null}function Vd(t,e,n,r,o){let s=t.data[e];if(s===null)s=bC(t,e,n,r,o),eT()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=o;let i=QD();s.injectorIndex=i===null?-1:i.injectorIndex}return Ys(s,!0),s}function bC(t,e,n,r,o){let s=om(),i=sm(),a=i?s:s&&s.parent,c=t.data[e]=DC(t,a,n,e,r,o);return wC(t,c,s,i),c}function wC(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function DC(t,e,n,r,o,s){let i=e?e.injectorIndex:-1,a=0;return GD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:i,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var sL=new RegExp(`^(\\d+)*(${zT}|${WT})*(.*)`);var TC=()=>null;function Us(t,e){return TC(t,e)}var SC=class{},vg=class{},El=class{resolveComponentFactory(e){throw Error(`No component factory found for ${wt(e)}.`)}},lc=class{static NULL=new El},ja=class{},jd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>CC()}return t})();function CC(){let t=ge(),e=Dt(),n=Tn(e.index,t);return(rr(n)?n:t)[Ke]}var EC=(()=>{class t{static \u0275prov=Z({token:t,providedIn:"root",factory:()=>null})}return t})();var Gu={},Il=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Xa(r);let o=this.injector.get(e,Gu,r);return o!==Gu||n===Gu?o:this.parentInjector.get(e,n,r)}};function rp(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,s=0;if(e!==null)for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")s=a;else if(s==1)o=Oh(o,a);else if(s==2){let c=a,u=e[++i];r=Oh(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function Wn(t,e=ue.Default){let n=ge();if(n===null)return Qe(t,e);let r=Dt();return Tm(r,n,ft(t),e)}function uL(){let t="invalid";throw new Error(t)}function xg(t,e,n,r,o){let s=r===null?null:{"":-1},i=o(t,n);if(i!==null){let a,c=null,u=null,l=AC(i);l===null?a=i:[a,c,u]=l,OC(t,e,n,a,s,c,u)}s!==null&&r!==null&&IC(n,r,s)}function IC(t,e,n){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let s=n[e[o+1]];if(s==null)throw new he(-301,!1);r.push(e[o],s)}}function AC(t){let e=null,n=!1;for(let i=0;i<t.length;i++){let a=t[i];if(i===0&&wn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,o=null,s=null;for(let i of t)i.findHostDirectiveDefs!==null&&(r??=[],o??=new Map,s??=new Map,NC(i,r,s,o)),i===e&&(r??=[],r.push(i));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,o,s]):null}function NC(t,e,n,r){let o=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[o,e.length-1])}function MC(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function OC(t,e,n,r,o,s,i){let a=r.length,c=!1;for(let h=0;h<a;h++){let f=r[h];!c&&wn(f)&&(c=!0,MC(t,n,h)),fl(ka(n,e),t,f.type)}VC(n,t.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let u=!1,l=!1,d=Km(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=Fs(n.mergedAttrs,f.hostAttrs),RC(t,n,e,d,f),LC(d,f,o),i!==null&&i.has(f)){let[m,g]=i.get(f);n.directiveToIndex.set(f.type,[d,m+n.directiveStart,g+n.directiveStart])}else(s===null||!s.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}kC(t,n,s)}function kC(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=t.data[r];if(n===null||!n.has(o))op(0,e,o,r),op(1,e,o,r),ip(e,r,!1);else{let s=n.get(o);sp(0,e,s,r),sp(1,e,s,r),ip(e,r,!0)}}}function op(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let i;t===0?i=e.inputs??={}:i=e.outputs??={},i[s]??=[],i[s].push(r),bg(e,s)}}function sp(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let i=o[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[i]??=[],a[i].push(r,s),bg(e,i)}}function bg(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function ip(t,e,n){let{attrs:r,inputs:o,hostDirectiveInputs:s}=t;if(r===null||!n&&o===null||n&&s===null||Sd(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let i=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&o.hasOwnProperty(c)){let u=o[c];for(let l of u)if(l===e){i??=[],i.push(c,r[a+1]);break}}else if(n&&s.hasOwnProperty(c)){let u=s[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){i??=[],i.push(u[l+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(i)}function RC(t,e,n,r,o){t.data[r]=o;let s=o.factory||(o.factory=vo(o.type,!0)),i=new Pr(s,wn(o),Wn);t.blueprint[r]=i,n[r]=i,FC(t,e,r,Km(t,n,o.hostVars,At),o)}function FC(t,e,n,r,o){let s=o.hostBindings;if(s){let i=t.hostBindingOpCodes;i===null&&(i=t.hostBindingOpCodes=[]);let a=~e.index;PC(i)!=a&&i.push(a),i.push(n,r,s)}}function PC(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function LC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wn(e)&&(n[""]=t)}}function VC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wg(t,e,n,r,o,s,i,a){let c=e.consts,u=Do(c,i),l=Vd(e,t,2,r,u);return s&&xg(e,n,l,Do(c,a),o),l.mergedAttrs=Fs(l.mergedAttrs,l.attrs),l.attrs!==null&&rp(l,l.attrs,!1),l.mergedAttrs!==null&&rp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Dg(t,e){mm(t,e),Gp(e)&&t.queries.elementEnd(e)}var Ba=class extends lc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=or(e);return new Vr(n,this.ngModule)}};function jC(t){return Object.keys(t).map(e=>{let[n,r,o]=t[e],s={propName:n,templateName:e,isSignal:(r&sc.SignalBased)!==0};return o&&(s.transform=o),s})}function BC(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function qC(t,e,n){let r=e instanceof sr?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Il(n,r):n}function UC(t){let e=t.get(ja,null);if(e===null)throw new he(407,!1);let n=t.get(EC,null),r=t.get(Lr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function HC(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return Ym(e,n,n==="svg"?Kp:n==="math"?VD:null)}var Vr=class extends vg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=jC(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=BC(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=vS(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o){Te(22);let s=oe(null);try{let i=this.componentDef,a=r?["ng-version","19.2.14"]:xS(this.componentDef.selectors[0]),c=Cd(0,null,null,1,0,null,null,null,null,[a],null),u=qC(i,o||this.ngModule,e),l=UC(u),d=l.rendererFactory.createRenderer(null,i),h=r?AS(d,r,i.encapsulation,u):HC(i,d),f=Ed(null,c,null,512|Xm(i),null,null,l,d,u,null,qm(h,u,!0));f[Ut]=h,hd(f);let p=null;try{let m=wg(Ut,c,f,"#host",()=>[this.componentDef],!0,0);h&&(Qm(d,h,m),Qs(h,f)),Ad(c,f,m),Hm(c,m,f),Dg(c,m),n!==void 0&&$C(m,this.ngContentSelectors,n),p=Tn(m.index,f),f[Ze]=p[Ze],Md(c,f,null)}catch(m){throw p!==null&&vl(p),vl(f),m}finally{Te(23),pd()}return new Al(this.componentType,f)}finally{oe(s)}}},Al=class extends SC{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=ad(n[se],Ut),this.location=No(this._tNode,n),this.instance=Tn(this._tNode.index,n)[Ze],this.hostView=this.changeDetectorRef=new qs(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView,s=Nd(r,o[se],o,e,n);this.previousInputValues.set(e,n);let i=Tn(r.index,o);Pd(i,1)}get injector(){return new Ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $C(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let s=n[o];r.push(s!=null&&s.length?Array.from(s):null)}}var Xs=(()=>{class t{static __NG_ELEMENT_ID__=WC}return t})();function WC(){let t=Dt();return Sg(t,ge())}var zC=Xs,Tg=class extends zC{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new Ar(this._hostTNode,this._hostLView)}get parentInjector(){let e=_d(this._hostTNode,this._hostLView);if(_m(e)){let n=Oa(e,this._hostLView),r=Ma(e),o=n[se].data[r+8];return new Ar(o,n)}else return new Ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ap(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-st}createEmbeddedView(e,n,r){let o,s;typeof r=="number"?o=r:r!=null&&(o=r.index,s=r.injector);let i=Us(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,i);return this.insertImpl(a,o,js(this._hostTNode,i)),a}createComponent(e,n,r,o,s){let i=e&&!kD(e),a;if(i)a=n;else{let p=n||{};a=p.index,r=p.injector,o=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=i?e:new Vr(or(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let m=(i?u:this.parentInjector).get(sr,null);m&&(s=m)}let l=or(c.componentType??{}),d=Us(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,o,h,s);return this.insertImpl(f.hostView,a,js(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(BD(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[it],u=new Tg(c,c[tn],c[it]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),i=this._lContainer;return uc(i,o,s,r),e.attachToViewContainerRef(),kp(Yu(i),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ap(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Bs(this._lContainer,n);r&&(Ta(Yu(this._lContainer),n),ac(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Bs(this._lContainer,n);return r&&Ta(Yu(this._lContainer),n)!=null?new qs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ap(t){return t[Ia]}function Yu(t){return t[Ia]||(t[Ia]=[])}function Sg(t,e){let n,r=e[t.index];return Hn(r)?n=r:(n=mg(r,e,null,t),e[t.index]=n,Id(e,n)),YC(n,e,t,r),new Tg(n,t,e)}function GC(t,e){let n=t[Ke],r=n.createComment(""),o=Sn(e,t),s=n.parentNode(o);return La(n,s,r,n.nextSibling(o),!1),r}var YC=XC,ZC=()=>!1;function QC(t,e,n){return ZC(t,e,n)}function XC(t,e,n,r){if(t[kr])return;let o;n.type&8?o=Dn(r):o=GC(e,n),t[kr]=o}var Nl=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ml=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let s=0;s<r;s++){let i=n.getByIndex(s),a=this.queries[i.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Bd(e,n).matches!==null&&this.queries[n].setDirty()}},qa=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=sE(e):this.predicate=e}},Ol=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,o);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},kl=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let s=r[o];this.matchTNodeWithReadOption(e,n,KC(n,s)),this.matchTNodeWithReadOption(e,n,_a(n,e,s,!1,!1))}else r===To?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,_a(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Br||o===Xs||o===To&&n.type&4)this.addMatch(n.index,-2);else{let s=_a(n,e,o,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function KC(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function JC(t,e){return t.type&11?No(t,e):t.type&4?Ld(t,e):null}function eE(t,e,n,r){return n===-1?JC(e,t):n===-2?tE(t,e,r):Ps(t,t[se],n,e)}function tE(t,e,n){if(n===Br)return No(e,t);if(n===To)return Ld(e,t);if(n===Xs)return Sg(e,t)}function Cg(t,e,n,r){let o=e[Bn].queries[r];if(o.matches===null){let s=t.data,i=n.matches,a=[];for(let c=0;i!==null&&c<i.length;c+=2){let u=i[c];if(u<0)a.push(null);else{let l=s[u];a.push(eE(e,l,i[c+1],n.metadata.read))}}o.matches=a}return o.matches}function Rl(t,e,n,r){let o=t.queries.getByIndex(n),s=o.matches;if(s!==null){let i=Cg(t,e,o,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(i[a/2]);else{let u=s[a+1],l=e[-c];for(let d=st;d<l.length;d++){let h=l[d];h[Mr]===h[it]&&Rl(h[se],h,u,r)}if(l[wo]!==null){let d=l[wo];for(let h=0;h<d.length;h++){let f=d[h];Rl(f[se],f,u,r)}}}}}return r}function nE(t,e){return t[Bn].queries[e].queryList}function Eg(t,e,n){let r=new _l((n&4)===4);return HD(t,e,r,r.destroy),(e[Bn]??=new Ml).queries.push(new Nl(r))-1}function rE(t,e,n){let r=at();return r.firstCreatePass&&(Ig(r,new qa(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Eg(r,ge(),e)}function oE(t,e,n,r){let o=at();if(o.firstCreatePass){let s=Dt();Ig(o,new qa(e,n,r),s.index),iE(o,t),(n&2)===2&&(o.staticContentQueries=!0)}return Eg(o,ge(),n)}function sE(t){return t.split(",").map(e=>e.trim())}function Ig(t,e,n){t.queries===null&&(t.queries=new Ol),t.queries.track(new kl(e,n))}function iE(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Bd(t,e){return t.queries.getByIndex(e)}function aE(t,e){let n=t[se],r=Bd(n,e);return r.crossesNgTemplate?Rl(n,t,e,[]):Cg(n,t,r,e)}var Hs=class{},cE=class{};var Fl=class extends Hs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ba(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;let s=Pp(e);this._bootstrapComponents=zm(s.bootstrap),this._r3Injector=Em(e,n,[{provide:Hs,useValue:this},{provide:lc,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pl=class extends cE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Fl(this.moduleType,e,[])}};var Ua=class extends Hs{injector;componentFactoryResolver=new Ba(this);instance=null;constructor(e){super();let n=new Os([...e.providers,{provide:Hs,useValue:this},{provide:lc,useValue:this.componentFactoryResolver}],e.parent||Ka(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uE(t,e,n=null){return new Ua({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var lE=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Vp(!1,n.type),o=r.length>0?uE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:t,providedIn:"environment",factory:()=>new t(Qe(sr))})}return t})();function hL(t){return zs(()=>{let e=Ng(t),n=j(b({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Rm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(lE).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vs.Emulated,styles:t.styles||Bt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Mo("NgStandalone"),Mg(n);let r=t.dependencies;return n.directiveDefs=cp(r,!1),n.pipeDefs=cp(r,!0),n.id=mE(n),n})}function dE(t){return or(t)||bD(t)}function fE(t){return t!==null}function Ag(t){return zs(()=>({type:t.type,bootstrap:t.bootstrap||Bt,declarations:t.declarations||Bt,imports:t.imports||Bt,exports:t.exports||Bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function hE(t,e){if(t==null)return Nr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],s,i,a,c;Array.isArray(o)?(a=o[0],s=o[1],i=o[2]??s,c=o[3]||null):(s=o,i=o,a=sc.None,c=null),n[s]=[r,a,c],e[s]=i}return n}function pE(t){if(t==null)return Nr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function qd(t){return zs(()=>{let e=Ng(t);return Mg(e),e})}function Ng(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Nr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Bt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hE(t.inputs,e),outputs:pE(t.outputs),debugInfo:null}}function Mg(t){t.features?.forEach(e=>e(t))}function cp(t,e){if(!t)return null;let n=e?wD:dE;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(fE)}function mE(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gE(t){return Object.getPrototypeOf(t.prototype).constructor}function yE(t){let e=gE(t.type),n=!0,r=[t];for(;e;){let o;if(wn(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new he(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);let i=t;i.inputs=Zu(t.inputs),i.declaredInputs=Zu(t.declaredInputs),i.outputs=Zu(t.outputs);let a=o.hostBindings;a&&wE(t,a);let c=o.viewQuery,u=o.contentQueries;if(c&&xE(t,c),u&&bE(t,u),_E(t,o),Xw(t.outputs,o.outputs),wn(o)&&o.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let s=o.features;if(s)for(let i=0;i<s.length;i++){let a=s[i];a&&a.ngInherit&&a(t),a===yE&&(n=!1)}}e=Object.getPrototypeOf(e)}vE(r)}function _E(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function vE(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Fs(o.hostAttrs,n=Fs(n,o.hostAttrs))}}function Zu(t){return t===Nr?{}:t===Bt?[]:t}function xE(t,e){let n=t.viewQuery;n?t.viewQuery=(r,o)=>{e(r,o),n(r,o)}:t.viewQuery=e}function bE(t,e){let n=t.contentQueries;n?t.contentQueries=(r,o,s)=>{e(r,o,s),n(r,o,s)}:t.contentQueries=e}function wE(t,e){let n=t.hostBindings;n?t.hostBindings=(r,o)=>{e(r,o),n(r,o)}:t.hostBindings=e}function Og(t){return TE(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function DE(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function TE(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function SE(t,e,n){return t[e]=n}function ar(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ha(t,e,n,r){let o=ar(t,e,n);return ar(t,e+1,r)||o}function CE(t,e,n,r,o,s){let i=Ha(t,e,n,r);return Ha(t,e+2,o,s)||i}function EE(t,e,n,r,o,s,i,a,c){let u=e.consts,l=Vd(e,t,4,i||null,a||null);rm()&&xg(e,n,l,Do(u,c),rg),l.mergedAttrs=Fs(l.mergedAttrs,l.attrs),mm(e,l);let d=l.tView=Cd(2,l,r,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Ll(t,e,n,r,o,s,i,a,c,u){let l=n+Ut,d=e.firstCreatePass?EE(l,e,t,r,o,s,i,a,c):e.data[l];Ys(d,!1);let h=AE(e,t,d,n);gd()&&Rd(e,t,h,d),Qs(h,t);let f=mg(h,t,h,d);return t[l]=f,Id(t,f),QC(f,d,t),id(d)&&Ad(e,t,d),c!=null&&tg(t,d,u),d}function IE(t,e,n,r,o,s,i,a){let c=ge(),u=at(),l=Do(u.consts,s);return Ll(c,u,t,e,n,r,o,l,i,a),IE}var AE=NE;function NE(t,e,n,r){return yd(!0),e[Ke].createComment("")}var pL=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var ME=new ye("");var kg=(()=>{class t{static \u0275prov=Z({token:t,providedIn:"root",factory:()=>new Vl})}return t})(),Vl=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Rg(t){return!!t&&typeof t.then=="function"}function OE(t){return!!t&&typeof t.subscribe=="function"}var Fg=new ye("");function mL(t){return Lp([{provide:Fg,multi:!0,useValue:t}])}var Pg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=Y(Fg,{optional:!0})??[];injector=Y(qn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let s=Hp(this.injector,o);if(Rg(s))n.push(s);else if(OE(s)){let i=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(i)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kE=new ye("");function RE(){vu(()=>{throw new he(600,!1)})}function FE(t){return t.isBoundToModule}var PE=10;var $s=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Y(OT);afterRenderManager=Y(Bm);zonelessEnabled=Y(vd);rootEffectScheduler=Y(kg);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Vt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Y(nc).hasPendingTasks.pipe(Cr(n=>!n));constructor(){Y(rc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=Y(sr);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=qn.NULL){Te(10);let s=n instanceof vg;if(!this._injector.get(Pg).done){let f="";throw new he(405,f)}let a;s?a=n:a=this._injector.get(lc).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=FE(a)?void 0:this._injector.get(Hs),u=r||a.selector,l=a.create(o,[],u,c),d=l.location.nativeElement,h=l.injector.get(ME,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),va(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),Te(11,l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(wd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new he(101,!1);let n=oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(n),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ja,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<PE;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:o}of this.allViews)LE(r,o,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>tc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;va(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(kE,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>va(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new he(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function va(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LE(t,e,n,r){if(!n&&!tc(t))return;dg(t,e,n&&!r?0:1)}function VE(t,e,n,r){let o=ge(),s=Zs();if(ar(o,s,e)){let i=at(),a=md();LS(a,o,t,e,n,r)}return VE}function Lg(t,e,n,r){return ar(t,Zs(),n)?e+xn(n)+r:At}function jE(t,e,n,r,o,s){let i=am(),a=Ha(t,i,n,o);return dd(2),a?e+xn(n)+r+xn(o)+s:At}function BE(t,e,n,r,o,s,i,a,c,u){let l=am(),d=CE(t,l,n,o,i,c);return dd(4),d?e+xn(n)+r+xn(o)+s+xn(i)+a+xn(c)+u:At}function pa(t,e){return t<<17|e<<2}function jr(t){return t>>17&32767}function qE(t){return(t&2)==2}function UE(t,e){return t&131071|e<<17}function jl(t){return t|2}function So(t){return(t&131068)>>2}function Qu(t,e){return t&-131069|e<<2}function HE(t){return(t&1)===1}function Bl(t){return t|1}function $E(t,e,n,r,o,s){let i=s?e.classBindings:e.styleBindings,a=jr(i),c=So(i);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Gs(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=jr(t[a+1]);t[r+1]=pa(h,a),h!==0&&(t[h+1]=Qu(t[h+1],r)),t[a+1]=UE(t[a+1],r)}else t[r+1]=pa(a,0),a!==0&&(t[a+1]=Qu(t[a+1],r)),a=r;else t[r+1]=pa(c,0),a===0?a=r:t[c+1]=Qu(t[c+1],r),c=r;u&&(t[r+1]=jl(t[r+1])),up(t,l,r,!0),up(t,l,r,!1),WE(e,l,t,r,s),i=pa(a,c),s?e.classBindings=i:e.styleBindings=i}function WE(t,e,n,r,o){let s=o?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Gs(s,e)>=0&&(n[r+1]=Bl(n[r+1]))}function up(t,e,n,r){let o=t[n+1],s=e===null,i=r?jr(o):So(o),a=!1;for(;i!==0&&(a===!1||s);){let c=t[i],u=t[i+1];zE(c,e)&&(a=!0,t[i+1]=r?Bl(u):jl(u)),i=r?jr(u):So(u)}a&&(t[n+1]=r?jl(o):Bl(o))}function zE(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Gs(t,e)>=0:!1}function GE(t,e,n){let r=ge(),o=Zs();if(ar(r,o,e)){let s=at(),i=md();ng(s,i,r,t,e,r[Ke],n,!1)}return GE}function lp(t,e,n,r,o){Nd(e,t,n,o?"class":"style",r)}function YE(t,e,n){return Vg(t,e,n,!1),YE}function ZE(t,e){return Vg(t,e,null,!0),ZE}function Vg(t,e,n,r){let o=ge(),s=at(),i=dd(2);if(s.firstUpdatePass&&XE(s,t,i,r),e!==At&&ar(o,i,e)){let a=s.data[$n()];n0(s,a,o,o[Ke],t,o[i+1]=r0(e,n),r,i)}}function QE(t,e){return e>=t.expandoStartIndex}function XE(t,e,n,r){let o=t.data;if(o[n+1]===null){let s=o[$n()],i=QE(t,n);o0(s,r)&&e===null&&!i&&(e=!1),e=KE(o,s,e,r),$E(o,s,e,n,i,r)}}function KE(t,e,n,r){let o=rT(t),s=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=Xu(null,t,e,n,r),n=Ws(n,e.attrs,r),s=null);else{let i=e.directiveStylingLast;if(i===-1||t[i]!==o)if(n=Xu(o,t,e,n,r),s===null){let c=JE(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Xu(null,t,e,c[1],r),c=Ws(c,e.attrs,r),e0(t,e,r,c))}else s=t0(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function JE(t,e,n){let r=n?e.classBindings:e.styleBindings;if(So(r)!==0)return t[jr(r)]}function e0(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[jr(o)]=r}function t0(t,e,n){let r,o=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<o;s++){let i=t[s].hostAttrs;r=Ws(r,i,n)}return Ws(r,e.attrs,n)}function Xu(t,e,n,r,o){let s=null,i=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<i&&(s=e[a],r=Ws(r,s.hostAttrs,o),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ws(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let s=0;s<e.length;s++){let i=e[s];typeof i=="number"?o=i:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),vD(t,i,n?!0:e[++s]))}return t===void 0?null:t}function n0(t,e,n,r,o,s,i,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=HE(u)?dp(c,e,n,o,So(u),i):void 0;if(!$a(l)){$a(s)||qE(u)&&(s=dp(c,null,n,o,a,i));let d=Jp($n(),n);rC(r,i,d,o,s)}}function dp(t,e,n,r,o,s){let i=e===null,a;for(;o>0;){let c=t[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===At&&(h=d?Bt:void 0);let f=d?qu(h,r):l===r?h:void 0;if(u&&!$a(f)&&(f=qu(c,r)),$a(f)&&(a=f,i))return a;let p=t[o+1];o=i?jr(p):So(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=qu(c,r))}return a}function $a(t){return t!==void 0}function r0(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=wt(oc(t)))),t}function o0(t,e){return(t.flags&(e?8:16))!==0}var ql=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),o=Math.max(e,n),s=this.detach(o);if(o-r>1){let i=this.detach(r);this.attach(r,s),this.attach(o,i)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Ku(t,e,n,r,o){return t===n&&Object.is(e,r)?1:Object.is(o(t,e),o(n,r))?-1:0}function s0(t,e,n){let r,o,s=0,i=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=i&&s<=c;){let u=t.at(s),l=e[s],d=Ku(s,u,s,l,n);if(d!==0){d<0&&t.updateValue(s,l),s++;continue}let h=t.at(i),f=e[c],p=Ku(i,h,c,f,n);if(p!==0){p<0&&t.updateValue(i,f),i--,c--;continue}let m=n(s,u),g=n(i,h),y=n(s,l);if(Object.is(y,g)){let C=n(c,f);Object.is(C,m)?(t.swap(s,i),t.updateValue(i,f),c--,i--):t.move(i,s),t.updateValue(s,l),s++;continue}if(r??=new Wa,o??=hp(t,s,i,n),Ul(t,r,s,y))t.updateValue(s,l),s++,i++;else if(o.has(y))r.set(m,t.detach(s)),i--;else{let C=t.create(s,e[s]);t.attach(s,C),s++,i++}}for(;s<=c;)fp(t,r,n,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&s<=i;){let l=t.at(s),d=u.value,h=Ku(s,l,s,d,n);if(h!==0)h<0&&t.updateValue(s,d),s++,u=c.next();else{r??=new Wa,o??=hp(t,s,i,n);let f=n(s,d);if(Ul(t,r,s,f))t.updateValue(s,d),s++,i++,u=c.next();else if(!o.has(f))t.attach(s,t.create(s,d)),s++,i++,u=c.next();else{let p=n(s,l);r.set(p,t.detach(s)),i--}}}for(;!u.done;)fp(t,r,n,t.length,u.value),u=c.next()}for(;s<=i;)t.destroy(t.detach(i--));r?.forEach(c=>{t.destroy(c)})}function Ul(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function fp(t,e,n,r,o){if(Ul(t,e,r,n(r,o)))t.updateValue(r,o);else{let s=t.create(r,o);t.attach(r,s)}}function hp(t,e,n,r){let o=new Set;for(let s=e;s<=n;s++)o.add(r(s,t.at(s)));return o}var Wa=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),e(r,n)}}};function gL(t,e){Mo("NgControlFlow");let n=ge(),r=Zs(),o=n[r]!==At?n[r]:-1,s=o!==-1?za(n,Ut+o):void 0,i=0;if(ar(n,r,t)){let a=oe(null);try{if(s!==void 0&&yg(s,i),t!==-1){let c=Ut+t,u=za(n,c),l=zl(n[se],c),d=Us(u,l.tView.ssrId),h=ic(n,l,e,{dehydratedView:d});uc(u,h,i,js(l,d))}}finally{oe(a)}}else if(s!==void 0){let a=gg(s,i);a!==void 0&&(a[Ze]=e)}}var Hl=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-st}};function yL(t,e){return e}var $l=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function _L(t,e,n,r,o,s,i,a,c,u,l,d,h){Mo("NgControlFlow");let f=ge(),p=at(),m=c!==void 0,g=ge(),y=a?i.bind(g[en][Ze]):i,C=new $l(m,y);g[Ut+t]=C,Ll(f,p,t+1,e,n,r,o,Do(p.consts,s)),m&&Ll(f,p,t+2,c,u,l,d,Do(p.consts,h))}var Wl=class extends ql{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-st}at(e){return this.getLView(e)[Ze].$implicit}attach(e,n){let r=n[ks];this.needsIndexUpdate||=e!==this.length,uc(this.lContainer,n,e,js(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,i0(this.lContainer,e)}create(e,n){let r=Us(this.lContainer,this.templateTNode.tView.ssrId),o=ic(this.hostLView,this.templateTNode,new Hl(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(e){ac(e[se],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ze].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ze].$index=e}getLView(e){return a0(this.lContainer,e)}};function vL(t){let e=oe(null),n=$n();try{let r=ge(),o=r[se],s=r[n],i=n+1,a=za(r,i);if(s.liveCollection===void 0){let u=zl(o,i);s.liveCollection=new Wl(a,r,u)}else s.liveCollection.reset();let c=s.liveCollection;if(s0(c,t,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let u=Zs(),l=c.length===0;if(ar(r,u,l)){let d=n+2,h=za(r,d);if(l){let f=zl(o,d),p=Us(h,f.tView.ssrId),m=ic(r,f,void 0,{dehydratedView:p});uc(h,m,0,js(f,p))}else yg(h,0)}}}finally{oe(e)}}function za(t,e){return t[e]}function i0(t,e){return Bs(t,e)}function a0(t,e){return gg(t,e)}function zl(t,e){return ad(t,e)}function jg(t,e,n,r){let o=ge(),s=at(),i=Ut+t,a=o[Ke],c=s.firstCreatePass?wg(i,s,o,e,rg,rm(),n,r):s.data[i],u=u0(s,o,c,a,e,t);o[i]=u;let l=id(c);return Ys(c,!0),Qm(a,u,c),!og(c)&&gd()&&Rd(s,o,u,c),($D()===0||l)&&Qs(u,o),WD(),l&&(Ad(s,o,c),Hm(s,c,o)),r!==null&&tg(o,c),jg}function Bg(){let t=Dt();sm()?XD():(t=t.parent,Ys(t,!1));let e=t;YD(e)&&ZD(),zD();let n=at();return n.firstCreatePass&&Dg(n,e),e.classesWithoutHost!=null&&lT(e)&&lp(n,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dT(e)&&lp(n,e,ge(),e.stylesWithoutHost,!1),Bg}function c0(t,e,n,r){return jg(t,e,n,r),Bg(),c0}var u0=(t,e,n,r,o,s)=>(yd(!0),Ym(r,o,aT()));function xL(){return ge()}var Ga="en-US";var l0=Ga;function d0(t){typeof t=="string"&&(l0=t.toLowerCase().replace(/_/g,"-"))}function pp(t,e,n){return function r(o){if(o===Function)return n;let s=Eo(t)?Tn(t.index,e):e;Pd(s,5);let i=e[Ze],a=mp(e,i,n,o),c=r.__ngNextListenerFn__;for(;c;)a=mp(e,i,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function mp(t,e,n,r){let o=oe(null);try{return Te(6,e,n),n(r)!==!1}catch(s){return f0(t,s),!1}finally{Te(7,e,n),oe(o)}}function f0(t,e){let n=t[bo],r=n?n.get(ir,null):null;r&&r.handleError(e)}function gp(t,e,n,r,o,s){let i=e[n],a=e[se],u=a.data[n].outputs[r],l=i[u],d=a.firstCreatePass?ld(a):null,h=ud(e),f=l.subscribe(s),p=h.length;h.push(s,f),d&&d.push(o,t.index,p,-(p+1))}function h0(t,e,n,r){let o=ge(),s=at(),i=Dt();return m0(s,o,o[Ke],i,t,e,r),h0}function p0(t,e,n,r){let o=t.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let i=o[s];if(i===n&&o[s+1]===r){let a=e[Ea],c=o[s+2];return a.length>c?a[c]:null}typeof i=="string"&&(s+=2)}return null}function m0(t,e,n,r,o,s,i){let a=id(r),u=t.firstCreatePass?ld(t):null,l=ud(e),d=!0;if(r.type&3||i){let h=Sn(r,e),f=i?i(h):h,p=l.length,m=i?y=>i(Dn(y[r.index])):r.index,g=null;if(!i&&a&&(g=p0(t,e,o,r.index)),g!==null){let y=g.__ngLastListenerFn__||g;y.__ngNextListenerFn__=s,g.__ngLastListenerFn__=s,d=!1}else{s=pp(r,e,s),tS(e,f,o,s);let y=n.listen(f,o,s);l.push(s,y),u&&u.push(o,m,p,p+1)}}else s=pp(r,e,s);if(d){let h=r.outputs?.[o],f=r.hostDirectiveOutputs?.[o];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],g=f[p+1];gp(r,e,m,g,o,s)}if(h&&h.length)for(let p of h)gp(r,e,p,o,o,s)}}function bL(t=1){return sT(t)}function g0(t,e,n){return qg(t,"",e,"",n),g0}function qg(t,e,n,r,o){let s=ge(),i=Lg(s,e,n,r);if(i!==At){let a=at(),c=md();ng(a,c,s,t,i,s[Ke],o,!1)}return qg}function wL(t,e,n,r){oE(t,e,n,r)}function DL(t,e,n){rE(t,e,n)}function TL(t){let e=ge(),n=at(),r=cm();fd(r+1);let o=Bd(n,r);if(t.dirty&&jD(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let s=aE(e,r);t.reset(s,FT),t.notifyOnChanges()}return!0}return!1}function SL(){return nE(ge(),cm())}function CL(t,e=""){let n=ge(),r=at(),o=t+Ut,s=r.firstCreatePass?Vd(r,o,1,e,null):r.data[o],i=y0(r,n,s,e,t);n[o]=i,gd()&&Rd(r,n,i,s),Ys(s,!1)}var y0=(t,e,n,r,o)=>(yd(!0),bS(e[Ke],r));function _0(t){return Ug("",t,""),_0}function Ug(t,e,n){let r=ge(),o=Lg(r,t,e,n);return o!==At&&Ud(r,$n(),o),Ug}function v0(t,e,n,r,o){let s=ge(),i=jE(s,t,e,n,r,o);return i!==At&&Ud(s,$n(),i),v0}function x0(t,e,n,r,o,s,i,a,c){let u=ge(),l=BE(u,t,e,n,r,o,s,i,a,c);return l!==At&&Ud(u,$n(),l),x0}function Ud(t,e,n){let r=Jp(e,t);wS(t[Ke],r,n)}function b0(t,e,n){let r=at();if(r.firstCreatePass){let o=wn(t);Gl(n,r.data,r.blueprint,o,!0),Gl(e,r.data,r.blueprint,o,!1)}}function Gl(t,e,n,r,o){if(t=ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gl(t[s],e,n,r,o);else{let s=at(),i=ge(),a=Dt(),c=xo(t)?t:ft(t.provide),u=Up(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(xo(t)||!t.multi){let f=new Pr(u,o,Wn),p=el(c,e,o?l:l+h,d);p===-1?(fl(ka(a,i),s,c),Ju(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(f),i.push(f)):(n[p]=f,i[p]=f)}else{let f=el(c,e,l+h,d),p=el(c,e,l,l+h),m=f>=0&&n[f],g=p>=0&&n[p];if(o&&!g||!o&&!m){fl(ka(a,i),s,c);let y=T0(o?D0:w0,n.length,o,r,u);!o&&g&&(n[p].providerFactory=y),Ju(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(y),i.push(y)}else{let y=Hg(n[o?p:f],u,!o&&r);Ju(s,t,f>-1?f:p,y)}!o&&r&&g&&n[p].componentProviders++}}}function Ju(t,e,n,r){let o=xo(e),s=ED(e);if(o||s){let c=(s?ft(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function Hg(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function el(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function w0(t,e,n,r,o){return Yl(this.multi,[])}function D0(t,e,n,r,o){let s=this.multi,i;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Ps(r,r[se],this.providerFactory.index,o);i=c.slice(0,a),Yl(s,i);for(let u=a;u<c.length;u++)i.push(c[u])}else i=[],Yl(s,i);return i}function Yl(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function T0(t,e,n,r,o){let s=new Pr(t,n,Wn);return s.multi=[],s.index=e,s.componentProviders=0,Hg(s,o,r&&!n),s}function EL(t,e=[]){return n=>{n.providersResolver=(r,o)=>b0(r,o?o(t):t,e)}}function IL(t,e,n,r,o){return C0(ge(),KD(),t,e,n,r,o)}function S0(t,e){let n=t[e];return n===At?void 0:n}function C0(t,e,n,r,o,s,i){let a=e+n;return Ha(t,a,o,s)?SE(t,a+2,i?r.call(i,o,s):r(o,s)):S0(t,a+2)}var Ya=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},AL=new Ya("19.2.14"),Zl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},NL=(()=>{class t{compileModuleSync(n){return new Pl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=Pp(n),s=zm(o.declarations).reduce((i,a)=>{let c=or(a);return c&&i.push(new Vr(c)),i},[]);return new Zl(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var E0=(()=>{class t{zone=Y(It);changeDetectionScheduler=Y(Lr);applicationRef=Y($s);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),I0=new ye("",{factory:()=>!1});function $g({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new It(j(b({},Wg()),{scheduleInRootZone:n})),[{provide:It,useFactory:t},{provide:Sa,multi:!0,useFactory:()=>{let r=Y(E0,{optional:!0});return()=>r.initialize()}},{provide:Sa,multi:!0,useFactory:()=>{let r=Y(A0);return()=>{r.initialize()}}},e===!0?{provide:Am,useValue:!0}:[],{provide:Nm,useValue:n??Im}]}function ML(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=$g({ngZoneFactory:()=>{let o=Wg(t);return o.scheduleInRootZone=n,o.shouldCoalesceEventChangeDetection&&Mo("NgZone_CoalesceEvent"),new It(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Lp([{provide:I0,useValue:!0},{provide:vd,useValue:!1},r])}function Wg(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var A0=(()=>{class t{subscription=new Fe;initialized=!1;zone=Y(It);pendingTasks=Y(nc);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{It.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var N0=(()=>{class t{appRef=Y($s);taskService=Y(nc);ngZone=Y(It);zonelessEnabled=Y(vd);tracing=Y(rc,{optional:!0});disableScheduling=Y(Am,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Fe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fa):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Y(Nm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?Gh:Mm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fa+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Gh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function M0(){return typeof $localize<"u"&&$localize.locale||Ga}var zg=new ye("",{providedIn:"root",factory:()=>Y(zg,ue.Optional|ue.SkipSelf)||M0()});var Ql=new ye(""),O0=new ye("");function Is(t){return!t.moduleRef}function k0(t){let e=Is(t)?t.r3Injector:t.moduleRef.injector,n=e.get(It);return n.run(()=>{Is(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ir,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Is(t)){let s=()=>e.destroy(),i=t.platformInjector.get(Ql);i.add(s),e.onDestroy(()=>{o.unsubscribe(),i.delete(s)})}else{let s=()=>t.moduleRef.destroy(),i=t.platformInjector.get(Ql);i.add(s),t.moduleRef.onDestroy(()=>{va(t.allPlatformModules,t.moduleRef),o.unsubscribe(),i.delete(s)})}return F0(r,n,()=>{let s=e.get(Pg);return s.runInitializers(),s.donePromise.then(()=>{let i=e.get(zg,Ga);if(d0(i||Ga),!e.get(O0,!0))return Is(t)?e.get($s):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Is(t)){let c=e.get($s);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return R0(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function R0(t,e){let n=t.injector.get($s);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new he(-403,!1);e.push(t)}function F0(t,e,n){try{let r=n();return Rg(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var xa=null;function P0(t=[],e){return qn.create({name:e,providers:[{provide:qp,useValue:"platform"},{provide:Ql,useValue:new Set([()=>xa=null])},...t]})}function L0(t=[]){if(xa)return xa;let e=P0(t);return xa=e,RE(),V0(e),e}function V0(t){let e=t.get(HT,null);Hp(t,()=>{e?.forEach(n=>n())})}var Gg=(()=>{class t{static __NG_ELEMENT_ID__=j0}return t})();function j0(t){return B0(Dt(),ge(),(t&16)===16)}function B0(t,e,n){if(Eo(t)&&!n){let r=Tn(t.index,e);return new qs(r,r)}else if(t.type&175){let r=e[en];return new qs(r,e)}return null}var Xl=class{constructor(){}supports(e){return Og(e)}create(e){return new Kl(e)}},q0=(t,e)=>e,Kl=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||q0}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,s=null;for(;n||r;){let i=!r||n&&n.currentIndex<yp(r,o,s)?n:r,a=yp(i,o,s),c=i.currentIndex;if(i===r)o--,r=r._nextRemoved;else if(n=n._next,i.previousIndex==null)o++;else{s||(s=[]);let u=a-o,l=c-o;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<u&&(s[h]=f+1)}let d=i.previousIndex;s[d]=l-u}}a!==c&&e(i,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Og(e))throw new he(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,o,s,i;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],i=this._trackByFn(a,s),n===null||!Object.is(n.trackById,i)?(n=this._mismatch(n,s,i,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,i,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else o=0,DE(e,a=>{i=this._trackByFn(o,a),n===null||!Object.is(n.trackById,i)?(n=this._mismatch(n,a,i,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,i,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,o)):e=this._addAfter(new Jl(n,r),s,o)),e}_verifyReinsertion(e,n,r,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,s=e._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let o=n===null?this._itHead:n._next;return e._next=o,e._prev=n,o===null?this._itTail=e:o._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Za),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Za),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jl=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},ed=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Za=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new ed,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,o=this.map.get(r);return o?o.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function yp(t,e,n){let r=t.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function _p(){return new Hd([new Xl])}var Hd=(()=>{class t{factories;static \u0275prov=Z({token:t,providedIn:"root",factory:_p});constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||_p()),deps:[[t,new mD,new pD]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new he(901,!1)}}return t})();function OL(t){Te(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,o=L0(r),s=[$g({}),{provide:Lr,useExisting:N0},...n||[]],i=new Ua({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return k0({r3Injector:i.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Te(9)}}function U0(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function H0(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function $0(t){return wu(t)}function rn(t,e){return _u(t,e?.equal)}var td=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};function dc(t,e){!e?.injector&&Ja(dc);let n=e?.injector??Y(qn),r=e?.manualCleanup!==!0?n.get(nn):null,o,s=n.get(Dd,null,{optional:!0}),i=n.get(Lr);return s!==null&&!e?.forceRoot?(o=G0(s.view,i,t),r instanceof Ra&&r._lView===s.view&&(r=null)):o=Y0(t,n.get(kg),i),o.injector=n,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new td(o)}var Yg=j(b({},no),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ls,run(){if(this.dirty=!1,this.hasRun&&!ki(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=vs(this),n=Na(!1);try{this.maybeCleanup(),this.fn(t)}finally{Na(n),Oi(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),W0=j(b({},Yg),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){xs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),z0=j(b({},Yg),{consumerMarkedDirty(){this.view[te]|=8192,Ao(this.view),this.notifier.notify(13)},destroy(){xs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Or]?.delete(this)}});function G0(t,e,n){let r=Object.create(z0);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[Or]??=new Set,t[Or].add(r),r.consumerMarkedDirty(r),r}function Y0(t,e,n){let r=Object.create(W0);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function kL(t,e){let n=or(t),r=e.elementInjector||Ka();return new Vr(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function RL(t){let e=or(t);if(!e)return null;let n=new Vr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ks=new ye("");var Xg=null;function fc(){return Xg}function Z0(t){Xg??=t}var $d=class{},Js=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:()=>Y(Kg),providedIn:"platform"})}return t})(),Q0=new ye(""),Kg=(()=>{class t extends Js{_location;_history;_doc=Y(Ks);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fc().getBaseHref(this._doc)}onPopState(n){let r=fc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=fc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function hc(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Zg(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function on(t){return t&&t[0]!=="?"?`?${t}`:t}var Oo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Z({token:t,factory:()=>Y(Jg),providedIn:"root"})}return t})(),pc=new ye(""),Jg=(()=>{class t extends Oo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Y(Ks).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return hc(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+on(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,s){let i=this.prepareExternalUrl(o+on(s));this._platformLocation.pushState(n,r,i)}replaceState(n,r,o,s){let i=this.prepareExternalUrl(o+on(s));this._platformLocation.replaceState(n,r,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Qe(Js),Qe(pc,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ey=(()=>{class t{_subject=new Vt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=J0(Zg(Qg(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+on(r))}normalize(n){return t.stripTrailingSlash(K0(this._basePath,Qg(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+on(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+on(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=on;static joinWithSlash=hc;static stripTrailingSlash=Zg;static \u0275fac=function(r){return new(r||t)(Qe(Oo))};static \u0275prov=Z({token:t,factory:()=>X0(),providedIn:"root"})}return t})();function X0(){return new ey(Qe(Oo))}function K0(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Qg(t){return t.replace(/\/index.html$/,"")}function J0(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var eI=(()=>{class t extends Oo{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=hc(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,s){let i=this.prepareExternalUrl(o+on(s))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,i)}replaceState(n,r,o,s){let i=this.prepareExternalUrl(o+on(s))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Qe(Js),Qe(pc,8))};static \u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();var Wd=/\s+/,ty=[],tI=(()=>{class t{_ngEl;_renderer;initialClasses=ty;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Wd):ty}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Wd):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let o=this.stateMap.get(n);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],o=n[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Wd).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||t)(Wn(Br),Wn(jd))};static \u0275dir=qd({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var mc=class{$implicit;ngForOf;index;count;constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ry=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,s,i)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new mc(o.item,this._ngForOf,-1,-1),i===null?void 0:i);else if(i==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,i),ny(a,o)}});for(let o=0,s=r.length;o<s;o++){let a=r.get(o).context;a.index=o,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);ny(s,o)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Wn(Xs),Wn(To),Wn(Hd))};static \u0275dir=qd({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function ny(t,e){t.context.$implicit=e.item}var nI=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ag({type:t});static \u0275inj=Sp({})}return t})();function rI(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(s)}return null}var oy="browser",sy="server";function oI(t){return t===oy}function sI(t){return t===sy}var zd=class{};var h2=(()=>{class t{static \u0275prov=Z({token:t,providedIn:"root",factory:()=>new Gd(Y(Ks),window)})}return t})(),Gd=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=iI(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}};function iI(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let s=o.shadowRoot;if(s){let i=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(i)return i}o=r.nextNode()}}return null}var ko=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(ko||{}),v2="*";function x2(t,e){return{type:ko.Trigger,name:t,definitions:e,options:{}}}function b2(t,e=null){return{type:ko.Animate,styles:e,timings:t}}function w2(t,e=null){return{type:ko.Sequence,steps:t,options:e}}function D2(t){return{type:ko.Style,styles:t,offset:null}}function T2(t,e,n=null){return{type:ko.Transition,expr:t,animation:e,options:n}}var iy=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,n=0){this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},ay=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let n=0,r=0,o=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(i=>{i.onDone(()=>{++n==s&&this._onFinish()}),i.onDestroy(()=>{++r==s&&this._onDestroy()}),i.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((i,a)=>Math.max(i,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let o=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(o)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},S2="!";var Yd={duration:3e3,dismissible:!0};var Zd=class t{notificationsSignal=z([]);notifications=this.notificationsSignal.asReadonly();success(e,n){this.show("success",e,n)}error(e,n){this.show("error",e,n)}info(e,n){this.show("info",e,n)}warning(e,n){this.show("warning",e,n)}show(e,n,r=Yd.duration){let o={id:this.generateId(),type:e,message:n,duration:r,dismissible:Yd.dismissible};this.notificationsSignal.update(s=>[...s,o]),r>0&&setTimeout(()=>{this.dismiss(o.id)},r)}dismiss(e){this.notificationsSignal.update(n=>n.filter(r=>r.id!==e))}dismissAll(){this.notificationsSignal.set([])}generateId(){return`notification_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qd=class t{_theme=z(this.getInitialTheme());theme=this._theme.asReadonly();constructor(){dc(()=>{this.applyTheme(this._theme())})}getInitialTheme(){let e=localStorage.getItem("youtube-looper-theme");return e&&(e==="light"||e==="dark")?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}applyTheme(e){document.documentElement.classList.remove("light-theme","dark-theme"),document.documentElement.classList.add(`${e}-theme`),localStorage.setItem("youtube-looper-theme",e)}toggleTheme(){let n=this._theme()==="light"?"dark":"light";this._theme.set(n)}setTheme(e){this._theme.set(e)}isDarkTheme(){return this._theme()==="dark"}isLightTheme(){return this._theme()==="light"}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var ei=class t{static YOUTUBE_API_URL="https://www.youtube.com/iframe_api";static isLoading=!1;static isLoaded=!1;static loadPromise=null;loadYouTubeAPI(){return O(this,null,function*(){return t.isLoaded||window.YT&&window.YT.Player?Promise.resolve():(t.loadPromise||(t.loadPromise=this.createLoadPromise()),t.loadPromise)})}createLoadPromise(){return new Promise((e,n)=>{let r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{t.isLoaded=!0,t.isLoading=!1,r&&r(),e()};let o=setTimeout(()=>{t.isLoading=!1,n(new Error("Timeout lors du chargement de l'API YouTube"))},1e4),s=document.createElement("script");s.src=t.YOUTUBE_API_URL,s.async=!0,s.defer=!0,s.onload=()=>{clearTimeout(o)},s.onerror=()=>{clearTimeout(o),t.isLoading=!1,n(new Error("Erreur lors du chargement du script API YouTube"))},t.isLoading=!0,document.head.appendChild(s)})}isAPIReady(){return t.isLoaded&&!!(window.YT&&window.YT.Player)}isAPILoading(){return t.isLoading}waitForAPI(){return O(this,null,function*(){return this.isAPIReady()?Promise.resolve():!this.isAPILoading()&&!t.loadPromise?this.loadYouTubeAPI():t.loadPromise?t.loadPromise:new Promise((e,n)=>{let o=0,s=()=>{if(o++,this.isAPIReady()){e();return}if(o>=50){n(new Error("Timeout: l'API YouTube n'est pas disponible"));return}setTimeout(s,100)};s()})})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};function Xd(t){t||(Ja(Xd),t=Y(nn));let e=new me(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Bu(e))}var ti=class t{apiLoader=Y(ei);destroyRef=Y(nn);player=null;elementId=null;_isReady=z(!1);_isPlaying=z(!1);_isPaused=z(!1);_currentTime=z(0);_duration=z(0);_volume=z(100);_isMuted=z(!1);_playbackRate=z(1);_state=z(-1);_error=z(null);_videoId=z(null);isReady=this._isReady.asReadonly();isPlaying=this._isPlaying.asReadonly();isPaused=this._isPaused.asReadonly();currentTime=this._currentTime.asReadonly();duration=this._duration.asReadonly();volume=this._volume.asReadonly();isMuted=this._isMuted.asReadonly();playbackRate=this._playbackRate.asReadonly();state=this._state.asReadonly();error=this._error.asReadonly();videoId=this._videoId.asReadonly();playerState=rn(()=>({isReady:this._isReady(),isPlaying:this._isPlaying(),isPaused:this._isPaused(),currentTime:this._currentTime(),duration:this._duration(),volume:this._volume(),isMuted:this._isMuted(),playbackRate:this._playbackRate(),state:this._state(),error:this._error(),videoId:this._videoId()}));canPlay=rn(()=>this._isReady()&&this._videoId()!==null&&this._error()===null&&(this._state()===2||this._state()===5||this._state()===0));canPause=rn(()=>this._isReady()&&this._state()===1);timeUpdateSubject=new wr(!1);constructor(){this.setupTimeUpdates()}initializePlayer(r){return O(this,arguments,function*(e,n={}){try{yield this.apiLoader.loadYouTubeAPI(),this.cleanup(),this.elementId=e,yield new Promise((s,i)=>{let a={width:n.width||"100%",playerVars:b({enablejsapi:1,origin:window.location.origin,controls:1,modestbranding:1,rel:0,showinfo:0},n.playerVars),events:{onReady:c=>{this.onPlayerReady(c),s()},onStateChange:this.onPlayerStateChange.bind(this),onError:c=>{this.onPlayerError(c),i(new Error(`Erreur du lecteur YouTube: ${c.data}`))}}};this.player=new window.YT.Player(e,a)})}catch(o){throw console.error("Erreur lors de l'initialisation du lecteur YouTube:",o),o}})}loadVideo(e){return O(this,null,function*(){if(!this.player||!this._isReady())throw new Error("Le lecteur YouTube n'est pas pr\xEAt");try{this._error.set(null),this._videoId.set(e.videoId),e.autoplay?this.player.loadVideoById(e.videoId,e.startSeconds||0,e.suggestedQuality||"default"):this.player.cueVideoById(e.videoId,e.startSeconds||0,e.suggestedQuality||"default")}catch(n){throw console.error("Erreur lors du chargement de la vid\xE9o:",n),n}})}play(){if(!this.canPlay()){console.warn("Impossible de lancer la lecture");return}this.player?.playVideo()}pause(){if(!this.canPause()){console.warn("Impossible de mettre en pause");return}this.player?.pauseVideo()}stop(){this._isReady()&&this.player?.stopVideo()}seekTo(e,n=!0){this._isReady()&&this.player?.seekTo(e,n)}setVolume(e){if(!this._isReady())return;let n=Math.max(0,Math.min(100,e));this.player?.setVolume(n),this._volume.set(n)}toggleMute(){this._isReady()&&(this._isMuted()?this.player?.unMute():this.player?.mute())}setPlaybackRate(e){this._isReady()&&this.player?.setPlaybackRate(e)}getAvailablePlaybackRates(){return this._isReady()?this.player?.getAvailablePlaybackRates()||[]:[]}cleanup(){if(this.timeUpdateSubject.next(!1),this.player){try{this.player.destroy()}catch(e){console.warn("Erreur lors de la destruction du lecteur:",e)}this.player=null}this.resetState()}onPlayerReady(e){console.log("Lecteur YouTube pr\xEAt"),this._isReady.set(!0),this.updatePlayerInfo()}onPlayerStateChange(e){let n=e.data;switch(this._state.set(n),n){case 1:this._isPlaying.set(!0),this._isPaused.set(!1),this.timeUpdateSubject.next(!0);break;case 2:this._isPlaying.set(!1),this._isPaused.set(!0),this.timeUpdateSubject.next(!1);break;case 0:case 3:case 5:this._isPlaying.set(!1),this._isPaused.set(!1),n!==3&&this.timeUpdateSubject.next(!1);break}this.updatePlayerInfo()}onPlayerError(e){let n=e.data;console.error("Erreur du lecteur YouTube:",n),this._error.set(n),this._isPlaying.set(!1),this._isPaused.set(!1),this.timeUpdateSubject.next(!1)}updatePlayerInfo(){if(!(!this.player||!this._isReady()))try{this._duration.set(this.player.getDuration()||0),this._currentTime.set(this.player.getCurrentTime()||0),this._volume.set(this.player.getVolume()||100),this._isMuted.set(this.player.isMuted()||!1),this._playbackRate.set(this.player.getPlaybackRate()||1)}catch(e){console.warn("Erreur lors de la mise \xE0 jour des informations du lecteur:",e)}}setupTimeUpdates(){this.timeUpdateSubject.pipe(Xd(this.destroyRef),ju(e=>e?Pu(100):Vn)).subscribe(()=>{if(this.player&&this._isReady()){let e=this.player.getCurrentTime();this._currentTime.set(e)}})}resetState(){this._isReady.set(!1),this._isPlaying.set(!1),this._isPaused.set(!1),this._currentTime.set(0),this._duration.set(0),this._volume.set(100),this._isMuted.set(!1),this._playbackRate.set(1),this._state.set(-1),this._error.set(null),this._videoId.set(null),this.elementId=null}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Kd=class t{youTubePlayerService=Y(ti);destroyRef=Y(nn);_startTime=z(0);_endTime=z(0);_isLoopActive=z(!1);_hasValidLoop=rn(()=>this._startTime()<this._endTime()&&this._startTime()>=0&&this._endTime()>0);startTime=this._startTime.asReadonly();endTime=this._endTime.asReadonly();isLoopActive=this._isLoopActive.asReadonly();hasValidLoop=this._hasValidLoop;currentLoop=rn(()=>({startTime:this._startTime(),endTime:this._endTime(),isActive:this._isLoopActive()}));monitoringInterval;constructor(){this.initializeMonitoring()}setStartTime(e){e>=0&&(this._startTime.set(e),console.log(`LoopService: Start time set to ${e}s`))}setEndTime(e){e>0&&(this._endTime.set(e),console.log(`LoopService: End time set to ${e}s`))}toggleLoop(){let n=!this._isLoopActive();if(n&&!this.hasValidLoop()){console.warn("LoopService: Cannot activate loop - invalid loop configuration");return}this._isLoopActive.set(n),n?(this.startMonitoring(),console.log(`LoopService: Loop activated (${this._startTime()}s - ${this._endTime()}s)`)):(this.stopMonitoring(),console.log("LoopService: Loop deactivated"))}activateLoop(){this._isLoopActive()||this.toggleLoop()}deactivateLoop(){this._isLoopActive()&&this.toggleLoop()}setLoop(e,n,r=!1){this.setStartTime(e),this.setEndTime(n),r&&this.hasValidLoop()&&this.activateLoop()}resetLoop(){this.deactivateLoop(),this._startTime.set(0),this._endTime.set(0),console.log("LoopService: Loop reset")}initializeMonitoring(){}startMonitoring(){this.monitoringInterval&&this.stopMonitoring(),this.monitoringInterval=setInterval(()=>{this.checkLoopPosition()},100),console.log("LoopService: Monitoring started")}stopMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=void 0,console.log("LoopService: Monitoring stopped"))}checkLoopPosition(){if(!this._isLoopActive()||!this.hasValidLoop())return;let e=this.youTubePlayerService.currentTime(),n=this._endTime(),r=this._startTime();e>=n&&(console.log(`LoopService: Loop reached end (${e}s >= ${n}s), seeking to start (${r}s)`),this.youTubePlayerService.seekTo(r))}ngOnDestroy(){this.stopMonitoring()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var ni=class t{compatibility=z(null);isDetected=z(!1);constructor(){this.detectCompatibility()}detectCompatibility(){let e=[],n=this.detectWebAssembly();n||e.push("WebAssembly is not supported. Audio pitch shifting will not work.");let r=this.detectWebWorkers();r||e.push("Web Workers are not supported. Audio processing performance may be degraded.");let o=this.detectAudioContext();o||e.push("Web Audio API is not supported. Audio playback will not work.");let s=this.detectBrowser();this.addBrowserSpecificWarnings(s,e);let i={webAssemblySupported:n,webWorkersSupported:r,audioContextSupported:o,browser:s.name,browserVersion:s.version,os:s.os,isMobile:s.isMobile,isFullyCompatible:n&&r&&o,warnings:e};this.compatibility.set(i),this.isDetected.set(!0),console.log("[BrowserCompatibility] Detection complete:",i),i.isFullyCompatible||console.warn("[BrowserCompatibility] Compatibility issues detected:",e)}detectWebAssembly(){try{if(typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function")return new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0))instanceof WebAssembly.Module}catch(e){console.error("[BrowserCompatibility] WebAssembly test failed:",e)}return!1}detectWebWorkers(){return typeof Worker<"u"}detectAudioContext(){return typeof AudioContext<"u"||typeof window.webkitAudioContext<"u"}detectBrowser(){let e=navigator.userAgent,n="Unknown",r="Unknown",o="Unknown",s=/Mobile|Android|iPhone|iPad|iPod/i.test(e);if(/Windows/i.test(e)?o="Windows":/Mac/i.test(e)?o="macOS":/Linux/i.test(e)?o="Linux":/Android/i.test(e)?o="Android":/iOS|iPhone|iPad|iPod/i.test(e)&&(o="iOS"),/Edg\//i.test(e)){n="Edge";let i=e.match(/Edg\/(\d+)/);r=i?i[1]:"Unknown"}else if(/Chrome/i.test(e)){n="Chrome";let i=e.match(/Chrome\/(\d+)/);r=i?i[1]:"Unknown"}else if(/Firefox/i.test(e)){n="Firefox";let i=e.match(/Firefox\/(\d+)/);r=i?i[1]:"Unknown"}else if(/Safari/i.test(e)&&!/Chrome/i.test(e)){n="Safari";let i=e.match(/Version\/(\d+)/);r=i?i[1]:"Unknown"}return{name:n,version:r,os:o,isMobile:s}}addBrowserSpecificWarnings(e,n){e.name==="Safari"&&parseInt(e.version)<15&&n.push("Safari version is outdated. Please update to version 15 or later for better WebAssembly support."),e.os==="iOS"&&e.name==="Safari"&&n.push("iOS Safari may have performance limitations. Consider using Chrome on iOS for better performance."),e.name==="Firefox"&&parseInt(e.version)<90&&n.push("Firefox version is outdated. Please update to version 90 or later for optimal performance.")}getIncompatibilityMessage(){let e=this.compatibility();return!e||e.isFullyCompatible?null:`Your browser (${e.browser} ${e.browserVersion} on ${e.os}) has compatibility issues:
${e.warnings.join(`
`)}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var gc=class t{compatibilityService=Y(ni);pitch=z(0);playbackRate=z(1);isProcessing=z(!1);processingProgress=z(0);processingStatus=z("");hasError=z(!1);errorMessage=z("");audioCache=new Map;originalBuffer=null;worker=null;workerReady=!1;pendingProcessing=!1;debounceTimer=null;DEBOUNCE_DELAY=500;progressThrottleTimer=0;PROGRESS_THROTTLE_DELAY=250;PROCESSING_TIMEOUT=6e4;processingTimeoutTimer=null;processedBufferSubject=new Vt;getCacheKey(e,n){return`p${e}_t${n}`}hasCache(e,n){let r=this.getCacheKey(e,n);return this.audioCache.has(r)}getFromCache(e,n){let r=this.getCacheKey(e,n);return this.audioCache.get(r)}setCache(e,n,r){let o=this.getCacheKey(e,n);this.audioCache.set(o,r)}createWorker(){if(this.worker)return;let e=this.compatibilityService.compatibility();if(e&&!e.isFullyCompatible){let n=this.compatibilityService.getIncompatibilityMessage();this.handleProcessingError(n||"Browser compatibility issues detected");return}this.worker=new Worker(new URL("worker-BGSEH3NR.js",import.meta.url),{type:"module"}),this.worker.onmessage=n=>{let r=n.data;if(r.ready){console.log("[RubberbandEngineService] Worker ready"),this.workerReady=!0,this.pendingProcessing&&(this.pendingProcessing=!1,this.processAudio());return}if(r.progress!==void 0&&this.updateProgressThrottled(r.progress),r.status&&this.processingStatus.set(r.status),r.error){console.error("[RubberbandEngineService] Worker error:",r.error),this.handleProcessingError(r.error);return}r.channelBuffers&&this.handleProcessedAudio(r.channelBuffers)},this.worker.onerror=n=>{console.error("[RubberbandEngineService] Worker error:",n),this.handleProcessingError(n.message||"Unknown worker error")}}destroyWorker(){this.worker&&(this.worker.terminate(),this.worker=null,this.workerReady=!1,this.pendingProcessing=!1)}handleProcessingError(e){this.clearProcessingTimeout(),this.isProcessing.set(!1),this.processingStatus.set("Error"),this.hasError.set(!0),this.errorMessage.set(e),this.processingProgress.set(0),console.error("[RubberbandEngineService] Processing error:",e)}startProcessingTimeout(){this.clearProcessingTimeout(),this.processingTimeoutTimer=setTimeout(()=>{console.error("[RubberbandEngineService] Processing timeout after",this.PROCESSING_TIMEOUT,"ms"),this.handleProcessingError("Processing timeout: audio processing took too long"),this.destroyWorker()},this.PROCESSING_TIMEOUT)}clearProcessingTimeout(){this.processingTimeoutTimer!==null&&(clearTimeout(this.processingTimeoutTimer),this.processingTimeoutTimer=null)}handleProcessedAudio(e){if(this.clearProcessingTimeout(),!this.originalBuffer){console.error("[RubberbandEngineService] No original buffer"),this.handleProcessingError("No original buffer available");return}let r=new AudioContext().createBuffer(e.length,e[0].length,this.originalBuffer.sampleRate);for(let i=0;i<e.length;i++){let a=new Float32Array(e[i]);r.copyToChannel(a,i)}let o=this.pitch(),s=this.playbackRate();this.setCache(o,s,r),this.processedBufferSubject.next(r),this.isProcessing.set(!1),this.processingStatus.set("Complete"),this.processingProgress.set(100)}updateProgressThrottled(e){let n=Date.now();(this.progressThrottleTimer===0||e===100||n-this.progressThrottleTimer>=this.PROGRESS_THROTTLE_DELAY)&&(this.processingProgress.set(e),this.progressThrottleTimer=n)}cancelCurrentProcessing(){this.worker&&this.isProcessing()&&(console.log("[RubberbandEngineService] Cancelling current processing"),this.destroyWorker(),this.isProcessing.set(!1),this.processingStatus.set("Cancelled"),this.processingProgress.set(0),this.progressThrottleTimer=0)}triggerProcessing(){this.debounceTimer!==null&&clearTimeout(this.debounceTimer),this.cancelCurrentProcessing(),this.debounceTimer=setTimeout(()=>{this.processAudio(),this.debounceTimer=null},this.DEBOUNCE_DELAY)}processAudio(){if(!this.originalBuffer){console.warn("[RubberbandEngineService] No audio loaded");return}let e=this.pitch(),n=this.playbackRate();if(this.hasCache(e,n)){let s=this.getFromCache(e,n);if(s){console.log("[RubberbandEngineService] Using cached buffer"),this.processedBufferSubject.next(s);return}}if(this.createWorker(),!this.worker){console.error("[RubberbandEngineService] Worker not available");return}if(!this.workerReady){console.log("[RubberbandEngineService] Worker not ready yet, queueing processing"),this.pendingProcessing=!0,this.processingStatus.set("Initializing worker...");return}let r=[];for(let s=0;s<this.originalBuffer.numberOfChannels;s++){let i=new Float32Array(this.originalBuffer.length);this.originalBuffer.copyFromChannel(i,s),r.push(i)}this.hasError.set(!1),this.errorMessage.set(""),this.isProcessing.set(!0),this.processingProgress.set(0),this.processingStatus.set("Starting..."),this.startProcessingTimeout();let o={channelBuffers:r,sampleRate:this.originalBuffer.sampleRate,pitch:e,tempo:n};this.worker.postMessage(o)}loadOriginalBuffer(e){this.originalBuffer=e,this.setCache(0,1,e),console.log("[RubberbandEngineService] Original buffer loaded and cached",{duration:e.duration,sampleRate:e.sampleRate,channels:e.numberOfChannels,cachedAs:this.getCacheKey(0,1)})}setPitch(e){let n=Math.max(-6,Math.min(6,e));n!==this.pitch()&&(this.pitch.set(n),console.log("[RubberbandEngineService] Pitch set to",n),this.triggerProcessing())}setPlaybackRate(e){let r=[.5,.75,1].reduce((o,s)=>Math.abs(s-e)<Math.abs(o-e)?s:o);r!==this.playbackRate()&&(this.playbackRate.set(r),console.log("[RubberbandEngineService] Playback rate set to",r),this.triggerProcessing())}getProcessedBuffer(){return this.processedBufferSubject.asObservable()}clearCache(){this.audioCache.clear(),console.log("[RubberbandEngineService] Cache cleared")}getCompatibility(){return this.compatibilityService.compatibility()}destroy(){this.destroyWorker(),this.clearCache(),this.clearProcessingTimeout(),this.originalBuffer=null,this.processedBufferSubject.complete(),this.debounceTimer!==null&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.progressThrottleTimer=0,this.hasError.set(!1),this.errorMessage.set(""),console.log("[RubberbandEngineService] Service destroyed")}constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var ri="15.1.22";var Tt=Kf(tf());var wy=()=>new DOMException("","AbortError");var Dy=t=>(e,n,[r,o,s],i)=>{t(e[o],[n,r,s],a=>a[0]===n&&a[1]===r,i)};var Ty=t=>(e,n,r)=>{let o=[];for(let s=0;s<r.numberOfInputs;s+=1)o.push(new Set);t.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})};var Sy=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})};var Cn=new WeakSet,_c=new WeakMap,Ro=new WeakMap,vc=new WeakMap,pi=new WeakMap,Fo=new WeakMap,xc=new WeakMap,mi=new WeakMap,gi=new WeakMap,yi=new WeakMap;var Cy={construct(){return Cy}},Ey=t=>{try{let e=new Proxy(t,Cy);new e}catch{return!1}return!0};var Iy=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,nf=(t,e)=>{let n=[],r=t.replace(/^[\s]+/,""),o=r.match(Iy);for(;o!==null;){let s=o[1].slice(1,-1),i=o[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());n.push(i),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(Iy)}return[n.join(";"),r]};var Ay=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ny=t=>{if(!Ey(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},My=(t,e,n,r,o,s,i,a,c,u,l,d,h)=>{let f=0;return(p,m,g={credentials:"omit"})=>{let y=l.get(p);if(y!==void 0&&y.has(m))return Promise.resolve();let C=u.get(p);if(C!==void 0){let T=C.get(m);if(T!==void 0)return T}let A=s(p),L=A.audioWorklet===void 0?o(m).then(([T,w])=>{let[_,v]=nf(T,w),F=`${_};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${v}
})})(window,'_AWGS')`;return n(F)}).then(()=>{let T=h._AWGS.pop();if(T===void 0)throw new SyntaxError;r(A.currentTime,A.sampleRate,()=>T(class{},void 0,(w,_)=>{if(w.trim()==="")throw e();let v=gi.get(A);if(v!==void 0){if(v.has(w))throw e();Ny(_),Ay(_.parameterDescriptors),v.set(w,_)}else Ny(_),Ay(_.parameterDescriptors),gi.set(A,new Map([[w,_]]))},A.sampleRate,void 0,void 0))}):Promise.all([o(m),Promise.resolve(t(d,d))]).then(([[T,w],_])=>{let v=f+1;f=v;let[F,H]=nf(T,w),E=`${F};((AudioWorkletProcessor,registerProcessor)=>{${H}
})(${_?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${_?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${_?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${v}',class extends AudioWorkletProcessor{process(){return !1}})`,D=new Blob([E],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(D);return A.audioWorklet.addModule(S,g).then(()=>{if(a(A))return A;let I=i(A);return I.audioWorklet.addModule(S,g).then(()=>I)}).then(I=>{if(c===null)throw new SyntaxError;try{new c(I,`__sac${v}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(S))});return C===void 0?u.set(p,new Map([[m,L]])):C.set(m,L),L.then(()=>{let T=l.get(p);T===void 0?l.set(p,new Set([m])):T.add(m)}).finally(()=>{let T=u.get(p);T!==void 0&&T.delete(m)}),L}};var qe=(t,e)=>{let n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n};var cr=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");let[r]=n;return t.delete(r),r};var bc=(t,e,n,r)=>{let o=qe(t,e),s=cr(o,i=>i[0]===n&&i[1]===r);return o.size===0&&t.delete(e),s};var En=t=>qe(xc,t);var sn=t=>{if(Cn.has(t))throw new Error("The AudioNode is already stored.");Cn.add(t),En(t).forEach(e=>e(!0))};var wc=t=>"port"in t;var In=t=>{if(!Cn.has(t))throw new Error("The AudioNode is not stored.");Cn.delete(t),En(t).forEach(e=>e(!1))};var _i=(t,e)=>{!wc(t)&&e.every(n=>n.size===0)&&In(t)};var Oy=(t,e,n,r,o,s,i,a,c,u,l,d,h)=>{let f=new WeakMap;return(p,m,g,y,C)=>{let{activeInputs:A,passiveInputs:L}=s(m),{outputs:T}=s(p),w=a(p),_=v=>{let F=c(m),H=c(p);if(v){let k=bc(L,p,g,y);t(A,p,k,!1),!C&&!d(p)&&n(H,F,g,y),h(m)&&sn(m)}else{let k=r(A,p,g,y);e(L,y,k,!1),!C&&!d(p)&&o(H,F,g,y);let M=i(m);if(M===0)l(m)&&_i(m,A);else{let $=f.get(m);$!==void 0&&clearTimeout($),f.set(m,setTimeout(()=>{l(m)&&_i(m,A)},M*1e3))}}};return u(T,[m,g,y],v=>v[0]===m&&v[1]===g&&v[2]===y,!0)?(w.add(_),l(p)?t(A,p,[g,y,_],!0):e(L,y,[p,g,_],!0),!0):!1}};var ky=t=>(e,n,[r,o,s],i)=>{let a=e.get(r);a===void 0?e.set(r,new Set([[o,n,s]])):t(a,[o,n,s],c=>c[0]===o&&c[1]===n,i)};var Ry=t=>(e,n)=>{let r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);let o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)};var Fy=t=>(e,n)=>{t(e).add(n)};var TI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Py=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=o(a),l=b(b({},TI),c),d=r(u,l),h=s(u)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var ve=(t,e)=>t.context===e;var Ly=(t,e,n)=>()=>{let r=new WeakMap,o=(s,i)=>O(null,null,function*(){let a=e(s);if(!ve(a,i)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(i,u)}return r.set(i,a),yield n(s,i,a),a});return{render(s,i){let a=r.get(i);return a!==void 0?Promise.resolve(a):o(s,i)}}};var Po=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var Ht=()=>new DOMException("","IndexSizeError");var Lo=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Ht():r}})(t.getChannelData)};var SI={numberOfChannels:1},Vy=(t,e,n,r,o,s,i,a)=>{let c=null;return class jy{constructor(l){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:d,numberOfChannels:h,sampleRate:f}=b(b({},SI),l);c===null&&(c=new o(1,1,44100));let p=r!==null&&e(s,s)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(i(p),Lo(p)):e(Po,()=>Po(p))||a(p),t.add(p),p}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===jy.prototype||t.has(l)}}};var Le=-34028234663852886e22,Pe=-Le;var pt=t=>Cn.has(t);var CI={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},By=(t,e,n,r,o,s,i,a)=>class extends t{constructor(u,l){let d=s(u),h=b(b({},CI),l),f=o(d,h),p=i(d),m=p?e():null;super(u,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Pe,Le)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){let l=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;let d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===l?u:d}get playbackRate(){return this._playbackRate}start(u=0,l=0,d){if(this._nativeAudioBufferSourceNode.start(u,l,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[u,l]:[u,l,d]),this.context.state!=="closed"){sn(this);let h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),pt(this)&&In(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}};var qy=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=null,a=null,c=(u,l)=>O(null,null,function*(){let d=n(u),h=ve(d,l);if(!h){let f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(l,f),i!==null&&d.start(...i),a!==null&&d.stop(a)}return s.set(l,d),h?yield t(l,u.playbackRate,d.playbackRate):yield r(l,u.playbackRate,d.playbackRate),yield o(u,l,d),d});return{set start(u){i=u},set stop(u){a=u},render(u,l){let d=s.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var Uy=t=>"playbackRate"in t;var Hy=t=>"frequency"in t&&"gain"in t;var $y=t=>"offset"in t;var Wy=t=>!("frequency"in t)&&"gain"in t;var zy=t=>"detune"in t&&"frequency"in t&&!("gain"in t);var Gy=t=>"pan"in t;var Xe=t=>qe(_c,t);var ur=t=>qe(vc,t);var Dc=(t,e)=>{let{activeInputs:n}=Xe(t);n.forEach(o=>o.forEach(([s])=>{e.includes(t)||Dc(s,[...e,t])}));let r=Uy(t)?[t.playbackRate]:wc(t)?Array.from(t.parameters.values()):Hy(t)?[t.Q,t.detune,t.frequency,t.gain]:$y(t)?[t.offset]:Wy(t)?[t.gain]:zy(t)?[t.detune,t.frequency]:Gy(t)?[t.pan]:[];for(let o of r){let s=ur(o);s!==void 0&&s.activeInputs.forEach(([i])=>Dc(i,e))}pt(t)&&In(t)};var lr=t=>{Dc(t.destination,[])};var Tc=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback");var Yy=(t,e,n,r,o,s,i,a,c)=>class extends t{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(l)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!Tc(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&d.sampleRate!==l.sampleRate)throw n();super(d,2);let{latencyHint:h}=l,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";let p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),lr(this)}))}createMediaElementSource(l){return new o(this,{mediaElement:l})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(l){return new i(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,d)=>{let h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?l():this.resume().then(l,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}};var Zy=(t,e,n,r,o,s,i,a)=>class extends t{constructor(u,l){let d=s(u),h=i(d),f=o(d,l,h),p=h?e(a):null;super(u,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var Qy=t=>{let e=new WeakMap,n=(r,o)=>O(null,null,function*(){let s=o.destination;return e.set(o,s),yield t(r,o,s),s});return{render(r,o){let s=e.get(o);return s!==void 0?Promise.resolve(s):n(r,o)}}};var Xy=(t,e,n,r,o,s,i,a)=>(c,u)=>{let l=u.listener,d=()=>{let T=new Float32Array(1),w=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),_=i(u),v=!1,F=[0,0,-1,0,1,0],H=[0,0,0],k=()=>{if(v)return;v=!0;let D=r(u,256,9,0);D.onaudioprocess=({inputBuffer:S})=>{let I=[s(S,T,0),s(S,T,1),s(S,T,2),s(S,T,3),s(S,T,4),s(S,T,5)];I.some((R,N)=>R!==F[N])&&(l.setOrientation(...I),F=I);let V=[s(S,T,6),s(S,T,7),s(S,T,8)];V.some((R,N)=>R!==H[N])&&(l.setPosition(...V),H=V)},w.connect(D)},M=D=>S=>{S!==F[D]&&(F[D]=S,l.setOrientation(...F))},$=D=>S=>{S!==H[D]&&(H[D]=S,l.setPosition(...H))},E=(D,S,I)=>{let V=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S});V.connect(w,0,D),V.start(),Object.defineProperty(V.offset,"defaultValue",{get(){return S}});let R=t({context:c},_,V.offset,Pe,Le);return a(R,"value",N=>()=>N.call(R),N=>ae=>{try{N.call(R,ae)}catch(_e){if(_e.code!==9)throw _e}k(),_&&I(ae)}),R.cancelAndHoldAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.cancelAndHoldAtTime),R.cancelScheduledValues=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.cancelScheduledValues),R.exponentialRampToValueAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.exponentialRampToValueAtTime),R.linearRampToValueAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.linearRampToValueAtTime),R.setTargetAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.setTargetAtTime),R.setValueAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.setValueAtTime),R.setValueCurveAtTime=(N=>_?()=>{throw o()}:(...ae)=>{let _e=N.apply(R,ae);return k(),_e})(R.setValueCurveAtTime),R};return{forwardX:E(0,0,M(0)),forwardY:E(1,0,M(1)),forwardZ:E(2,-1,M(2)),positionX:E(6,0,$(0)),positionY:E(7,0,$(1)),positionZ:E(8,0,$(2)),upX:E(3,0,M(3)),upY:E(4,1,M(4)),upZ:E(5,0,M(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:y,upX:C,upY:A,upZ:L}=l.forwardX===void 0?d():l;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return y},get upX(){return C},get upY(){return A},get upZ(){return L}}};var qr=t=>"context"in t;var dr=t=>qr(t[0]);var an=(t,e,n,r)=>{for(let o of t)if(n(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0};var rf=(t,e,[n,r],o)=>{an(t,[e,n,r],s=>s[0]===e&&s[1]===n,o)};var of=(t,[e,n,r],o)=>{let s=t.get(e);s===void 0?t.set(e,new Set([[n,r]])):an(s,[n,r],i=>i[0]===n,o)};var $t=t=>"inputs"in t;var Vo=(t,e,n,r)=>{if($t(e)){let o=e.inputs[r];return t.connect(o,n,0),[o,n,0]}return t.connect(e,n,r),[e,n,r]};var sf=(t,e,n)=>{for(let r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null};var Ky=(t,e,n)=>cr(t,r=>r[0]===e&&r[1]===n);var af=(t,e)=>{if(!En(t).delete(e))throw new Error("Missing the expected event listener.")};var cf=(t,e,n)=>{let r=qe(t,e),o=cr(r,s=>s[0]===n);return r.size===0&&t.delete(e),o};var jo=(t,e,n,r)=>{$t(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)};var Se=t=>qe(Ro,t);var Ur=t=>qe(pi,t);var Gn=t=>mi.has(t);var Bo=t=>!Cn.has(t);var uf=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{let r=t.createScriptProcessor(256,1,1),o=t.createGain(),s=t.createBuffer(1,2,44100),i=s.getChannelData(0);i[0]=1,i[1]=1;let a=t.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(t.destination),a.connect(o),a.disconnect(o),r.onaudioprocess=c=>{let u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}});var Sc=(t,e)=>{let n=new Map;for(let r of t)for(let o of r){let s=n.get(o);n.set(o,s===void 0?1:s+1)}n.forEach((r,o)=>e(o,r))};var Hr=t=>"context"in t;var Jy=t=>{let e=new Map;t.connect=(n=>(r,o=0,s=0)=>{let i=Hr(r)?n(r,o,s):n(r,o),a=e.get(r);return a===void 0?e.set(r,[{input:s,output:o}]):a.every(c=>c.input!==s||c.output!==o)&&a.push({input:s,output:o}),i})(t.connect.bind(t)),t.disconnect=(n=>(r,o,s)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(let[i,a]of e){let c=a.filter(u=>u.output!==r);c.length===0?e.delete(i):e.set(i,c)}else if(e.has(r))if(o===void 0)e.delete(r);else{let i=e.get(r);if(i!==void 0){let a=i.filter(c=>c.output!==o&&(c.input!==s||s===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(let[i,a]of e)a.forEach(c=>{Hr(i)?t.connect(i,c.output,c.input):t.connect(i,c.output)})})(t.disconnect)};var EI=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:s}=ur(e),{outputs:i}=Xe(t),a=En(t),c=u=>{let l=Se(t),d=Ur(e);if(u){let h=cf(s,t,n);rf(o,t,h,!1),!r&&!Gn(t)&&l.connect(d,n)}else{let h=Ky(o,t,n);of(s,h,!1),!r&&!Gn(t)&&l.disconnect(d,n)}};return an(i,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(c),pt(t)?rf(o,t,[n,c],!0):of(s,[t,n,c],!0),!0):!1},II=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:s}=Xe(e),i=sf(o[r],t,n);return i===null?[bc(s,t,n,r)[2],!1]:[i[2],!0]},AI=(t,e,n)=>{let{activeInputs:r,passiveInputs:o}=ur(e),s=sf(r,t,n);return s===null?[cf(o,t,n)[1],!1]:[s[2],!0]},lf=(t,e,n,r,o)=>{let[s,i]=II(t,n,r,o);if(s!==null&&(af(t,s),i&&!e&&!Gn(t)&&jo(Se(t),Se(n),r,o)),pt(n)){let{activeInputs:a}=Xe(n);_i(n,a)}},df=(t,e,n,r)=>{let[o,s]=AI(t,n,r);o!==null&&(af(t,o),s&&!e&&!Gn(t)&&Se(t).disconnect(Ur(n),r))},NI=(t,e)=>{let n=Xe(t),r=[];for(let o of n.outputs)dr(o)?lf(t,e,...o):df(t,e,...o),r.push(o[0]);return n.outputs.clear(),r},MI=(t,e,n)=>{let r=Xe(t),o=[];for(let s of r.outputs)s[1]===n&&(dr(s)?lf(t,e,...s):df(t,e,...s),o.push(s[0]),r.outputs.delete(s));return o},OI=(t,e,n,r,o)=>{let s=Xe(t);return Array.from(s.outputs).filter(i=>i[0]===n&&(r===void 0||i[1]===r)&&(o===void 0||i[2]===o)).map(i=>(dr(i)?lf(t,e,...i):df(t,e,...i),s.outputs.delete(i),i[0]))},e_=(t,e,n,r,o,s,i,a,c,u,l,d,h,f,p,m)=>class extends u{constructor(y,C,A,L){super(A),this._context=y,this._nativeAudioNode=A;let T=l(y);d(T)&&n(uf,()=>uf(T,m))!==!0&&Jy(A),Ro.set(this,A),xc.set(this,new Set),y.state!=="closed"&&C&&sn(this),t(this,L,A)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,C=0,A=0){if(C<0||C>=this._nativeAudioNode.numberOfOutputs)throw o();let L=l(this._context),T=p(L);if(h(y)||f(y))throw s();if(qr(y)){let v=Se(y);try{let H=Vo(this._nativeAudioNode,v,C,A),k=Bo(this);(T||k)&&this._nativeAudioNode.disconnect(...H),this.context.state!=="closed"&&!k&&Bo(y)&&sn(y)}catch(H){throw H.code===12?s():H}if(e(this,y,C,A,T)){let H=c([this],y);Sc(H,r(T))}return y}let w=Ur(y);if(w.name==="playbackRate"&&w.maxValue===1024)throw i();try{this._nativeAudioNode.connect(w,C),(T||Bo(this))&&this._nativeAudioNode.disconnect(w,C)}catch(v){throw v.code===12?s():v}if(EI(this,y,C,T)){let v=c([this],y);Sc(v,r(T))}}disconnect(y,C,A){let L,T=l(this._context),w=p(T);if(y===void 0)L=NI(this,w);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw o();L=MI(this,w,y)}else{if(C!==void 0&&(C<0||C>=this.numberOfOutputs)||qr(y)&&A!==void 0&&(A<0||A>=y.numberOfInputs))throw o();if(L=OI(this,w,y,C,A),L.length===0)throw s()}for(let _ of L){let v=c([this],_);Sc(v,a)}}};var t_=Kf(tf()),n_=(t,e,n,r,o,s,i,a,c,u,l,d,h)=>(f,p,m,g=null,y=null)=>{let C=m.value,A=new t_.AutomationEventList(C),L=p?r(A):null,T={get defaultValue(){return C},get maxValue(){return g===null?m.maxValue:g},get minValue(){return y===null?m.minValue:y},get value(){return m.value},set value(w){m.value=w,T.setValueAtTime(w,f.context.currentTime)},cancelAndHoldAtTime(w){if(typeof m.cancelAndHoldAtTime=="function")L===null&&A.flush(f.context.currentTime),A.add(o(w)),m.cancelAndHoldAtTime(w);else{let _=Array.from(A).pop();L===null&&A.flush(f.context.currentTime),A.add(o(w));let v=Array.from(A).pop();m.cancelScheduledValues(w),_!==v&&v!==void 0&&(v.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(v.value,v.endTime):v.type==="linearRampToValue"?m.linearRampToValueAtTime(v.value,v.endTime):v.type==="setValue"?m.setValueAtTime(v.value,v.startTime):v.type==="setValueCurve"&&m.setValueCurveAtTime(v.values,v.startTime,v.duration))}return T},cancelScheduledValues(w){return L===null&&A.flush(f.context.currentTime),A.add(s(w)),m.cancelScheduledValues(w),T},exponentialRampToValueAtTime(w,_){if(w===0)throw new RangeError;if(!Number.isFinite(_)||_<0)throw new RangeError;let v=f.context.currentTime;return L===null&&A.flush(v),Array.from(A).length===0&&(A.add(u(C,v)),m.setValueAtTime(C,v)),A.add(i(w,_)),m.exponentialRampToValueAtTime(w,_),T},linearRampToValueAtTime(w,_){let v=f.context.currentTime;return L===null&&A.flush(v),Array.from(A).length===0&&(A.add(u(C,v)),m.setValueAtTime(C,v)),A.add(a(w,_)),m.linearRampToValueAtTime(w,_),T},setTargetAtTime(w,_,v){return L===null&&A.flush(f.context.currentTime),A.add(c(w,_,v)),m.setTargetAtTime(w,_,v),T},setValueAtTime(w,_){return L===null&&A.flush(f.context.currentTime),A.add(u(w,_)),m.setValueAtTime(w,_),T},setValueCurveAtTime(w,_,v){let F=w instanceof Float32Array?w:new Float32Array(w);if(d!==null&&d.name==="webkitAudioContext"){let H=_+v,k=f.context.sampleRate,M=Math.ceil(_*k),$=Math.floor(H*k),E=$-M,D=new Float32Array(E);for(let I=0;I<E;I+=1){let V=(F.length-1)/v*((M+I)/k-_),R=Math.floor(V),N=Math.ceil(V);D[I]=R===N?F[R]:(1-(V-R))*F[R]+(1-(N-V))*F[N]}L===null&&A.flush(f.context.currentTime),A.add(l(D,_,v)),m.setValueCurveAtTime(D,_,v);let S=$/k;S<H&&h(T,D[D.length-1],S),h(T,F[F.length-1],H)}else L===null&&A.flush(f.context.currentTime),A.add(l(F,_,v)),m.setValueCurveAtTime(F,_,v);return T}};return n.set(T,m),e.set(T,f),t(T,L),T};var r_=t=>({replay(e){for(let n of t)if(n.type==="exponentialRampToValue"){let{endTime:r,value:o}=n;e.exponentialRampToValueAtTime(o,r)}else if(n.type==="linearRampToValue"){let{endTime:r,value:o}=n;e.linearRampToValueAtTime(o,r)}else if(n.type==="setTarget"){let{startTime:r,target:o,timeConstant:s}=n;e.setTargetAtTime(o,r,s)}else if(n.type==="setValue"){let{startTime:r,value:o}=n;e.setValueAtTime(o,r)}else if(n.type==="setValueCurve"){let{duration:r,startTime:o,values:s}=n;e.setValueCurveAtTime(s,o,r)}else throw new Error("Can't apply an unknown automation.")}});var qo=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,o)=>e.call(n,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var kI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},o_=(t,e,n,r,o,s,i,a,c,u,l,d,h,f)=>class extends e{constructor(m,g,y){var C;let A=a(m),L=c(A),T=l(b(b({},kI),y));h(T);let w=gi.get(A),_=w?.get(g),v=L||A.state!=="closed"?A:(C=i(A))!==null&&C!==void 0?C:A,F=o(v,L?null:m.baseLatency,u,g,_,T),H=L?r(g,T,_):null;super(m,!0,F,H);let k=[];F.parameters.forEach(($,E)=>{let D=n(this,L,$);k.push([E,D])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new qo(k),L&&t(A,this);let{activeInputs:M}=s(this);d(F,M)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){let g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;let y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===g?m:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Uo(t,e,n,r,o){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,o);else{let s=t.getChannelData(r);if(e[n].byteLength===0)e[n]=s.slice(o,o+128);else{let i=new Float32Array(s.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(i)}}}var Cc=(t,e,n,r,o)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,o):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],o)};var Ho=(t,e)=>{let n=[];for(let r=0;r<t;r+=1){let o=[],s=typeof e=="number"?e:e[r];for(let i=0;i<s;i+=1)o.push(new Float32Array(128));n.push(o)}return n};var s_=(t,e)=>{let n=qe(yi,t),r=Se(e);return qe(n,r)};var RI=(t,e,n,r,o,s,i)=>O(null,null,function*(){let a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,u=o.reduce((g,y)=>g+y,0),l=u===0?null:n.createBuffer(u,a,n.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");let d=Xe(t),h=yield s_(n,t),f=Ho(r.numberOfInputs,r.channelCount),p=Ho(r.numberOfOutputs,o),m=Array.from(t.parameters.keys()).reduce((g,y)=>j(b({},g),{[y]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(r.numberOfInputs>0&&e!==null)for(let y=0;y<r.numberOfInputs;y+=1)for(let C=0;C<r.channelCount;C+=1)Uo(e,f[y],C,C,g);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:y},C)=>{Uo(e,m,y,c+C,g)});for(let y=0;y<r.numberOfInputs;y+=1)for(let C=0;C<o[y];C+=1)p[y][C].byteLength===0&&(p[y][C]=new Float32Array(128));try{let y=f.map((A,L)=>d.activeInputs[L].size===0?[]:A),C=i(g/n.sampleRate,n.sampleRate,()=>h.process(y,p,m));if(l!==null)for(let A=0,L=0;A<r.numberOfOutputs;A+=1){for(let T=0;T<o[A];T+=1)Cc(l,p[A],T,L+T,g);L+=o[A]}if(!C)break}catch(y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return l}),i_=(t,e,n,r,o,s,i,a,c,u,l,d,h,f,p,m)=>(g,y,C)=>{let A=new WeakMap,L=null,T=(w,_)=>O(null,null,function*(){let v=l(w),F=null,H=ve(v,_),k=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(d===null){let M=k.reduce((S,I)=>S+I,0),$=o(_,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),E=[];for(let S=0;S<w.numberOfOutputs;S+=1)E.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[S]}));let D=i(_,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});D.connect=e.bind(null,E),D.disconnect=c.bind(null,E),F=[$,E,D]}else H||(v=new d(_,g));if(A.set(_,F===null?v:F[2]),F!==null){if(L===null){if(C===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");let I=w.channelCount*w.numberOfInputs,V=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length,R=I+V;L=RI(w,R===0?null:yield O(null,null,function*(){let ae=new h(R,Math.ceil(w.context.length/128)*128,_.sampleRate),_e=[],Ae=[];for(let pe=0;pe<y.numberOfInputs;pe+=1)_e.push(i(ae,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),Ae.push(o(ae,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));let tt=yield Promise.all(Array.from(w.parameters.values()).map(pe=>O(null,null,function*(){let X=s(ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:pe.value});return yield f(ae,pe,X.offset),X}))),ze=r(ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+V)});for(let pe=0;pe<y.numberOfInputs;pe+=1){_e[pe].connect(Ae[pe]);for(let X=0;X<y.channelCount;X+=1)Ae[pe].connect(ze,X,pe*y.channelCount+X)}for(let[pe,X]of tt.entries())X.connect(ze,0,I+pe),X.start(0);return ze.connect(ae.destination),yield Promise.all(_e.map(pe=>p(w,ae,pe))),m(ae)}),_,y,k,C,u)}let M=yield L,$=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[E,D,S]=F;M!==null&&($.buffer=M,$.start(0)),$.connect(E);for(let I=0,V=0;I<w.numberOfOutputs;I+=1){let R=D[I];for(let N=0;N<k[I];N+=1)E.connect(R,V+N,N);V+=k[I]}return S}if(H)for(let[M,$]of w.parameters.entries())yield t(_,$,v.parameters.get(M));else for(let[M,$]of w.parameters.entries())yield f(_,$,v.parameters.get(M));return yield p(w,_,v),v});return{render(w,_){a(_,w);let v=A.get(_);return v!==void 0?Promise.resolve(v):T(w,_)}}};var a_=(t,e,n,r,o,s,i,a,c,u,l,d,h,f,p,m,g,y,C,A)=>class extends p{constructor(T,w){super(T,w),this._nativeContext=T,this._audioWorklet=t===void 0?void 0:{addModule:(_,v)=>t(this,_,v)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(T,w,_){return new n({length:w,numberOfChannels:T,sampleRate:_})}createBufferSource(){return new r(this)}createChannelMerger(T=6){return new s(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new i(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(T=1){return new l(this,{maxDelayTime:T})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(T,w){return new f(this,{feedback:w,feedforward:T})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(T,w,_={disableNormalization:!1}){return new y(this,j(b({},_),{imag:w,real:T}))}createStereoPanner(){return new C(this)}createWaveShaper(){return new A(this)}decodeAudioData(T,w,_){return u(this._nativeContext,T).then(v=>(typeof w=="function"&&w(v),v),v=>{throw typeof _=="function"&&_(v),v})}};var FI={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},c_=(t,e,n,r,o,s,i,a)=>class extends t{constructor(u,l){let d=s(u),h=b(b({},FI),l),f=o(d,h),p=i(d),m=p?n():null;super(u,!1,f,m),this._Q=e(this,p,f.Q,Pe,Le),this._detune=e(this,p,f.detune,1200*Math.log2(Pe),-1200*Math.log2(Pe)),this._frequency=e(this,p,f.frequency,u.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Pe),Le),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,d)}catch(h){throw h.code===11?r():h}if(u.length!==l.length||l.length!==d.length)throw r()}};var u_=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=(a,c)=>O(null,null,function*(){let u=n(a),l=ve(u,c);if(!l){let d={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,d)}return s.set(c,u),l?(yield t(c,a.Q,u.Q),yield t(c,a.detune,u.detune),yield t(c,a.frequency,u.frequency),yield t(c,a.gain,u.gain)):(yield r(c,a.Q,u.Q),yield r(c,a.detune,u.detune),yield r(c,a.frequency,u.frequency),yield r(c,a.gain,u.gain)),yield o(a,c,u),u});return{render(a,c){let u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}};var l_=(t,e)=>(n,r)=>{let o=e.get(n);if(o!==void 0)return o;let s=t.get(n);if(s!==void 0)return s;try{let i=r();return i instanceof Promise?(t.set(n,i),i.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,i),i)}catch{return e.set(n,!1),!1}};var PI={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},d_=(t,e,n,r,o)=>class extends t{constructor(i,a){let c=r(i),u=b(b({},PI),a),l=n(c,u),d=o(c)?e():null;super(i,!1,l,d)}};var f_=(t,e,n)=>()=>{let r=new WeakMap,o=(s,i)=>O(null,null,function*(){let a=e(s);if(!ve(a,i)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(i,u)}return r.set(i,a),yield n(s,i,a),a});return{render(s,i){let a=r.get(i);return a!==void 0?Promise.resolve(a):o(s,i)}}};var LI={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},h_=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=r(a),l=s(b(b({},LI),c)),d=n(u,l),h=o(u)?e():null;super(a,!1,d,h)}};var p_=(t,e,n)=>()=>{let r=new WeakMap,o=(s,i)=>O(null,null,function*(){let a=e(s);if(!ve(a,i)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(i,u)}return r.set(i,a),yield n(s,i,a),a});return{render(s,i){let a=r.get(i);return a!==void 0?Promise.resolve(a):o(s,i)}}};var m_=t=>(e,n,r)=>t(n,e,r);var g_=t=>(e,n,r=0,o=0)=>{let s=e[r];if(s===void 0)throw t();return Hr(n)?s.connect(n,0,o):s.connect(n,0)};var y_=t=>(e,n)=>{let r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}};var VI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},__=(t,e,n,r,o,s,i)=>class extends t{constructor(c,u){let l=o(c),d=b(b({},VI),u),h=r(l,d),f=s(l),p=f?n():null;super(c,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Pe,Le),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?i(this,c):null;this._nativeConstantSourceNode.onended=u;let l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){sn(this);let u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),pt(this)&&In(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var v_=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=null,a=null,c=(u,l)=>O(null,null,function*(){let d=n(u),h=ve(d,l);if(!h){let f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(l,f),i!==null&&d.start(i),a!==null&&d.stop(a)}return s.set(l,d),h?yield t(l,u.offset,d.offset):yield r(l,u.offset,d.offset),yield o(u,l,d),d});return{set start(u){i=u},set stop(u){a=u},render(u,l){let d=s.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var x_=t=>e=>(t[0]=e,t[0]);var jI={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},b_=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=r(a),l=b(b({},jI),c),d=n(u,l),f=o(u)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,l.buffer!==null&&s(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var w_=(t,e,n)=>()=>{let r=new WeakMap,o=(s,i)=>O(null,null,function*(){let a=e(s);if(!ve(a,i)){let u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(i,u)}return r.set(i,a),$t(a)?yield n(s,i,a.inputs[0]):yield n(s,i,a),a});return{render(s,i){let a=r.get(i);return a!==void 0?Promise.resolve(a):o(s,i)}}};var D_=(t,e)=>(n,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,o)}catch(s){throw s.name==="SyntaxError"?t():s}};var T_=()=>new DOMException("","DataCloneError");var ff=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{let o=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>o();try{e.postMessage(t,[t])}catch{}finally{o()}})};var S_=(t,e,n,r,o,s,i,a,c,u,l)=>(d,h)=>{let f=i(d)?d:s(d);if(o.has(h)){let p=n();return Promise.reject(p)}try{o.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(p=>(ff(h).catch(()=>{}),e(a,()=>a(p))||l(p),t.add(p),p)):new Promise((p,m)=>{let g=()=>O(null,null,function*(){try{yield ff(h)}catch{}}),y=C=>{m(C),g()};try{f.decodeAudioData(h,C=>{typeof C.copyFromChannel!="function"&&(u(C),Lo(C)),t.add(C),g().then(()=>p(C))},C=>{y(C===null?r():C)})}catch(C){y(C)}})};var C_=(t,e,n,r,o,s,i,a)=>(c,u)=>{let l=e.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");let d=s(c.context),h=a(d);if(l===u){if(e.delete(c),!h&&i(c)){let f=r(c),{outputs:p}=n(c);for(let m of p)if(dr(m)){let g=r(m[0]);t(f,g,m[1],m[2])}else{let g=o(m[0]);f.connect(g,m[1])}}}else e.set(c,l-u)};var BI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},E_=(t,e,n,r,o,s,i)=>class extends t{constructor(c,u){let l=o(c),d=b(b({},BI),u),h=r(l,d),f=s(l),p=f?n(d.maxDelayTime):null;super(c,!1,h,p),this._delayTime=e(this,f,h.delayTime),i(this,d.maxDelayTime)}get delayTime(){return this._delayTime}};var I_=(t,e,n,r,o)=>s=>{let i=new WeakMap,a=(c,u)=>O(null,null,function*(){let l=n(c),d=ve(l,u);if(!d){let h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:s};l=e(u,h)}return i.set(u,l),d?yield t(u,c.delayTime,l.delayTime):yield r(u,c.delayTime,l.delayTime),yield o(c,u,l),l});return{render(c,u){let l=i.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}};var A_=t=>(e,n,r,o)=>t(e[o],s=>s[0]===n&&s[1]===r);var N_=t=>(e,n)=>{t(e).delete(n)};var M_=t=>"delayTime"in t;var O_=(t,e,n)=>function r(o,s){let i=qr(s)?s:n(t,s);if(M_(i))return[];if(o[0]===i)return[o];if(o.includes(i))return[];let{outputs:a}=e(i);return Array.from(a).map(c=>r([...o,i],c[0])).reduce((c,u)=>c.concat(u),[])};var Ec=(t,e,n)=>{let r=e[n];if(r===void 0)throw t();return r},k_=t=>(e,n=void 0,r=void 0,o=0)=>n===void 0?e.forEach(s=>s.disconnect()):typeof n=="number"?Ec(t,e,n).disconnect():Hr(n)?r===void 0?e.forEach(s=>s.disconnect(n)):o===void 0?Ec(t,e,r).disconnect(n,0):Ec(t,e,r).disconnect(n,0,o):r===void 0?e.forEach(s=>s.disconnect(n)):Ec(t,e,r).disconnect(n,0);var qI={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},R_=(t,e,n,r,o,s,i,a)=>class extends t{constructor(u,l){let d=s(u),h=b(b({},qI),l),f=r(d,h),p=i(d),m=p?n():null;super(u,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){let l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){let l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var F_=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=(a,c)=>O(null,null,function*(){let u=n(a),l=ve(u,c);if(!l){let d={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,d)}return s.set(c,u),l?(yield t(c,a.attack,u.attack),yield t(c,a.knee,u.knee),yield t(c,a.ratio,u.ratio),yield t(c,a.release,u.release),yield t(c,a.threshold,u.threshold)):(yield r(c,a.attack,u.attack),yield r(c,a.knee,u.knee),yield r(c,a.ratio,u.ratio),yield r(c,a.release,u.release),yield r(c,a.threshold,u.threshold)),yield o(a,c,u),u});return{render(a,c){let u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}};var P_=()=>new DOMException("","EncodingError");var L_=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}let o=t.document.head;if(o===null)r(new SyntaxError);else{let s=t.document.createElement("script"),i=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(i),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(l,d,h,f,p)=>{if(d===a||d===t.location.href&&h===1&&f===1)return u(),r(p),!1;if(c!==null)return c(l,d,h,f,p)},s.onerror=()=>{u(),r(new SyntaxError)},s.onload=()=>{u(),n()},s.src=a,s.type="module",o.appendChild(s)}});var V_=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,o){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=t(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(n,s,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,o){let s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,s===void 0?null:s,o)}};var j_=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}};var B_=t=>e=>O(null,null,function*(){try{let n=yield fetch(e);if(n.ok)return[yield n.text(),n.url]}catch{}throw t()});var UI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},q_=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=o(a),l=b(b({},UI),c),d=r(u,l),h=s(u),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,Pe,Le)}get gain(){return this._gain}};var U_=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=(a,c)=>O(null,null,function*(){let u=n(a),l=ve(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,d)}return s.set(c,u),l?yield t(c,a.gain,u.gain):yield r(c,a.gain,u.gain),yield o(a,c,u),u});return{render(a,c){let u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}};var H_=(t,e)=>n=>e(t,n);var $_=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer};var W_=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0};var z_=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer};var G_=t=>e=>t.get(e);var Oe=()=>new DOMException("","InvalidStateError");var Y_=t=>e=>{let n=t.get(e);if(n===void 0)throw Oe();return n};var Z_=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r};var Q_=t=>e=>{let n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n};var $o=()=>new DOMException("","InvalidAccessError");var X_=t=>{t.getFrequencyResponse=(e=>(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw $o();return e.call(t,n,r,o)})(t.getFrequencyResponse)};var HI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},K_=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=r(a),l=o(u),d=b(b({},HI),c),h=e(u,l?null:a.baseLatency,d),f=l?n(d.feedback,d.feedforward):null;super(a,!1,h,f),X_(h),this._nativeIIRFilterNode=h,s(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}};var Ic=(t,e,n,r,o,s,i,a,c,u,l)=>{let d=u.length,h=a;for(let f=0;f<d;f+=1){let p=n[0]*u[f];for(let m=1;m<o;m+=1){let g=h-m&c-1;p+=n[m]*s[g],p-=t[m]*i[g]}for(let m=o;m<r;m+=1)p+=n[m]*s[h-m&c-1];for(let m=o;m<e;m+=1)p-=t[m]*i[h-m&c-1];s[h]=u[f],i[h]=p,h=h+1&c-1,l[f]=p}return h};var $I=(t,e,n,r)=>{let o=n instanceof Float64Array?n:new Float64Array(n),s=r instanceof Float64Array?r:new Float64Array(r),i=o.length,a=s.length,c=Math.min(i,a);if(o[0]!==1){for(let p=0;p<i;p+=1)s[p]/=o[0];for(let p=1;p<a;p+=1)o[p]/=o[0]}let u=32,l=new Float32Array(u),d=new Float32Array(u),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){let m=t.getChannelData(p),g=h.getChannelData(p);l.fill(0),d.fill(0),Ic(o,i,s,a,c,l,d,0,u,m,g)}return h},J_=(t,e,n,r,o)=>(s,i)=>{let a=new WeakMap,c=null,u=(l,d)=>O(null,null,function*(){let h=null,f=e(l),p=ve(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=d.createIIRFilter(i,s)),a.set(d,h===null?f:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");let g=new n(l.context.destination.channelCount,l.context.length,d.sampleRate);c=O(null,null,function*(){yield r(l,g,g.destination);let y=yield o(g);return $I(y,d,s,i)})}let m=yield c;return h.buffer=m,h.start(0),h}return yield r(l,d,f),f});return{render(l,d){let h=a.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var ev=(t,e,n,r,o,s)=>i=>(a,c)=>{let u=t.get(a);if(u===void 0){if(!i&&s(a)){let l=r(a),{outputs:d}=n(a);for(let h of d)if(dr(h)){let f=r(h[0]);e(l,f,h[1],h[2])}else{let f=o(h[0]);l.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,u+c)};var tv=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var nv=(t,e)=>n=>t.has(n)||e(n);var rv=(t,e)=>n=>t.has(n)||e(n);var ov=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var sv=t=>e=>t!==null&&e instanceof t;var iv=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode;var av=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam;var cv=(t,e)=>n=>t(n)||e(n);var uv=t=>e=>t!==null&&e instanceof t;var lv=t=>t!==null&&t.isSecureContext;var dv=(t,e,n,r)=>class extends t{constructor(s,i){let a=n(s),c=e(a,i);if(r(a))throw TypeError();super(s,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var WI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},fv=(t,e,n,r)=>class extends t{constructor(s,i){let a=n(s);if(r(a))throw new TypeError;let c=b(b({},WI),i),u=e(a,c);super(s,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var hv=(t,e,n,r)=>class extends t{constructor(s,i){let a=n(s),c=e(a,i);if(r(a))throw new TypeError;super(s,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var pv=(t,e,n)=>class extends t{constructor(o,s){let i=n(o),a=e(i,s);super(o,!0,a,null)}};var mv=(t,e,n,r,o)=>class extends r{constructor(i={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new o(i)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?e():l}if(a===null)throw n();if(!Tc(i.latencyHint))throw new TypeError(`The provided value '${i.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(i.sampleRate!==void 0&&a.sampleRate!==i.sampleRate)throw e();super(a,2);let{latencyHint:c}=i,{sampleRate:u}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/u:c==="interactive"||c===void 0?256/u:c==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(c*u/128)))*128/u,this._nativeAudioContext=a,o.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let l=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",l)};a.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),lr(this)}))}resume(){return this._state==="suspended"?new Promise((i,a)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?i():this.resume().then(i,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(i=>{throw i===void 0||i.code===15?t():i})}suspend(){return this._nativeAudioContext.suspend().catch(i=>{throw i===void 0?t():i})}};var gv=(t,e,n,r,o,s)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Fo.set(this,a),r(a)&&o.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let c=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=c;let u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var cn=t=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1};var zI={numberOfChannels:1},yv=(t,e,n,r,o)=>class extends r{constructor(i){let{length:a,numberOfChannels:c,sampleRate:u}=b(b({},zI),i),l=n(c,a,u);t(cn,()=>cn(l))||l.addEventListener("statechange",(()=>{let d=0,h=f=>{this._state==="running"&&(d>0?(l.removeEventListener("statechange",h),f.stopImmediatePropagation(),this._waitForThePromiseToSettle(f)):d+=1)};return h})()),super(l,c),this._length=a,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,lr(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}};var _v=(t,e)=>(n,r,o)=>{let s=new Set;return n.connect=(i=>(a,c=0,u=0)=>{let l=s.size===0;if(e(a))return i.call(n,a,c,u),t(s,[a,c,u],d=>d[0]===a&&d[1]===c&&d[2]===u,!0),l&&r(),a;i.call(n,a,c),t(s,[a,c],d=>d[0]===a&&d[1]===c,!0),l&&r()})(n.connect),n.disconnect=(i=>(a,c,u)=>{let l=s.size>0;if(a===void 0)i.apply(n),s.clear();else if(typeof a=="number"){i.call(n,a);for(let h of s)h[1]===a&&s.delete(h)}else{e(a)?i.call(n,a,c,u):i.call(n,a,c);for(let h of s)h[0]===a&&(c===void 0||h[1]===c)&&(u===void 0||h[2]===u)&&s.delete(h)}let d=s.size===0;l&&d&&o()})(n.disconnect),n};var xe=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)};var de=(t,e)=>{xe(t,e,"channelCount"),xe(t,e,"channelCountMode"),xe(t,e,"channelInterpretation")};var hf=t=>typeof t.getFloatTimeDomainData=="function";var vv=t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let r=Math.max(n.length,t.fftSize);for(let o=0;o<r;o+=1)e[o]=(n[o]-128)*.0078125;return e}};var xv=(t,e)=>(n,r)=>{let o=n.createAnalyser();if(de(o,r),!(r.maxDecibels>r.minDecibels))throw e();return xe(o,r,"fftSize"),xe(o,r,"maxDecibels"),xe(o,r,"minDecibels"),xe(o,r,"smoothingTimeConstant"),t(hf,()=>hf(o))||vv(o),o};var bv=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null;var we=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)};var wv=t=>{t.start=(e=>{let n=!1;return(r=0,o=0,s)=>{if(n)throw Oe();e.call(t,r,o,s),n=!0}})(t.start)};var Wo=t=>{t.start=(e=>(n=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,o)})(t.start)};var zo=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)};var Dv=(t,e,n,r,o,s,i,a,c,u,l)=>(d,h)=>{let f=d.createBufferSource();return de(f,h),we(f,h,"playbackRate"),xe(f,h,"buffer"),xe(f,h,"loop"),xe(f,h,"loopEnd"),xe(f,h,"loopStart"),e(n,()=>n(d))||wv(f),e(r,()=>r(d))||c(f),e(o,()=>o(d))||u(f,d),e(s,()=>s(d))||Wo(f),e(i,()=>i(d))||l(f,d),e(a,()=>a(d))||zo(f),t(d,f),f};var Tv=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;var Sv=(t,e)=>(n,r,o)=>{let s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}o&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});let i=t(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(i,"channelCount",a=>()=>a.call(i),a=>c=>{a.call(i,c);try{s.channelCount=c}catch(u){if(c>s.maxChannelCount)throw u}}),e(i,"channelCountMode",a=>()=>a.call(i),a=>c=>{a.call(i,c),s.channelCountMode=c}),e(i,"channelInterpretation",a=>()=>a.call(i),a=>c=>{a.call(i,c),s.channelInterpretation=c}),Object.defineProperty(i,"maxChannelCount",{get:()=>s.maxChannelCount}),i.connect(s),i};var Cv=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null;var Ev=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}};var Iv=(t,e,n,r,o)=>(s,i,a,c,u,l)=>{if(a!==null)try{let d=new a(s,c,l),h=new Map,f=null;if(Object.defineProperties(d,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){let y=h.get(m[1]);y!==void 0?m[1]=y:(m[1]=C=>{C.type==="error"?(Object.defineProperties(C,{type:{value:"processorerror"}}),g(C)):g(new ErrorEvent(m[0],b({},C)))},h.set(g,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=h.get(m[1]);g!==void 0&&(h.delete(m[1]),m[1]=g)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),l.numberOfOutputs!==0){let p=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(s.destination),o(d,()=>p.disconnect(),()=>p.connect(s.destination))}return d}catch(d){throw d.code===11?r():d}if(u===void 0)throw r();return Ev(l),e(s,i,u,l)};var Ac=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))));var Av=t=>new Promise((e,n)=>{let{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),o.close(),e(s)},r.onmessageerror=({data:s})=>{r.close(),o.close(),n(s)},o.postMessage(t)});var Nv=(t,e)=>O(null,null,function*(){let n=yield Av(e);return new t(n)});var Mv=(t,e,n,r)=>{let o=yi.get(t);o===void 0&&(o=new WeakMap,yi.set(t,o));let s=Nv(n,r);return o.set(e,s),s};var Ov=(t,e,n,r,o,s,i,a,c,u,l,d,h)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();let y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some(q=>q<1))throw c();if(y.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();let C=g.channelCount*g.numberOfInputs,A=y.reduce((q,J)=>q+J,0),L=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(C+L>6||A>6)throw c();let T=new MessageChannel,w=[],_=[];for(let q=0;q<g.numberOfInputs;q+=1)w.push(i(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),_.push(o(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let v=[];if(m.parameterDescriptors!==void 0)for(let{defaultValue:q,maxValue:J,minValue:Ge,name:ke}of m.parameterDescriptors){let be=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[ke]!==void 0?g.parameterData[ke]:q===void 0?0:q});Object.defineProperties(be.offset,{defaultValue:{get:()=>q===void 0?0:q},maxValue:{get:()=>J===void 0?Pe:J},minValue:{get:()=>Ge===void 0?Le:Ge}}),v.push(be)}let F=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,C+L)}),H=Ac(p,f.sampleRate),k=a(f,H,C+L,Math.max(1,A)),M=o(f,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),$=[];for(let q=0;q<g.numberOfOutputs;q+=1)$.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[q]}));for(let q=0;q<g.numberOfInputs;q+=1){w[q].connect(_[q]);for(let J=0;J<g.channelCount;J+=1)_[q].connect(F,J,q*g.channelCount+J)}let E=new qo(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:q},J)=>{let Ge=v[J];return Ge.connect(F,0,C+J),Ge.start(0),[q,Ge.offset]}));F.connect(k);let D=g.channelInterpretation,S=null,I=g.numberOfOutputs===0?[k]:$,V={get bufferSize(){return H},get channelCount(){return g.channelCount},set channelCount(q){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(q){throw n()},get channelInterpretation(){return D},set channelInterpretation(q){for(let J of w)J.channelInterpretation=q;D=q},get context(){return k.context},get inputs(){return w},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return S},set onprocessorerror(q){typeof S=="function"&&V.removeEventListener("processorerror",S),S=typeof q=="function"?q:null,typeof S=="function"&&V.addEventListener("processorerror",S)},get parameters(){return E},get port(){return T.port2},addEventListener(...q){return k.addEventListener(q[0],q[1],q[2])},connect:t.bind(null,I),disconnect:u.bind(null,I),dispatchEvent(...q){return k.dispatchEvent(q[0])},removeEventListener(...q){return k.removeEventListener(q[0],q[1],q[2])}},R=new Map;T.port1.addEventListener=(q=>(...J)=>{if(J[0]==="message"){let Ge=typeof J[1]=="function"?J[1]:typeof J[1]=="object"&&J[1]!==null&&typeof J[1].handleEvent=="function"?J[1].handleEvent:null;if(Ge!==null){let ke=R.get(J[1]);ke!==void 0?J[1]=ke:(J[1]=be=>{l(f.currentTime,f.sampleRate,()=>Ge(be))},R.set(Ge,J[1]))}}return q.call(T.port1,J[0],J[1],J[2])})(T.port1.addEventListener),T.port1.removeEventListener=(q=>(...J)=>{if(J[0]==="message"){let Ge=R.get(J[1]);Ge!==void 0&&(R.delete(J[1]),J[1]=Ge)}return q.call(T.port1,J[0],J[1],J[2])})(T.port1.removeEventListener);let N=null;Object.defineProperty(T.port1,"onmessage",{get:()=>N,set:q=>{typeof N=="function"&&T.port1.removeEventListener("message",N),N=typeof q=="function"?q:null,typeof N=="function"&&(T.port1.addEventListener("message",N),T.port1.start())}}),m.prototype.port=T.port1;let ae=null;Mv(f,V,m,g).then(q=>ae=q);let Ae=Ho(g.numberOfInputs,g.channelCount),tt=Ho(g.numberOfOutputs,y),ze=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((q,{name:J})=>j(b({},q),{[J]:new Float32Array(128)}),{}),pe=!0,X=()=>{g.numberOfOutputs>0&&k.disconnect(M);for(let q=0,J=0;q<g.numberOfOutputs;q+=1){let Ge=$[q];for(let ke=0;ke<y[q];ke+=1)M.disconnect(Ge,J+ke,ke);J+=y[q]}},Zt=new Map;k.onaudioprocess=({inputBuffer:q,outputBuffer:J})=>{if(ae!==null){let Ge=d(V);for(let ke=0;ke<H;ke+=128){for(let be=0;be<g.numberOfInputs;be+=1)for(let Re=0;Re<g.channelCount;Re+=1)Uo(q,Ae[be],Re,Re,ke);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:be},Re)=>{Uo(q,ze,be,C+Re,ke)});for(let be=0;be<g.numberOfInputs;be+=1)for(let Re=0;Re<y[be];Re+=1)tt[be][Re].byteLength===0&&(tt[be][Re]=new Float32Array(128));try{let be=Ae.map((Pt,Jn)=>{if(Ge[Jn].size>0)return Zt.set(Jn,H/128),Pt;let iu=Zt.get(Jn);return iu===void 0?[]:(Pt.every($b=>$b.every(Wb=>Wb===0))&&(iu===1?Zt.delete(Jn):Zt.set(Jn,iu-1)),Pt)});pe=l(f.currentTime+ke/f.sampleRate,f.sampleRate,()=>ae.process(be,tt,ze));for(let Pt=0,Jn=0;Pt<g.numberOfOutputs;Pt+=1){for(let gs=0;gs<y[Pt];gs+=1)Cc(J,tt[Pt],gs,Jn+gs,ke);Jn+=y[Pt]}}catch(be){pe=!1,V.dispatchEvent(new ErrorEvent("processorerror",{colno:be.colno,filename:be.filename,lineno:be.lineno,message:be.message}))}if(!pe){for(let be=0;be<g.numberOfInputs;be+=1){w[be].disconnect(_[be]);for(let Re=0;Re<g.channelCount;Re+=1)_[ke].disconnect(F,Re,be*g.channelCount+Re)}if(m.parameterDescriptors!==void 0){let be=m.parameterDescriptors.length;for(let Re=0;Re<be;Re+=1){let Pt=v[Re];Pt.disconnect(F,0,C+Re),Pt.stop()}}F.disconnect(k),k.onaudioprocess=null,gn?X():Ft();break}}}};let gn=!1,W=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Pn=()=>k.connect(W).connect(f.destination),Ft=()=>{k.disconnect(W),W.disconnect()},yn=()=>{if(pe){Ft(),g.numberOfOutputs>0&&k.connect(M);for(let q=0,J=0;q<g.numberOfOutputs;q+=1){let Ge=$[q];for(let ke=0;ke<y[q];ke+=1)M.connect(Ge,J+ke,ke);J+=y[q]}}gn=!0},Kn=()=>{pe&&(Pn(),X()),gn=!1};return Pn(),h(V,yn,Kn)};var pf=(t,e)=>{let n=t.createBiquadFilter();return de(n,e),we(n,e,"Q"),we(n,e,"detune"),we(n,e,"frequency"),we(n,e,"gain"),xe(n,e,"type"),n};var kv=(t,e)=>(n,r)=>{let o=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,o),de(o,r),o};var Rv=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Oe()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Oe()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Oe()}})};var Go=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return de(n,e),Rv(n),n};var Fv=(t,e,n,r,o)=>(s,i)=>{if(s.createConstantSource===void 0)return n(s,i);let a=s.createConstantSource();return de(a,i),we(a,i,"offset"),e(r,()=>r(s))||Wo(a),e(o,()=>o(s))||zo(a),t(s,a),a};var Wt=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t);var Pv=(t,e,n,r)=>(o,a)=>{var c=a,{offset:s}=c,i=er(c,["offset"]);let u=o.createBuffer(1,2,44100),l=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(o,j(b({},i),{gain:s})),h=u.getChannelData(0);h[0]=1,h[1]=1,l.buffer=u,l.loop=!0;let f={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(g){d.channelCount=g},get channelCountMode(){return d.channelCountMode},set channelCountMode(g){d.channelCountMode=g},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(g){d.channelInterpretation=g},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return l.onended},set onended(g){l.onended=g},addEventListener(...g){return l.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return l.dispatchEvent(g[0])},removeEventListener(...g){return l.removeEventListener(g[0],g[1],g[2])},start(g=0){l.start.call(l,g)},stop(g=0){l.stop.call(l,g)}},p=()=>l.connect(d),m=()=>l.disconnect(d);return t(o,l),r(Wt(f,d),p,m)};var Lv=(t,e)=>(n,r)=>{let o=n.createConvolver();if(de(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),xe(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",s=>()=>s.call(o),s=>i=>{if(i>2)throw t();return s.call(o,i)}),r.channelCountMode==="max"))throw t();return e(o,"channelCountMode",s=>()=>s.call(o),s=>i=>{if(i==="max")throw t();return s.call(o,i)}),o};var mf=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return de(n,e),we(n,e,"delayTime"),n};var Vv=t=>(e,n)=>{let r=e.createDynamicsCompressor();if(de(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return we(r,n,"attack"),we(r,n,"knee"),we(r,n,"ratio"),we(r,n,"release"),we(r,n,"threshold"),r};var mt=(t,e)=>{let n=t.createGain();return de(n,e),we(n,e,"gain"),n};var jv=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);let o=e.createIIRFilter(r.feedforward,r.feedback);return de(o,r),o};function GI(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function YI(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Bv(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=YI(n,e),n[0]+=t[r];return n}var qv=(t,e,n,r)=>(o,s,{channelCount:i,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{let d=Ac(s,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),p=h.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(m===0||m>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let v=0;v<m;v+=1)f[v]/=h[0];for(let v=1;v<p;v+=1)h[v]/=h[0]}let y=n(o,d,i,i);y.channelCount=i,y.channelCountMode=a,y.channelInterpretation=c;let C=32,A=[],L=[],T=[];for(let v=0;v<i;v+=1){A.push(0);let F=new Float32Array(C),H=new Float32Array(C);F.fill(0),H.fill(0),L.push(F),T.push(H)}y.onaudioprocess=v=>{let F=v.inputBuffer,H=v.outputBuffer,k=F.numberOfChannels;for(let M=0;M<k;M+=1){let $=F.getChannelData(M),E=H.getChannelData(M);A[M]=Ic(h,p,f,m,g,L[M],T[M],A[M],C,$,E)}};let w=o.sampleRate/2;return Wt({get bufferSize(){return d},get channelCount(){return y.channelCount},set channelCount(v){y.channelCount=v},get channelCountMode(){return y.channelCountMode},set channelCountMode(v){y.channelCountMode=v},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(v){y.channelInterpretation=v},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...v){return y.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return y.dispatchEvent(v[0])},getFrequencyResponse(v,F,H){if(v.length!==F.length||F.length!==H.length)throw t();let k=v.length;for(let M=0;M<k;M+=1){let $=-Math.PI*(v[M]/w),E=[Math.cos($),Math.sin($)],D=Bv(f,E),S=Bv(h,E),I=GI(D,S);F[M]=Math.sqrt(I[0]*I[0]+I[1]*I[1]),H[M]=Math.atan2(I[1],I[0])}},removeEventListener(...v){return y.removeEventListener(v[0],v[1],v[2])}},y)};var Uv=(t,e)=>t.createMediaElementSource(e.mediaElement);var Hv=(t,e)=>{let n=t.createMediaStreamDestination();return de(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n};var $v=(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((s,i)=>s.id<i.id?-1:s.id>i.id?1:0);let r=n.slice(0,1),o=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o};var Wv=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);let o=new MediaStream([r]),s=n.createMediaStreamSource(o);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return s};var zv=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null;var Gv=(t,e,n,r,o,s)=>(i,a)=>{let c=i.createOscillator();return de(c,a),we(c,a,"detune"),we(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):xe(c,a,"type"),e(n,()=>n(i))||Wo(c),e(r,()=>r(i))||s(c,i),e(o,()=>o(i))||zo(c),t(i,c),c};var Yv=t=>(e,n)=>{let r=e.createPanner();return r.orientationX===void 0?t(e,n):(de(r,n),we(r,n,"orientationX"),we(r,n,"orientationY"),we(r,n,"orientationZ"),we(r,n,"positionX"),we(r,n,"positionY"),we(r,n,"positionZ"),xe(r,n,"coneInnerAngle"),xe(r,n,"coneOuterAngle"),xe(r,n,"coneOuterGain"),xe(r,n,"distanceModel"),xe(r,n,"maxDistance"),xe(r,n,"panningModel"),xe(r,n,"refDistance"),xe(r,n,"rolloffFactor"),r)};var Zv=(t,e,n,r,o,s,i,a,c,u)=>(l,H)=>{var k=H,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:y,orientationZ:C,panningModel:A,positionX:L,positionY:T,positionZ:w,refDistance:_,rolloffFactor:v}=k,F=er(k,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let M=l.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw i();de(M,F);let $={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(l,j(b({},$),{channelInterpretation:"speakers",numberOfInputs:6})),D=r(l,j(b({},F),{gain:1})),S=r(l,j(b({},$),{gain:1})),I=r(l,j(b({},$),{gain:0})),V=r(l,j(b({},$),{gain:0})),R=r(l,j(b({},$),{gain:0})),N=r(l,j(b({},$),{gain:0})),ae=r(l,j(b({},$),{gain:0})),_e=o(l,256,6,1),Ae=s(l,j(b({},$),{curve:new Float32Array([1,1]),oversample:"none"})),tt=[g,y,C],ze=[L,T,w],pe=new Float32Array(1);_e.onaudioprocess=({inputBuffer:W})=>{let Pn=[c(W,pe,0),c(W,pe,1),c(W,pe,2)];Pn.some((yn,Kn)=>yn!==tt[Kn])&&(M.setOrientation(...Pn),tt=Pn);let Ft=[c(W,pe,3),c(W,pe,4),c(W,pe,5)];Ft.some((yn,Kn)=>yn!==ze[Kn])&&(M.setPosition(...Ft),ze=Ft)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ae.gain,"defaultValue",{get:()=>0});let X={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount(W){if(W>2)throw i();D.channelCount=W,M.channelCount=W},get channelCountMode(){return M.channelCountMode},set channelCountMode(W){if(W==="max")throw i();D.channelCountMode=W,M.channelCountMode=W},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation(W){D.channelInterpretation=W,M.channelInterpretation=W},get coneInnerAngle(){return M.coneInnerAngle},set coneInnerAngle(W){M.coneInnerAngle=W},get coneOuterAngle(){return M.coneOuterAngle},set coneOuterAngle(W){M.coneOuterAngle=W},get coneOuterGain(){return M.coneOuterGain},set coneOuterGain(W){if(W<0||W>1)throw e();M.coneOuterGain=W},get context(){return M.context},get distanceModel(){return M.distanceModel},set distanceModel(W){M.distanceModel=W},get inputs(){return[D]},get maxDistance(){return M.maxDistance},set maxDistance(W){if(W<0)throw new RangeError;M.maxDistance=W},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get orientationX(){return S.gain},get orientationY(){return I.gain},get orientationZ(){return V.gain},get panningModel(){return M.panningModel},set panningModel(W){M.panningModel=W},get positionX(){return R.gain},get positionY(){return N.gain},get positionZ(){return ae.gain},get refDistance(){return M.refDistance},set refDistance(W){if(W<0)throw new RangeError;M.refDistance=W},get rolloffFactor(){return M.rolloffFactor},set rolloffFactor(W){if(W<0)throw new RangeError;M.rolloffFactor=W},addEventListener(...W){return D.addEventListener(W[0],W[1],W[2])},dispatchEvent(...W){return D.dispatchEvent(W[0])},removeEventListener(...W){return D.removeEventListener(W[0],W[1],W[2])}};d!==X.coneInnerAngle&&(X.coneInnerAngle=d),h!==X.coneOuterAngle&&(X.coneOuterAngle=h),f!==X.coneOuterGain&&(X.coneOuterGain=f),p!==X.distanceModel&&(X.distanceModel=p),m!==X.maxDistance&&(X.maxDistance=m),g!==X.orientationX.value&&(X.orientationX.value=g),y!==X.orientationY.value&&(X.orientationY.value=y),C!==X.orientationZ.value&&(X.orientationZ.value=C),A!==X.panningModel&&(X.panningModel=A),L!==X.positionX.value&&(X.positionX.value=L),T!==X.positionY.value&&(X.positionY.value=T),w!==X.positionZ.value&&(X.positionZ.value=w),_!==X.refDistance&&(X.refDistance=_),v!==X.rolloffFactor&&(X.rolloffFactor=v),(tt[0]!==1||tt[1]!==0||tt[2]!==0)&&M.setOrientation(...tt),(ze[0]!==0||ze[1]!==0||ze[2]!==0)&&M.setPosition(...ze);let Zt=()=>{D.connect(M),t(D,Ae,0,0),Ae.connect(S).connect(E,0,0),Ae.connect(I).connect(E,0,1),Ae.connect(V).connect(E,0,2),Ae.connect(R).connect(E,0,3),Ae.connect(N).connect(E,0,4),Ae.connect(ae).connect(E,0,5),E.connect(_e).connect(l.destination)},gn=()=>{D.disconnect(M),a(D,Ae,0,0),Ae.disconnect(S),S.disconnect(E),Ae.disconnect(I),I.disconnect(E),Ae.disconnect(V),V.disconnect(E),Ae.disconnect(R),R.disconnect(E),Ae.disconnect(N),N.disconnect(E),Ae.disconnect(ae),ae.disconnect(E),E.disconnect(_e),_e.disconnect(l.destination)};return u(Wt(X,M),Zt,gn)};var Qv=t=>(e,{disableNormalization:n,imag:r,real:o})=>{let s=r instanceof Float32Array?r:new Float32Array(r),i=o instanceof Float32Array?o:new Float32Array(o),a=e.createPeriodicWave(i,s,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a};var Yo=(t,e,n,r)=>t.createScriptProcessor(e,n,r);var Xv=(t,e)=>(n,r)=>{let o=r.channelCountMode;if(o==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);let s=n.createStereoPanner();return de(s,r),we(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>o,set:i=>{if(i!==o)throw e()}}),s};var Kv=(t,e,n,r,o,s)=>{let a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l=j(b({},u),{oversample:"none"}),d=(p,m,g,y)=>{let C=new Float32Array(16385),A=new Float32Array(16385);for(let F=0;F<16385;F+=1){let H=F/16384*c;C[F]=Math.cos(H),A[F]=Math.sin(H)}let L=n(p,j(b({},u),{gain:0})),T=r(p,j(b({},l),{curve:C})),w=r(p,j(b({},l),{curve:a})),_=n(p,j(b({},u),{gain:0})),v=r(p,j(b({},l),{curve:A}));return{connectGraph(){m.connect(L),m.connect(w.inputs===void 0?w:w.inputs[0]),m.connect(_),w.connect(g),g.connect(T.inputs===void 0?T:T.inputs[0]),g.connect(v.inputs===void 0?v:v.inputs[0]),T.connect(L.gain),v.connect(_.gain),L.connect(y,0,0),_.connect(y,0,1)},disconnectGraph(){m.disconnect(L),m.disconnect(w.inputs===void 0?w:w.inputs[0]),m.disconnect(_),w.disconnect(g),g.disconnect(T.inputs===void 0?T:T.inputs[0]),g.disconnect(v.inputs===void 0?v:v.inputs[0]),T.disconnect(L.gain),v.disconnect(_.gain),L.disconnect(y,0,0),_.disconnect(y,0,1)}}},h=(p,m,g,y)=>{let C=new Float32Array(16385),A=new Float32Array(16385),L=new Float32Array(16385),T=new Float32Array(16385),w=Math.floor(16385/2);for(let I=0;I<16385;I+=1)if(I>w){let V=(I-w)/(16384-w)*c;C[I]=Math.cos(V),A[I]=Math.sin(V),L[I]=0,T[I]=1}else{let V=I/(16384-w)*c;C[I]=1,A[I]=0,L[I]=Math.cos(V),T[I]=Math.sin(V)}let _=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(p,j(b({},u),{gain:0})),F=r(p,j(b({},l),{curve:C})),H=n(p,j(b({},u),{gain:0})),k=r(p,j(b({},l),{curve:A})),M=r(p,j(b({},l),{curve:a})),$=n(p,j(b({},u),{gain:0})),E=r(p,j(b({},l),{curve:L})),D=n(p,j(b({},u),{gain:0})),S=r(p,j(b({},l),{curve:T}));return{connectGraph(){m.connect(_),m.connect(M.inputs===void 0?M:M.inputs[0]),_.connect(v,0),_.connect(H,0),_.connect($,1),_.connect(D,1),M.connect(g),g.connect(F.inputs===void 0?F:F.inputs[0]),g.connect(k.inputs===void 0?k:k.inputs[0]),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),F.connect(v.gain),k.connect(H.gain),E.connect($.gain),S.connect(D.gain),v.connect(y,0,0),$.connect(y,0,0),H.connect(y,0,1),D.connect(y,0,1)},disconnectGraph(){m.disconnect(_),m.disconnect(M.inputs===void 0?M:M.inputs[0]),_.disconnect(v,0),_.disconnect(H,0),_.disconnect($,1),_.disconnect(D,1),M.disconnect(g),g.disconnect(F.inputs===void 0?F:F.inputs[0]),g.disconnect(k.inputs===void 0?k:k.inputs[0]),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),F.disconnect(v.gain),k.disconnect(H.gain),E.disconnect($.gain),S.disconnect(D.gain),v.disconnect(y,0,0),$.disconnect(y,0,0),H.disconnect(y,0,1),D.disconnect(y,0,1)}}},f=(p,m,g,y,C)=>{if(m===1)return d(p,g,y,C);if(m===2)return h(p,g,y,C);throw o()};return(p,A)=>{var L=A,{channelCount:m,channelCountMode:g,pan:y}=L,C=er(L,["channelCount","channelCountMode","pan"]);if(g==="max")throw o();let T=t(p,j(b({},C),{channelCount:1,channelCountMode:g,numberOfInputs:2})),w=n(p,j(b({},C),{channelCount:m,channelCountMode:g,gain:1})),_=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y}),{connectGraph:v,disconnectGraph:F}=f(p,m,w,_,T);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});let H={get bufferSize(){},get channelCount(){return w.channelCount},set channelCount(E){w.channelCount!==E&&(k&&F(),{connectGraph:v,disconnectGraph:F}=f(p,E,w,_,T),k&&v()),w.channelCount=E},get channelCountMode(){return w.channelCountMode},set channelCountMode(E){if(E==="clamped-max"||E==="max")throw o();w.channelCountMode=E},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(E){w.channelInterpretation=E},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get pan(){return _.gain},addEventListener(...E){return w.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return w.dispatchEvent(E[0])},removeEventListener(...E){return w.removeEventListener(E[0],E[1],E[2])}},k=!1,M=()=>{v(),k=!0},$=()=>{F(),k=!1};return s(Wt(H,T),M,$)}};var Jv=(t,e,n,r,o,s,i)=>(a,c)=>{let u=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);de(u,c);let l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw e();xe(u,{curve:l},"curve"),xe(u,c,"oversample");let d=null,h=!1;return i(u,"curve",m=>()=>m.call(u),m=>g=>(m.call(u,g),h&&(r(g)&&d===null?d=t(a,u):!r(g)&&d!==null&&(d(),d=null)),g)),o(u,()=>{h=!0,r(u.curve)&&(d=t(a,u))},()=>{h=!1,d!==null&&(d(),d=null)})};var ex=(t,e,n,r,o)=>(s,u)=>{var l=u,{curve:i,oversample:a}=l,c=er(l,["curve","oversample"]);let d=s.createWaveShaper(),h=s.createWaveShaper();de(d,c),de(h,c);let f=n(s,j(b({},c),{gain:1})),p=n(s,j(b({},c),{gain:-1})),m=n(s,j(b({},c),{gain:1})),g=n(s,j(b({},c),{gain:-1})),y=null,C=!1,A=null,L={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(_){f.channelCount=_,p.channelCount=_,d.channelCount=_,m.channelCount=_,h.channelCount=_,g.channelCount=_},get channelCountMode(){return d.channelCountMode},set channelCountMode(_){f.channelCountMode=_,p.channelCountMode=_,d.channelCountMode=_,m.channelCountMode=_,h.channelCountMode=_,g.channelCountMode=_},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(_){f.channelInterpretation=_,p.channelInterpretation=_,d.channelInterpretation=_,m.channelInterpretation=_,h.channelInterpretation=_,g.channelInterpretation=_},get context(){return d.context},get curve(){return A},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)d.curve=_,h.curve=_;else{let v=_.length,F=new Float32Array(v+2-v%2),H=new Float32Array(v+2-v%2);F[0]=_[0],H[0]=-_[v-1];let k=Math.ceil((v+1)/2),M=(v+1)/2-1;for(let $=1;$<k;$+=1){let E=$/k*M,D=Math.floor(E),S=Math.ceil(E);F[$]=D===S?_[D]:(1-(E-D))*_[D]+(1-(S-E))*_[S],H[$]=D===S?-_[v-1-D]:-((1-(E-D))*_[v-1-D])-(1-(S-E))*_[v-1-S]}F[k]=v%2===1?_[k-1]:(_[k-2]+_[k-1])/2,d.curve=F,h.curve=H}A=_,C&&(r(A)&&y===null?y=t(s,f):y!==null&&(y(),y=null))},get inputs(){return[f]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(_){d.oversample=_,h.oversample=_},addEventListener(..._){return f.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return f.dispatchEvent(_[0])},removeEventListener(..._){return f.removeEventListener(_[0],_[1],_[2])}};i!==null&&(L.curve=i instanceof Float32Array?i:new Float32Array(i)),a!==L.oversample&&(L.oversample=a);let T=()=>{f.connect(d).connect(m),f.connect(p).connect(h).connect(g).connect(m),C=!0,r(A)&&(y=t(s,f))},w=()=>{f.disconnect(d),d.disconnect(m),f.disconnect(p),p.disconnect(h),h.disconnect(g),g.disconnect(m),C=!1,y!==null&&(y(),y=null)};return o(Wt(L,m),T,w)};var nt=()=>new DOMException("","NotSupportedError");var ZI={numberOfChannels:1},tx=(t,e,n,r,o)=>class extends t{constructor(i,a,c){let u;if(typeof i=="number"&&a!==void 0&&c!==void 0)u={length:a,numberOfChannels:i,sampleRate:c};else if(typeof i=="object")u=i;else throw new Error("The given parameters are not valid.");let{length:l,numberOfChannels:d,sampleRate:h}=b(b({},ZI),u),f=r(d,l,h);e(cn,()=>cn(f))||f.addEventListener("statechange",(()=>{let p=0,m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,d),this._length=l,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,lr(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}};var QI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},nx=(t,e,n,r,o,s,i)=>class extends t{constructor(c,u){let l=o(c),d=b(b({},QI),u),h=n(l,d),f=s(l),p=f?r():null,m=c.sampleRate/2;super(c,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,m,-m),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?i(this,c):null;this._nativeOscillatorNode.onended=u;let l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){sn(this);let u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),pt(this)&&In(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var rx=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=null,a=null,c=null,u=(l,d)=>O(null,null,function*(){let h=n(l),f=ve(h,d);if(!f){let p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:i===null?void 0:i,type:h.type};h=e(d,p),a!==null&&h.start(a),c!==null&&h.stop(c)}return s.set(d,h),f?(yield t(d,l.detune,h.detune),yield t(d,l.frequency,h.frequency)):(yield r(d,l.detune,h.detune),yield r(d,l.frequency,h.frequency)),yield o(l,d,h),h});return{set periodicWave(l){i=l},set start(l){a=l},set stop(l){c=l},render(l,d){let h=s.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var XI={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ox=(t,e,n,r,o,s,i)=>class extends t{constructor(c,u){let l=o(c),d=b(b({},XI),u),h=n(l,d),f=s(l),p=f?r():null;super(c,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Pe,Le),this._orientationY=e(this,f,h.orientationY,Pe,Le),this._orientationZ=e(this,f,h.orientationZ,Pe,Le),this._positionX=e(this,f,h.positionX,Pe,Le),this._positionY=e(this,f,h.positionY,Pe,Le),this._positionZ=e(this,f,h.positionZ,Pe,Le),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var sx=(t,e,n,r,o,s,i,a,c,u)=>()=>{let l=new WeakMap,d=null,h=(f,p)=>O(null,null,function*(){let m=null,g=s(f),y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},C=j(b({},y),{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),A=ve(g,p);if("bufferSize"in g)m=r(p,j(b({},y),{gain:1}));else if(!A){let L=j(b({},C),{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=o(p,L)}if(l.set(p,m===null?g:m),m!==null){if(d===null){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");let k=new i(6,f.context.length,p.sampleRate),M=e(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});M.connect(k.destination),d=O(null,null,function*(){let $=yield Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((E,D)=>O(null,null,function*(){let S=n(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D===0?1:0});return yield a(k,E,S.offset),S})));for(let E=0;E<6;E+=1)$[E].connect(M,0,E),$[E].start(0);return u(k)})}let L=yield d,T=r(p,j(b({},y),{gain:1}));yield c(f,p,T);let w=[];for(let k=0;k<L.numberOfChannels;k+=1)w.push(L.getChannelData(k));let _=[w[0][0],w[1][0],w[2][0]],v=[w[3][0],w[4][0],w[5][0]],F=r(p,j(b({},y),{gain:1})),H=o(p,j(b({},C),{orientationX:_[0],orientationY:_[1],orientationZ:_[2],positionX:v[0],positionY:v[1],positionZ:v[2]}));T.connect(F).connect(H.inputs[0]),H.connect(m);for(let k=128;k<L.length;k+=128){let M=[w[0][k],w[1][k],w[2][k]],$=[w[3][k],w[4][k],w[5][k]];if(M.some((E,D)=>E!==_[D])||$.some((E,D)=>E!==v[D])){_=M,v=$;let E=k/p.sampleRate;F.gain.setValueAtTime(0,E),F=r(p,j(b({},y),{gain:0})),H=o(p,j(b({},C),{orientationX:_[0],orientationY:_[1],orientationZ:_[2],positionX:v[0],positionY:v[1],positionZ:v[2]})),F.gain.setValueAtTime(1,E),T.connect(F).connect(H.inputs[0]),H.connect(m)}}return m}return A?(yield t(p,f.orientationX,g.orientationX),yield t(p,f.orientationY,g.orientationY),yield t(p,f.orientationZ,g.orientationZ),yield t(p,f.positionX,g.positionX),yield t(p,f.positionY,g.positionY),yield t(p,f.positionZ,g.positionZ)):(yield a(p,f.orientationX,g.orientationX),yield a(p,f.orientationY,g.orientationY),yield a(p,f.orientationZ,g.orientationZ),yield a(p,f.positionX,g.positionX),yield a(p,f.positionY,g.positionY),yield a(p,f.positionZ,g.positionZ)),$t(g)?yield c(f,p,g.inputs[0]):yield c(f,p,g),g});return{render(f,p){let m=l.get(p);return m!==void 0?Promise.resolve(m):h(f,p)}}};var KI={disableNormalization:!1},ix=(t,e,n,r)=>class ax{constructor(s,i){let a=e(s),c=r(b(b({},KI),i)),u=t(a,c);return n.add(u),u}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===ax.prototype||n.has(s)}};var cx=(t,e)=>(n,r,o)=>(t(r).replay(o),e(r,n,o));var ux=(t,e,n)=>(r,o,s)=>O(null,null,function*(){let i=t(r);yield Promise.all(i.activeInputs.map((a,c)=>Array.from(a).map(d=>O(null,[d],function*([u,l]){let f=yield e(u).render(u,o),p=r.context.destination;!n(u)&&(r!==p||!n(r))&&f.connect(s,l,c)}))).reduce((a,c)=>[...a,...c],[]))});var lx=(t,e,n)=>(r,o,s)=>O(null,null,function*(){let i=e(r);yield Promise.all(Array.from(i.activeInputs).map(u=>O(null,[u],function*([a,c]){let d=yield t(a).render(a,o);n(a)||d.connect(s,c)})))});var dx=(t,e,n,r)=>o=>t(cn,()=>cn(o))?Promise.resolve(t(r,r)).then(s=>{if(!s){let i=n(o,512,0,1);o.oncomplete=()=>{i.onaudioprocess=null,i.disconnect()},i.onaudioprocess=()=>o.currentTime,i.connect(o.destination)}return o.startRendering()}):new Promise(s=>{let i=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=a=>{i.disconnect(),s(a.renderedBuffer)},i.connect(o.destination),o.startRendering()});var fx=t=>(e,n)=>{t.set(e,n)};var hx=t=>(e,n)=>t.set(e,n);var px=(t,e,n,r,o,s,i,a)=>(c,u)=>n(c).render(c,u).then(()=>Promise.all(Array.from(r(u)).map(l=>n(l).render(l,u)))).then(()=>o(u)).then(l=>(typeof l.copyFromChannel!="function"?(i(l),Lo(l)):e(s,()=>s(l))||a(l),t.add(l),l));var JI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},mx=(t,e,n,r,o,s)=>class extends t{constructor(a,c){let u=o(a),l=b(b({},JI),c),d=n(u,l),h=s(u),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}};var gx=(t,e,n,r,o)=>()=>{let s=new WeakMap,i=(a,c)=>O(null,null,function*(){let u=n(a),l=ve(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,d)}return s.set(c,u),l?yield t(c,a.pan,u.pan):yield r(c,a.pan,u.pan),$t(u)?yield o(a,c,u.inputs[0]):yield o(a,c,u),u});return{render(a,c){let u=s.get(c);return u!==void 0?Promise.resolve(u):i(a,c)}}};var yx=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0};var _x=(t,e)=>()=>O(null,null,function*(){if(t===null)return!0;if(e===null)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(n),s=!1,i=!1;try{yield r.audioWorklet.addModule(o);let a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>i=!0,c.connect(a),c.start(0),yield r.startRendering(),yield new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(o)}return s&&!i});var vx=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);let n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{r.disconnect(),o(n.currentTime!==0)},n.startRendering()})};var gf=()=>new DOMException("","UnknownError");var eA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},xx=(t,e,n,r,o,s,i)=>class extends t{constructor(c,u){let l=o(c),d=b(b({},eA),u),h=n(l,d),p=s(l)?r():null;super(c,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var bx=(t,e,n)=>()=>{let r=new WeakMap,o=(s,i)=>O(null,null,function*(){let a=e(s);if(!ve(a,i)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(i,u)}return r.set(i,a),$t(a)?yield n(s,i,a.inputs[0]):yield n(s,i,a),a});return{render(s,i){let a=r.get(i);return a!==void 0?Promise.resolve(a):o(s,i)}}};var wx=()=>typeof window>"u"?null:window;var Dx=(t,e)=>n=>{n.copyFromChannel=(r,o,s=0)=>{let i=t(s),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=i<0?-i:0;d+i<c&&d<l;d+=1)r[d]=u[d+i]},n.copyToChannel=(r,o,s=0)=>{let i=t(s),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=i<0?-i:0;d+i<c&&d<l;d+=1)u[d+i]=r[d]}};var Tx=t=>e=>{e.copyFromChannel=(n=>(r,o,s=0)=>{let i=t(s),a=t(o);if(i<e.length)return n.call(e,r,a,i)})(e.copyFromChannel),e.copyToChannel=(n=>(r,o,s=0)=>{let i=t(s),a=t(o);if(i<e.length)return n.call(e,r,a,i)})(e.copyToChannel)};var Sx=t=>(e,n)=>{let r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",o=>()=>{let s=o.call(e);return s===r?null:s},o=>s=>o.call(e,s===null?r:s))};var Cx=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let o=n.createBufferSource();e(r,()=>{let a=r.numberOfInputs;for(let c=0;c<a;c+=1)o.connect(r,0,c)},()=>o.disconnect(r))};var yf=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]);var _f=t=>{if(t===null)return!1;let e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0};var Zo=(t,e,n,r)=>{let o=t;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);let{get:s,set:i}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,{get:n(s),set:r(i)})};var Ex=t=>j(b({},t),{outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)});var Ix=t=>j(b({},t),{channelCount:t.numberOfOutputs});var Ax=t=>{let{imag:e,real:n}=t;return e===void 0?n===void 0?j(b({},t),{imag:[0,0],real:[0,0]}):j(b({},t),{imag:Array.from(n,()=>0),real:n}):n===void 0?j(b({},t),{imag:e,real:Array.from(e,()=>0)}):j(b({},t),{imag:e,real:n})};var vf=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;vf(t,e,n+1e-7)}};var Nx=t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};var Mx=t=>{let e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0};var Ox=t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0};var Nc=t=>{let e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1};var xf=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}};var Mc=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1};var kx=t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}};var Rx=t=>{t.start=(e=>(n=0,r=0,o)=>{let s=t.buffer,i=s===null?r:Math.min(s.duration,r);s!==null&&i>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,i,o)})(t.start)};var bf=(t,e)=>{let n=e.createGain();t.connect(n);let r=(o=>()=>{o.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Wt(t,n),t.stop=(o=>{let s=!1;return(i=0)=>{if(s)try{o.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else o.call(t,i),s=!0}})(t.stop)};var $r=(t,e)=>n=>{let r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)};var tA=Dy(an),nA=ky(an),rA=A_(cr),Px=new WeakMap,oA=W_(Px),zt=l_(new Map,new WeakMap),An=wx(),Lx=xv(zt,Ht),wf=$_(Xe),rt=ux(Xe,wf,Gn),sA=Ly(Lx,Se,rt),Ne=Y_(Fo),Yn=zv(An),Ce=uv(Yn),Vx=new WeakMap,jx=V_($r),Qo=Tv(An),Df=sv(Qo),Tf=iv(An),Bx=av(An),vi=Cv(An),Ve=e_(Ty(_c),Oy(tA,nA,Vo,rA,jo,Xe,oA,En,Se,an,pt,Gn,Bo),zt,ev(mi,jo,Xe,Se,Ur,pt),Ht,$o,nt,C_(Vo,mi,Xe,Se,Ur,Ne,pt,Ce),O_(Vx,Xe,qe),jx,Ne,Df,Tf,Bx,Ce,vi),iA=Py(Ve,sA,Ht,Lx,Ne,Ce);var Sf=new WeakSet,Fx=bv(An),qx=x_(new Uint32Array(1)),Cf=Dx(qx,Ht),Ef=Tx(qx),If=Vy(Sf,zt,nt,Fx,Yn,yx(Fx),Cf,Ef);var Oc=Ry(mt),Ux=lx(wf,ur,Gn),Nn=m_(Ux),Xo=Dv(Oc,zt,Nx,Mx,Ox,Nc,xf,Mc,Rx,Sx(Zo),bf),Mn=cx(z_(ur),Ux),aA=qy(Nn,Xo,Se,Mn,rt),un=n_(Sy(vc),Vx,pi,r_,Tt.createCancelAndHoldAutomationEvent,Tt.createCancelScheduledValuesAutomationEvent,Tt.createExponentialRampToValueAutomationEvent,Tt.createLinearRampToValueAutomationEvent,Tt.createSetTargetAutomationEvent,Tt.createSetValueAutomationEvent,Tt.createSetValueCurveAutomationEvent,Qo,vf),cA=By(Ve,aA,un,Oe,Xo,Ne,Ce,$r);var uA=Zy(Ve,Qy,Ht,Oe,Sv(mt,Zo),Ne,Ce,rt),lA=u_(Nn,pf,Se,Mn,rt),Wr=hx(Px),dA=c_(Ve,un,lA,$o,pf,Ne,Ce,Wr),fr=_v(an,Tf),fA=Cx(Oe,fr),hr=kv(Qo,fA),hA=f_(hr,Se,rt),pA=d_(Ve,hA,hr,Ne,Ce),mA=p_(Go,Se,rt),gA=h_(Ve,mA,Go,Ne,Ce,Ix),yA=Pv(Oc,Xo,mt,fr),Ko=Fv(Oc,zt,yA,Nc,Mc),_A=v_(Nn,Ko,Se,Mn,rt),vA=__(Ve,un,_A,Ko,Ne,Ce,$r),Hx=Lv(nt,Zo),xA=w_(Hx,Se,rt),bA=b_(Ve,xA,Hx,Ne,Ce,Wr),wA=I_(Nn,mf,Se,Mn,rt),DA=E_(Ve,un,wA,mf,Ne,Ce,Wr),$x=Vv(nt),TA=F_(Nn,$x,Se,Mn,rt),SA=R_(Ve,un,TA,$x,nt,Ne,Ce,Wr),CA=U_(Nn,mt,Se,Mn,rt),EA=q_(Ve,un,CA,mt,Ne,Ce),IA=qv($o,Oe,Yo,nt),kc=dx(zt,mt,Yo,vx(mt,Yn)),AA=J_(Xo,Se,Yn,rt,kc),NA=jv(IA),MA=K_(Ve,NA,AA,Ne,Ce,Wr),OA=Xy(un,hr,Ko,Yo,nt,yf,Ce,Zo),Wx=new WeakMap,Af=gv(uA,OA,jx,Ce,Wx,$r),zx=Gv(Oc,zt,Nc,xf,Mc,bf),kA=rx(Nn,zx,Se,Mn,rt),RA=nx(Ve,un,zx,kA,Ne,Ce,$r),Gx=y_(Xo),FA=ex(Gx,Oe,mt,_f,fr),Rc=Jv(Gx,Oe,FA,_f,fr,Qo,Zo),PA=Zv(Vo,Oe,hr,mt,Yo,Rc,nt,jo,yf,fr),Yx=Yv(PA),LA=sx(Nn,hr,Ko,mt,Yx,Se,Yn,Mn,rt,kc),VA=ox(Ve,un,Yx,LA,Ne,Ce,Wr),jA=Qv(Ht),BA=ix(jA,Ne,new WeakSet,Ax),qA=Kv(hr,Go,mt,Rc,nt,fr),Zx=Xv(qA,nt),UA=gx(Nn,Zx,Se,Mn,rt),HA=mx(Ve,un,Zx,UA,Ne,Ce),$A=bx(Rc,Se,rt),WA=xx(Ve,Oe,Rc,$A,Ne,Ce,Wr),Qx=lv(An),Nf=j_(An),Xx=new WeakMap,zA=Z_(Xx,Yn),GA=Qx?My(zt,nt,L_(An),Nf,B_(wy),Ne,zA,Ce,vi,new WeakMap,new WeakMap,_x(vi,Yn),An):void 0,YA=cv(Df,Ce),ZA=S_(Sf,zt,T_,P_,new WeakSet,Ne,YA,Po,cn,Cf,Ef),Kx=a_(GA,iA,If,cA,dA,pA,gA,vA,bA,ZA,DA,SA,EA,MA,Af,RA,VA,BA,HA,WA),QA=dv(Ve,Uv,Ne,Ce),XA=fv(Ve,Hv,Ne,Ce),KA=hv(Ve,$v,Ne,Ce),JA=Wv(Oe,Ce),eN=pv(Ve,JA,Ne),Jx=Yy(Kx,Oe,nt,gf,QA,XA,KA,eN,Qo);var Mf=Q_(Wx),tN=Fy(Mf),eb=g_(Ht),nN=N_(Mf),tb=k_(Ht),nb=new WeakMap,rN=H_(nb,qe),oN=Ov(eb,Ht,Oe,hr,Go,Ko,mt,Yo,nt,tb,Nf,rN,fr),sN=Iv(Oe,oN,mt,nt,fr),iN=i_(Nn,eb,Xo,hr,Go,Ko,mt,nN,tb,Nf,Se,vi,Yn,Mn,rt,kc),aN=G_(Xx),cN=fx(nb),Of=Qx?o_(tN,Ve,un,iN,sN,Xe,aN,Ne,Ce,vi,Ex,cN,kx,$r):void 0;var cne=mv(Oe,nt,gf,Af,Qo);var rb=D_(nt,Yn),ob=px(Sf,zt,wf,Mf,kc,Po,Cf,Ef),une=yv(zt,Oe,rb,Af,ob);var sb=tx(Kx,zt,Oe,rb,ob);var ib=tv(Fo,Df),ab=nv(Ro,Tf),cb=rv(pi,Bx),ub=ov(Fo,Ce);function je(t){return t===void 0}function Q(t){return t!==void 0}function lb(t){return typeof t=="function"}function gt(t){return typeof t=="number"}function ln(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function kf(t){return typeof t=="boolean"}function Be(t){return Array.isArray(t)}function ct(t){return typeof t=="string"}function xi(t){return ct(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function U(t,e){if(!t)throw new Error(e)}function Je(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Fc(t){!t.isOffline&&t.state!=="running"&&Jo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var fb=!1,db=!1;function Rf(t){fb=t}function hb(t){je(t)&&fb&&!db&&(db=!0,Jo("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}var pb=console;function mb(...t){pb.log(...t)}function Jo(...t){pb.warn(...t)}function gb(t){return new Jx(t)}function yb(t,e,n){return new sb(t,e,n)}var ut=typeof self=="object"?self:null,_b=ut&&(ut.hasOwnProperty("AudioContext")||ut.hasOwnProperty("webkitAudioContext"));function vb(t,e,n){return U(Q(Of),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof ut?.BaseAudioContext?ut?.AudioWorkletNode:Of)(t,e,n)}var Pc=class{constructor(e,n,r,o){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function dn(t){return cb(t)}function On(t){return ab(t)}function es(t){return ub(t)}function pr(t){return ib(t)}function xb(t){return t instanceof If}function dN(t,e){return t==="value"||dn(e)||On(e)||xb(e)}function fn(t,...e){if(!e.length)return t;let n=e.shift();if(ln(t)&&ln(n))for(let r in n)dN(r,n[r])?t[r]=n[r]:ln(n[r])?(t[r]||Object.assign(t,{[r]:{}}),fn(t[r],n[r])):Object.assign(t,{[r]:n[r]});return fn(t,...e)}function bb(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function x(t,e,n=[],r){let o={},s=Array.from(e);if(ln(s[0])&&r&&!Reflect.has(s[0],r)&&(Object.keys(s[0]).some(a=>Reflect.has(t,a))||(fn(o,{[r]:s[0]}),n.splice(n.indexOf(r),1),s.shift())),s.length===1&&ln(s[0]))fn(o,s[0]);else for(let i=0;i<n.length;i++)Q(s[i])&&(o[n[i]]=s[i]);return fn(t,o)}function wb(t){return t.constructor.getDefaults()}function Nt(t,e){return je(t)?e:t}function kn(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}var lt=(()=>{class t{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...n){(this.debug||ut&&this.toString()===ut.TONE_DEBUG_CLASS)&&mb(this,...n)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return t.version=ri,t})();function Zn(t,e){return t>e+1e-6}function bi(t,e){return Zn(t,e)||yt(t,e)}function zr(t,e){return t+1e-6<e}function yt(t,e){return Math.abs(t-e)<1e-6}function Ff(t,e,n){return Math.max(Math.min(t,n),e)}var Ue=class t extends lt{constructor(){super(),this.name="Timeline",this._timeline=[];let e=x(t.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(U(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let n=this._timeline[this.length-1];U(bi(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){let n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){let n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){let r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){let r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){let n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];let r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(yt(this._timeline[n].time,e)){for(let r=n;r>=0&&yt(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&bi(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){let n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0,o=this._timeline.length,s=o;if(o>0&&this._timeline[o-1][n]<=e)return o-1;for(;r<s;){let i=Math.floor(r+(s-r)/2),a=this._timeline[i],c=this._timeline[i+1];if(yt(a[n],e)){for(let u=i;u<this._timeline.length;u++){let l=this._timeline[u];if(yt(l[n],e))i=u;else break}return i}else{if(zr(a[n],e)&&Zn(c[n],e))return i;Zn(a[n],e)?s=i:r=i+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){let r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){let r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let o=this._search(e),s=this._search(n);return o!==-1&&s!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[s].time===n&&(s-=1),this._iterate(r,o,s)):o===-1&&this._iterate(r,0,s),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){let r=this._search(e);if(r!==-1&&yt(this._timeline[r].time,e)){let o=r;for(let s=r;s>=0&&yt(this._timeline[s].time,e);s--)o=s;this._iterate(s=>{n(s)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var Db=[];function mr(t){Db.push(t)}function Tb(t){Db.forEach(e=>e(t))}var Sb=[];function gr(t){Sb.push(t)}function Cb(t){Sb.forEach(e=>e(t))}var yr=class t extends lt{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(o=>{je(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(e,n){let r=(...o)=>{n(...o),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(o=>{if(je(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(je(n))this._events[o]=[];else{let s=this._events[o];for(let i=s.length-1;i>=0;i--)s[i]===n&&s.splice(i,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){let r=this._events[e].slice(0);for(let o=0,s=r.length;o<s;o++)r[o].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{let r=Object.getOwnPropertyDescriptor(t.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}};var ts=class extends yr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}};var Gr=class t extends ts{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ue,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let r=x(t.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=gb({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new Pc(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Tb(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return U(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return U(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return U(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){U(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){U(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){U(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){U(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return vb(this.rawContext,e,n)}addAudioWorkletModule(e){return fe(this,void 0,void 0,function*(){U(Q(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return fe(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return pr(this._context)?this._context.resume():Promise.resolve()}close(){return fe(this,void 0,void 0,function*(){pr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Cb(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let s=0;s<r.length;s++)r[s]=e;let o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){let e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;let r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){let r=++this._timeoutIds,o=()=>{let s=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:s+n})};return o(),r}};var Lc=class extends ts{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return fe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function B(t,e){Be(e)?e.forEach(n=>B(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function ns(t,e){Be(e)?e.forEach(n=>ns(t,n)):Object.defineProperty(t,e,{writable:!0})}var K=()=>{};var et=(()=>{class t extends lt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=K;let n=x(t.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=n.reverse,this.onload=n.onload,ct(n.url)?this.load(n.url).catch(n.onerror):n.url&&this.set(n.url)}static getDefaults(){return{onerror:K,onload:K,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ie().sampleRate}set(n){return n instanceof t?n.loaded?this._buffer=n.get():n.onload=()=>{this.set(n),this.onload(this)}:this._buffer=n,this._reversed&&this._reverse(),this}get(){return this._buffer}load(n){return fe(this,void 0,void 0,function*(){let r=t.load(n).then(o=>{this.set(o),this.onload(this)});t.downloads.push(r);try{yield r}finally{let o=t.downloads.indexOf(r);t.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(n){let r=Be(n)&&n[0].length>0,o=r?n.length:1,s=r?n[0].length:n.length,i=Ie(),a=i.createBuffer(o,s,i.sampleRate),c=!r&&o===1?[n]:n;for(let u=0;u<o;u++)a.copyToChannel(c[u],u);return this._buffer=a,this}toMono(n){if(gt(n))this.fromArray(this.toArray(n));else{let r=new Float32Array(this.length),o=this.numberOfChannels;for(let s=0;s<o;s++){let i=this.toArray(s);for(let a=0;a<i.length;a++)r[a]+=i[a]}r=r.map(s=>s/o),this.fromArray(r)}return this}toArray(n){if(gt(n))return this.getChannelData(n);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let o=0;o<this.numberOfChannels;o++)r[o]=this.getChannelData(o);return r}}getChannelData(n){return this._buffer?this._buffer.getChannelData(n):new Float32Array(0)}slice(n,r=this.duration){U(this.loaded,"Buffer is not loaded");let o=Math.floor(n*this.sampleRate),s=Math.floor(r*this.sampleRate);U(o<s,"The start time must be less than the end time");let i=s-o,a=Ie().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(o,s),c);return new t(a)}_reverse(){if(this.loaded)for(let n=0;n<this.numberOfChannels;n++)this.getChannelData(n).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(n){this._reversed!==n&&(this._reversed=n,this._reverse())}static fromArray(n){return new t().fromArray(n)}static fromUrl(n){return fe(this,void 0,void 0,function*(){return yield new t().load(n)})}static load(n){return fe(this,void 0,void 0,function*(){let r=t.baseUrl===""||t.baseUrl.endsWith("/")?t.baseUrl:t.baseUrl+"/",o=yield fetch(r+n);if(!o.ok)throw new Error(`could not load url: ${n}`);let s=yield o.arrayBuffer();return yield Ie().decodeAudioData(s)})}static supportsType(n){let r=n.split("."),o=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+o)!==""}static loaded(){return fe(this,void 0,void 0,function*(){for(yield Promise.resolve();t.downloads.length;)yield t.downloads[0]})}}return t.baseUrl="",t.downloads=[],t})();var Rn=class extends Gr{constructor(){super({clockSource:"offline",context:es(arguments[0])?arguments[0]:yb(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:es(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=es(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return fe(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;let r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return fe(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);let n=yield this._context.startRendering();return new et(n)})}close(){return Promise.resolve()}};var Eb=new Lc,Yr=Eb;function Ie(){return Yr===Eb&&_b&&Pf(new Gr),Yr}function Pf(t,e=!1){e&&Yr.dispose(),pr(t)?Yr=new Gr(t):es(t)?Yr=new Rn(t):Yr=t}function Lf(){return Yr.resume()}if(ut&&!ut.TONE_SILENCE_LOGGING){let t="v";ri==="dev"&&(t="");let e=` * Tone.js ${t}${ri} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function rs(t){return Math.pow(10,t/20)}function os(t){return 20*(Math.log(t)/Math.LN10)}function Zr(t){return Math.pow(2,t/12)}var Vc=440;function Ib(){return Vc}function Ab(t){Vc=t}function Qr(t){return Math.round(Vf(t))}function Vf(t){return 69+12*Math.log2(t/Vc)}function jc(t){return Vc*Math.pow(2,(t-69)/12)}var Bc=class t extends lt{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{let r=parseInt(e,10),o=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof t&&this.fromType(this._val),je(this._val))return this._noArg();if(ct(this._val)&&je(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ln(this._val)){let e=0;for(let n in this._val)if(Q(this._val[n])){let r=this._val[n],o=new this.constructor(this.context,n).valueOf()*r;e+=o}return e}if(Q(this._units)){let e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ct(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var Mt=class t extends Bc{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let n=new t(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){let r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),a=Math.round(o/r)*r-o;return o+a*n}toNotation(){let e=this.toSeconds(),n=["1m"];for(let s=1;s<9;s++){let i=Math.pow(2,s);n.push(i+"n."),n.push(i+"n"),n.push(i+"t")}n.push("0");let r=n[0],o=new t(this.context,n[0]).toSeconds();return n.forEach(s=>{let i=new t(this.context,s).toSeconds();Math.abs(i-e)<Math.abs(o-e)&&(r=s,o=i)}),r}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),n=this.valueOf()/e;n=parseFloat(n.toFixed(4));let r=Math.floor(n/this._getTimeSignature()),o=n%1*4;n=Math.floor(n)%this._getTimeSignature();let s=o.toString();return s.length>3&&(o=parseFloat(parseFloat(s).toFixed(3))),[r,n,o].join(":")}toTicks(){let e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Qr(this.toFrequency())}_now(){return this.context.now()}};var St=class t extends Mt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ib()}static set A4(e){Ab(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){let o=fN[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:t.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new t(this.context,this.valueOf()*Zr(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Qr(this.valueOf())}toNote(){let e=this.toFrequency(),n=Math.log2(e/t.A4),r=Math.round(12*n)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),hN[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return jc(e)}static ftom(e){return Qr(e)}},fN={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},hN=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Gt=class extends Mt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}};var He=class t extends lt{constructor(){super();let e=x(t.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Ie()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return hb(e),new Mt(this.context,e).toSeconds()}toFrequency(e){return new St(this.context,e).toFrequency()}toTicks(e){return new Gt(this.context,e).toTicks()}_getPartialProperties(e){let n=this.get();return Object.keys(n).forEach(r=>{je(e[r])&&delete n[r]}),n}get(){let e=wb(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){let r=this[n];Q(r)&&Q(r.value)&&Q(r.setValueAtTime)?e[n]=r.value:r instanceof t?e[n]=r._getPartialProperties(e[n]):Be(r)||gt(r)||ct(r)||kf(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Q(this[n])&&(this[n]&&Q(this[n].value)&&Q(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof t?this[n].set(e[n]):this[n]=e[n])}),this}};var Fn=class extends Ue{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return Je(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){let r=this._search(n);for(let o=r;o>=0;o--){let s=this._timeline[o];if(s.state===e)return s}}getNextState(e,n){let r=this._search(n);if(r!==-1)for(let o=r;o<this._timeline.length;o++){let s=this._timeline[o];if(s.state===e)return s}}};var le=class t extends He{constructor(){let e=x(t.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,U(Q(e.param)&&(dn(e.param)||e.param instanceof t),"param must be an AudioParam");!dn(e.param);)e.param=e.param._param;this._swappable=Q(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ue(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Q(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(He.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Q(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Q(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Q(this.maxValue)&&Q(this.minValue)&&Je(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?rs(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?os(e):e}setValueAtTime(e,n){let r=this.toSeconds(n),o=this._fromType(e);return U(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){let n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),o=this._events.get(n),s=this._initialValue;if(o===null)s=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){let i=this._events.getBefore(o.time),a;i===null?a=this._initialValue:a=i.value,o.type==="setTargetAtTime"&&(s=this._exponentialApproach(o.time,a,o.value,o.constant,n))}else if(r===null)s=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let i=o.value;if(o.type==="setTargetAtTime"){let a=this._events.getBefore(o.time);a===null?i=this._initialValue:i=a.value}r.type==="linearRampToValueAtTime"?s=this._linearInterpolate(o.time,i,r.time,r.value,n):s=this._exponentialInterpolate(o.time,i,r.time,r.value,n)}else s=o.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){let r=this._fromType(e),o=this.toSeconds(n);return U(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=yt(r,0)?this._minOutput:r,this._assertRange(r);let o=this.toSeconds(n);return U(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);let o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,o),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){let o=this._fromType(e);U(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");let s=this.toSeconds(n);return this._assertRange(o),U(isFinite(o)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:s,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,s,r),this._param.setTargetAtTime(o,s,r),this}setValueCurveAtTime(e,n,r,o=1){r=this.toSeconds(r),n=this.toSeconds(n);let s=this._fromType(e[0])*o;this.setValueAtTime(this._toType(s),n);let i=r/(e.length-1);for(let a=1;a<e.length;a++){let c=this._fromType(e[a])*o;this.linearRampToValueAtTime(this._toType(c),n+a*i)}return this}cancelScheduledValues(e){let n=this.toSeconds(e);return U(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){let n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));U(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);let o=this._events.get(n),s=this._events.getAfter(n);return o&&yt(o.time,n)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){let n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);let r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){let o=this._events.getAfter(r.time),s=o?o.time:n+2,i=(s-n)/10;for(let a=n;a<s;a+=i)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){U(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,o,s){return r+(n-r)*Math.exp(-(s-e)/o)}_linearInterpolate(e,n,r,o,s){return n+(o-n)*((s-e)/(r-e))}_exponentialInterpolate(e,n,r,o,s){return n*Math.pow(o/n,(s-e)/(r-e))}};var P=class t extends He{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Q(this.input)?dn(this.input)||this.input instanceof le?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Q(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Q(e)&&(e instanceof t||On(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();U(e.length>0,"ToneAudioNode does not have any internal nodes");let n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return _t(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Jo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return Nb(this,e,n,r),this}chain(...e){return hn(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Q(this.input)&&(this.input instanceof t?this.input.dispose():On(this.input)&&this.input.disconnect()),Q(this.output)&&(this.output instanceof t?this.output.dispose():On(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function hn(...t){let e=t.shift();t.reduce((n,r)=>(n instanceof P?n.connect(r):On(n)&&_t(n,r),r),e)}function _t(t,e,n=0,r=0){for(U(Q(t),"Cannot connect from undefined node"),U(Q(e),"Cannot connect to undefined node"),(e instanceof P||On(e))&&U(e.numberOfInputs>0,"Cannot connect to node with no inputs"),U(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof P||e instanceof le;)Q(e.input)&&(e=e.input);for(;t instanceof P;)Q(t.output)&&(t=t.output);dn(e)?t.connect(e,n):t.connect(e,n,r)}function Nb(t,e,n=0,r=0){if(Q(e))for(;e instanceof P;)e=e.input;for(;!On(t);)Q(t.output)&&(t=t.output);dn(e)?t.disconnect(e,n):On(e)?t.disconnect(e,n,r):t.disconnect()}var G=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new le({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),B(this,"gain")}static getDefaults(){return Object.assign(P.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var pn=class extends P{constructor(e){super(e),this.onended=K,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new G({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){let r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(P.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:K})}_startGain(e,n=1){U(this._startTime===-1,"Source cannot be started more than once");let r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){U(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==K&&(this.onended(this),this.onended=K,!this.context.isOffline)){let e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),U(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=K,this}};var wi=class t extends pn{constructor(){let e=x(t.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),_t(this._source,this._gainNode),this.offset=new le({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(pn.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var ee=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new wi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(P.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return ss(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,o){return this._param.setValueCurveAtTime(e,n,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function ss(t,e,n,r){(e instanceof le||dn(e)||e instanceof ee&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ee&&(e.overridden=!0)),_t(t,e,n,r)}var qc=class t extends le{constructor(){let e=x(t.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ue(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(le.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);let o=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max(1/r,1));for(let a=0;a<=i;a++){let c=r*a+n,u=this._exponentialApproach(s.time,s.value,o,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,n){let r=this.toSeconds(n);super.setValueAtTime(e,n);let o=this._events.get(r),s=this._events.previousEvent(o),i=this._getTicksUntilEvent(s,r);return o.ticks=Math.max(i,0),this}linearRampToValueAtTime(e,n){let r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);let o=this._events.get(r),s=this._events.previousEvent(o),i=this._getTicksUntilEvent(s,r);return o.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);let r=this._fromType(e),o=this._events.get(n),s=Math.round(Math.max((n-o.time)*10,1)),i=(n-o.time)/s;for(let a=0;a<=s;a++){let c=i*a+o.time,u=this._exponentialInterpolate(o.time,o.value,n,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(je(e.ticks)){let i=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(i,e.time)}let r=this._fromType(this.getValueAtTime(e.time)),o=this._fromType(this.getValueAtTime(n)),s=this._events.get(n);return s&&s.time===n&&s.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+o)+e.ticks}getTicksAtTime(e){let n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){let n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){let o=this._fromType(this.getValueAtTime(n.time)),i=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-n.time),a=Math.sqrt(Math.pow(o,2)-2*i*(n.ticks-e)),c=(-o+a)/i,u=(-o-a)/i;return(c>0?c:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){let r=this.toSeconds(n),o=this.toSeconds(e),s=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}};var Uc=class t extends ee{constructor(){let e=x(t.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new qc({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ee.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var Hc=class t extends He{constructor(){let e=x(t.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Fn,this._tickOffset=new Ue,this._ticksAtTime=new Ue,this._secondsAtTime=new Ue,this.frequency=new Uc({context:this.context,units:e.units,value:e.frequency}),B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},He.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){let r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Q(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){let n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){let r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){let n=this.toSeconds(e),r=this._state.getLastState("stopped",n),o=this._ticksAtTime.get(n),s={state:"paused",time:n};this._state.add(s);let i=o||r,a=o?o.ticks:0,c=null;return this._state.forEachBetween(i.time,n+this.sampleTime,u=>{let l=i.time,d=this._tickOffset.get(u.time);d&&d.time>=i.time&&(a=d.ticks,l=d.time),i.state==="started"&&u.state!=="started"&&(a+=this.frequency.getTicksAtTime(u.time)-this.frequency.getTicksAtTime(l),u.time!==s.time&&(c={state:u.state,time:u.time,ticks:a})),i=u}),this._state.remove(s),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);let n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let o=this._secondsAtTime.get(e),s=o||n,i=o?o.seconds:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,c=>{let u=s.time,l=this._tickOffset.get(c.time);l&&l.time>=s.time&&(i=l.seconds,u=l.time),s.state==="started"&&c.state!=="started"&&(i+=c.time-u,c.time!==r.time&&(a={state:c.state,time:c.time,seconds:i})),s=c}),this._state.remove(r),a&&this._secondsAtTime.add(a),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){let r=this._tickOffset.get(n),o=this._state.get(n),s=Math.max(r.time,o.time),i=this.frequency.getTicksAtTime(s)+e-r.ticks;return this.frequency.getTimeOfTick(i)}forEachTickBetween(e,n,r){let o=this._state.get(e);this._state.forEachBetween(e,n,i=>{o&&o.state==="started"&&i.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),i.time-this.sampleTime,r),o=i});let s=null;if(o&&o.state==="started"){let i=Math.max(o.time,e),a=this.frequency.getTicksAtTime(i),c=this.frequency.getTicksAtTime(o.time),u=a-c,l=Math.ceil(u)-u;l=yt(l,1)?0:l;let d=this.frequency.getTimeOfTick(a+l);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(h){s=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}};var is=class t extends He{constructor(){let e=x(t.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=K,this._lastUpdate=0,this._state=new Fn("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Hc({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(He.getDefaults(),{callback:K,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Fc(this.context);let r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){let n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){let e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":let o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};yr.mixin(is);var Yt=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new G({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,B(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var jf=class t extends P{constructor(){let e=x(t.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Yt({context:this.context}),this.output=new G({context:this.context}),this.volume=this.input.volume,hn(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),hn(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};mr(t=>{t.destination=new jf({context:t})});gr(t=>{t.destination.dispose()});var Bf=class extends P{constructor(){super(...arguments),this.name="Listener",this.positionX=new le({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new le({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new le({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new le({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new le({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new le({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new le({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new le({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new le({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(P.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};mr(t=>{t.listener=new Bf({context:t})});gr(t=>{t.listener.dispose()});var as=class t extends lt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=x(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;let r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:K,onload:K,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return U(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=K,o=K){return ct(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new et(this.baseUrl+n,r,o))):this._buffers.set(e.toString(),new et(n,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var Ot=class extends Gt{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var qf=class extends He{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ue,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};mr(t=>{t.draw=new qf({context:t})});gr(t=>{t.draw.dispose()});var $c=class extends lt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){U(Q(e.time),"Events must have a time property"),U(Q(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Uf(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){let n=[];this._root.search(e.time,n);for(let r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let n=e.getBalance(),r,o=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){let n=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(e){let n=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rebalance(e){let n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let o=1;o<n.length;o++)n[o].low>r.low&&(r=n[o]);return r.event}}return null}forEach(e){if(this._root!==null){let n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){let r=[];this._root.search(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(e,n){if(this._root!==null){let r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},Uf=class{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var Wc=class extends lt{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ue({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){let n=this._timeline.get(e);return n?n.value:this._initialValue}};var vt=class t extends P{constructor(){super(x(t.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return ss(this,e,n,r),this}};var kt=class t extends vt{constructor(){let e=x(t.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Be(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):lb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ee.getDefaults(),{length:1024})}setMap(e,n=1024){let r=new Float32Array(n);for(let o=0,s=n;o<s;o++){let i=o/(s-1)*2-1;r[o]=e(i,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let n=["none","2x","4x"].some(r=>r.includes(e));U(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var cs=class t extends vt{constructor(){let e=x(t.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new kt({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(vt.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}};var us=(()=>{class t{constructor(n,r){this.id=t._eventId++,this._remainderTime=0;let o=Object.assign(t.getDefaults(),r);this.transport=n,this.callback=o.callback,this._once=o.once,this.time=Math.floor(o.time),this._remainderTime=o.time-this.time}static getDefaults(){return{callback:K,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(n){if(this.callback){let r=this.transport.bpm.getDurationOfTicks(1,n);this.callback(n+this._remainderTime*r),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}return t._eventId=0,t})();var zc=class t extends us{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let r=Object.assign(t.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},us.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return zr(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ot(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){zr(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ot(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let n=this.transport.getTicksAtTime(e);Zn(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}};var Gc=class t extends He{constructor(){let e=x(t.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Wc(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ue,this._repeatedEvents=new $c,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new is({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),B(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(He.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){let r=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new Ot(this.context,this._swingTicks*2/3).toSeconds()*o}Rf(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),Rf(!1)}schedule(e,n){let r=new us(this,{callback:e,time:new Gt(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,o=1/0){let s=new zc(this,{callback:e,duration:new Mt(this.context,o).toTicks(),interval:new Mt(this.context,n).toTicks(),time:new Gt(this.context,r).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,n){let r=new us(this,{callback:e,once:!0,time:new Gt(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){let n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Ot(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return Q(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Be(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Mt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Mt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ot(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),n=this._clock.getTicksAtTime(e);return new Ot(this.context,n).toBarsBeatsSixteenths()}set position(e){let n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){let n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let n=this.now();if(this.state==="started"){let r=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),s=n+o;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let n=this.now(),r=this.getTicksAtTime(n),o=e-r%e;return this._clock.nextTickTime(o,n)}}syncSignal(e,n){let r=this.now(),o=this.bpm,s=1/(60/o.getValueAtTime(r)/this.PPQ),i=[];if(e.units==="time"){let c=.015625/s,u=new G(c),l=new cs(-1),d=new G(c);o.chain(u,l,d),o=d,s=1/s,i=[u,l,d]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/s:n=0);let a=new G(n);return o.connect(a),a.connect(e._param),i.push(a),this._syncedSignals.push({initial:e.value,nodes:i,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){let r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(o=>o.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ns(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};yr.mixin(Gc);mr(t=>{t.transport=new Gc({context:t})});gr(t=>{t.transport.dispose()});var De=class extends P{constructor(e){super(e),this.input=void 0,this._state=new Fn("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=K,this._syncedStop=K,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Yt({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,onstop:K,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let o=je(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")U(Zn(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){let s=this._state.get(o);s&&(s.offset=this.toSeconds(Nt(n,0)),s.duration=r?this.toSeconds(r):void 0);let i=this.context.transport.schedule(a=>{this._start(a,n,r)},o);this._scheduled.push(i),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else Fc(this.context),this._start(o,n,r);return this}stop(e){let n=je(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Q(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{let r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Zn(n,0)){let r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){let o=n-this.toSeconds(r.time),s;r.duration&&(s=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,s)}}},this._syncedStop=e=>{let n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=K,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var Qn=class t extends pn{constructor(){let e=x(t.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,_t(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new le({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new et(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(pn.getDefaults(),{url:new et,loop:!1,loopEnd:0,loopStart:0,onload:K,onerror:K,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,o=1){U(this.buffer.loaded,"buffer is either not set or not loaded");let s=this.toSeconds(e);this._startGain(s,o),this.loop?n=Nt(n,this.loopStart):n=Nt(n,0);let i=Math.max(this.toSeconds(n),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;bi(i,a)&&(i=(i-c)%u+c),yt(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,zr(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,i)),Q(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(s+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var Hae=44100*5;function Ct(t,e){return fe(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,r=new Rn(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}var Di=class t extends pn{constructor(){let e=x(t.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],_t(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new le({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),B(this,["frequency","detune"])}static getDefaults(){return Object.assign(pn.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var $e=(()=>{class t extends De{constructor(){let n=x(t.getDefaults(),arguments,["frequency","type"]);super(n),this.name="Oscillator",this._oscillator=null,this.frequency=new ee({context:this.context,units:"frequency",value:n.frequency}),B(this,"frequency"),this.detune=new ee({context:this.context,units:"cents",value:n.detune}),B(this,"detune"),this._partials=n.partials,this._partialCount=n.partialCount,this._type=n.type,n.partialCount&&n.type!=="custom"&&(this._type=this.baseType+n.partialCount.toString()),this.phase=n.phase}static getDefaults(){return Object.assign(De.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(n){let r=this.toSeconds(n),o=new Di({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(n){let r=this.toSeconds(n);this._oscillator&&this._oscillator.stop(r)}_restart(n){let r=this.toSeconds(n);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return t._periodicWaveCache.find(r=>r.phase===this._phase&&bb(r.partials,this._partials));{let n=t._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=n?n.partialCount:this._partialCount,n}}get type(){return this._type}set type(n){this._type=n;let r=["sine","square","sawtooth","triangle"].indexOf(n)!==-1;if(this._phase===0&&r)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=n);else{let o=this._getCachedPeriodicWave();if(Q(o)){let{partials:s,wave:i}=o;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[s,i]=this._getRealImaginary(n,this._phase),a=this.context.createPeriodicWave(s,i);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),t._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),t._periodicWaveCache.length>100&&t._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(n){this.partialCount&&this._type!=="custom"&&n!=="custom"?this.type=n+this.partialCount:this.type=n}get partialCount(){return this._partialCount}set partialCount(n){Je(n,0);let r=this._type,o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(r=o[1]),this._type!=="custom")n===0?this.type=r:this.type=r+n.toString();else{let s=new Float32Array(n);this._partials.forEach((i,a)=>s[a]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(n,r){let s=2048,i=new Float32Array(s),a=new Float32Array(s),c=1;if(n==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,s=c,this._partials.length===0)return[i,a]}else{let u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(n);u?(c=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),n=u[1],c=Math.max(c,2),s=c):this._partialCount=0,this._partials=[]}for(let u=1;u<s;++u){let l=2/(u*Math.PI),d;switch(n){case"sine":d=u<=c?1:0,this._partials[u-1]=d;break;case"square":d=u&1?2*l:0,this._partials[u-1]=d;break;case"sawtooth":d=l*(u&1?1:-1),this._partials[u-1]=d;break;case"triangle":u&1?d=2*(l*l)*(u-1>>1&1?-1:1):d=0,this._partials[u-1]=d;break;case"custom":d=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+n)}d!==0?(i[u]=-d*Math.sin(r*u),a[u]=d*Math.cos(r*u)):(i[u]=0,a[u]=0)}return[i,a]}_inverseFFT(n,r,o){let s=0,i=n.length;for(let a=0;a<i;a++)s+=n[a]*Math.cos(a*o)+r[a]*Math.sin(a*o);return s}getInitialValue(){let[n,r]=this._getRealImaginary(this._type,0),o=0,s=Math.PI*2,i=32;for(let a=0;a<i;a++)o=Math.max(this._inverseFFT(n,r,a/i*s),o);return Ff(-this._inverseFFT(n,r,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(n){this._phase=n*Math.PI/180,this.type=this._type}asArray(){return fe(this,arguments,void 0,function*(n=1024){return Ct(this,n)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return t._periodicWaveCache=[],t})();var ls=class extends vt{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new kt({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var We=class t extends ee{constructor(){let e=x(t.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new G({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ee.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var Ti=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new ls({context:this.context}),this._modulationNode=new G({context:this.context}),this._carrier=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new $e({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new We({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),B(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign($e.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var ds=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new G({context:this.context,gain:0}),this._carrier=new $e({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ee({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new $e({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new We({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new We({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),B(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign($e.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var Xr=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new G({context:this.context,gain:0}),this._thresh=new kt({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new ee({context:this.context,units:"audioRange",value:e.width}),this._triangle=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),B(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(De.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var Si=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ee({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ee({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,B(this,["frequency","detune"])}static getDefaults(){return Object.assign($e.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let n=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,s)=>o.detune.value=n+r*s)}}get count(){return this._oscillators.length}set count(e){if(Je(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){let r=new $e({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):K});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var Ci=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new We({context:this.context,value:2}),this._pulse=new Xr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new $e({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),B(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(De.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var Mb={am:Ti,fat:Si,fm:ds,oscillator:$e,pulse:Xr,pwm:Ci},Kr=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ee({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ee({context:this.context,units:"cents",value:e.detune}),B(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign($e.getDefaults(),ds.getDefaults(),Ti.getDefaults(),Si.getDefaults(),Xr.getDefaults(),Ci.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let n=Mb[e],r=this.now();if(this._oscillator){let o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Mb[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&gt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&gt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ct(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return fe(this,arguments,void 0,function*(e=1024){return Ct(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};function Zc(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Je(s,t,e),n.set(this,s)}})}}function Et(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Je(this.toSeconds(s),t,e),n.set(this,s)}})}}var Jr=class t extends De{constructor(){let e=x(t.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new et({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(De.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:K,onerror:K,playbackRate:1,reverse:!1})}load(e){return fe(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=K){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=Nt(n,this._loopStart):n=Nt(n,0);let o=this.toSeconds(n),s=r;r=Nt(r,Math.max(this._buffer.duration-o,0));let i=this.toSeconds(r);i=i/this._playbackRate,e=this.toSeconds(e);let a=new Qn({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&je(s)?a.start(e,o):a.start(e,o,i-this.toSeconds(this.fadeOut))}_stop(e){let n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,n,r)}seek(e,n){let r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){let o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Je(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Je(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){let n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};ot([Et(0)],Jr.prototype,"fadeIn",void 0);ot([Et(0)],Jr.prototype,"fadeOut",void 0);var xt=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ee({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(P.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ct(e))return e;{let r;for(r in Qc)if(Qc[r][n]===e)return r;return e}}_setCurve(e,n,r){if(ct(r)&&Reflect.has(Qc,r)){let o=Qc[r];ln(o)?e!=="_decayCurve"&&(this[e]=o[n]):this[e]=o}else if(Be(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let o=this.toSeconds(this.attack),s=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){let a=1/o;o=(1-i)/a}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=i&&i<=a[c]){a=this._attackCurve.slice(c),a[0]=i;break}this._sig.setValueCurveAtTime(a,e,o,n)}if(s&&this.sustain<1){let a=n*this.sustain,c=e+o;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,s+c):this._sig.exponentialApproachValueAtTime(a,c,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let n=this.getValueAtTime(e);if(n>0){let r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(U(Be(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return ss(this,e,n,r),this}asArray(){return fe(this,arguments,void 0,function*(e=1024){let n=e/this.context.sampleRate,r=new Rn(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=o+this.toSeconds(this.release),i=s*.1,a=s+i,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(o+i)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};ot([Et(0)],xt.prototype,"attack",void 0);ot([Et(0)],xt.prototype,"decay",void 0);ot([Zc(0,1)],xt.prototype,"sustain",void 0);ot([Et(0)],xt.prototype,"release",void 0);var Qc=(()=>{let e,n,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));let o=[],s=6.4;for(e=0;e<127;e++){n=e/127;let h=Math.sin(n*(Math.PI*2)*s-Math.PI/2)+1;o[e]=h/10+n*.83}o[127]=1;let i=[],a=5;for(e=0;e<128;e++)i[e]=Math.ceil(e/127*a)/a;let c=[];for(e=0;e<128;e++)n=e/127,c[e]=.5*(1-Math.cos(Math.PI*n));let u=[];for(e=0;e<128;e++){n=e/127;let h=Math.pow(n,3)*4+.2,f=Math.cos(h*Math.PI*2*n);u[e]=Math.abs(f*(1-n))}function l(h){let f=new Array(h.length);for(let p=0;p<h.length;p++)f[p]=1-h[p];return f}function d(h){return h.slice(0).reverse()}return{bounce:{In:l(u),Out:u},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:l(o)},sine:{In:c,Out:l(c)},step:{In:i,Out:l(i)}}})();var mn=class t extends P{constructor(){let e=x(t.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Yt({context:this.context,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume")}static getDefaults(){return Object.assign(P.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){let r=this["_original_"+e]=this[e];this[e]=(...o)=>{let s=o[n],i=this.context.transport.schedule(a=>{o[n]=a,r.apply(this,o)},s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,o){let s=this.toSeconds(r),i=this.toSeconds(n);return this.triggerAttack(e,s,o),this.triggerRelease(s+i),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var Rt=class t extends mn{constructor(){let e=x(t.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(mn.getDefaults(),{detune:0,onsilence:K,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);let o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);let n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){let r=this.toSeconds(n),o=e instanceof St?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){let s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,s,r)}else this.frequency.setValueAtTime(o,r);return this}};ot([Et(0)],Rt.prototype,"portamento",void 0);var fs=class t extends xt{constructor(){super(x(t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new G({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var eo=class t extends Rt{constructor(){let e=x(t.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Kr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new fs(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),B(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Rt.getDefaults(),{envelope:Object.assign(kn(xt.getDefaults(),Object.keys(P.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(kn(Kr.getDefaults(),[...Object.keys(De.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var Kc=class t extends eo{constructor(){let e=x(t.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,B(this,["oscillator","envelope"])}static getDefaults(){return fn(Rt.getDefaults(),eo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){let r=this.toSeconds(n),o=this.toFrequency(e instanceof St?e.toFrequency():e),s=o*this.octaves;return this.oscillator.frequency.setValueAtTime(s,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};ot([Zc(0)],Kc.prototype,"octaves",void 0);ot([Et(0)],Kc.prototype,"pitchDecay",void 0);var kb=new Set;function ps(t){kb.add(t)}function Jc(t,e){let n=`registerProcessor("${t}", ${e})`;kb.add(n)}var gN=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ps(gN);var yN=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ps(yN);var _N=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ps(_N);var Rb="feedback-comb-filter",vN=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Jc(Rb,vN);var eu=class t extends mn{constructor(){let e=x(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;let n={};Object.keys(e.urls).forEach(r=>{let o=parseInt(r,10);if(U(xi(r)||gt(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),xi(r)){let s=new St(this.context,r).toMidi();n[s]=e.urls[r]}else gt(o)&&isFinite(o)&&(n[o]=e.urls[o])}),this._buffers=new as({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(mn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:K,onerror:K,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{let s=Vf(new St(this.context,o).toFrequency()),i=Math.round(s),a=s-i,c=this._findClosest(i),u=i-c,l=this._buffers.get(u),d=Zr(c+a),h=new Qn({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,l.duration/d,r),Be(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){let f=this._activeSources.get(i),p=f.indexOf(h);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{let o=new St(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){let s=this._activeSources.get(o);n=this.toSeconds(n),s.forEach(i=>{i.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(e){let n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,o=1){let s=this.toSeconds(r);return this.triggerAttack(e,s,o),Be(n)?(U(Be(e),"notes must be an array when duration is array"),e.forEach((i,a)=>{let c=n[Math.min(a,n.length-1)];this.triggerRelease(i,s+this.toSeconds(c))})):this.triggerRelease(e,s+this.toSeconds(n)),this}add(e,n,r){if(U(xi(e)||isFinite(e),`note must be a pitch or midi: ${e}`),xi(e)){let o=new St(this.context,e).toMidi();this._buffers.add(o,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}};ot([Et(0)],eu.prototype,"attack",void 0);ot([Et(0)],eu.prototype,"release",void 0);var Ei=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new le({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",B(this,"pan")}static getDefaults(){return Object.assign(P.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var Lb="bit-crusher",CN=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Jc(Lb,CN);var R_e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var U_e=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var ms=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new G({context:this.context}),t._allSolos.has(this.context)||t._allSolos.set(this.context,new Set),t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(P.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),t._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){t._soloed.has(this.context)||t._soloed.set(this.context,new Set),t._soloed.get(this.context).add(this)}_removeSolo(){t._soloed.has(this.context)&&t._soloed.get(this.context).delete(this)}_isSoloed(){return t._soloed.has(this.context)&&t._soloed.get(this.context).has(this)}_noSolos(){return!t._soloed.has(this.context)||t._soloed.has(this.context)&&t._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),t._allSolos.get(this.context).delete(this),this._removeSolo(),this}};ms._allSolos=new Map;ms._soloed=new Map;var ou=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Ei({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Yt({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,B(this,["pan","volume"])}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var Gf=class t extends P{constructor(){let e=x(t.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new ms({solo:e.solo,context:this.context}),this._panVol=this.output=new ou({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),B(this,["pan","volume"])}static getDefaults(){return Object.assign(P.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return t.buses.has(e)||t.buses.set(e,new G({context:this.context})),t.buses.get(e)}send(e,n=0){let r=this._getBus(e),o=new G({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Gf.buses=new Map;function to(){return Ie().now()}var CDe=Ie().transport;var EDe=Ie().destination,IDe=Ie().destination;function jb(){return Ie().destination}var ADe=Ie().listener;var NDe=Ie().draw;var MDe=Ie();function Bb(){return et.loaded()}var su=class t{rubberbandEngine=Y(gc);player=null;gainNode=null;startTime=0;startOffset=0;originalAudioBuffer=null;playbackRate=z(1);loopStart=z(null);loopEnd=z(null);isLooping=z(!1);isPlaying=z(!1);currentTime=z(0);duration=z(0);isReady=z(!1);audioContextState=z("suspended");constructor(){this.initializeTone()}initializeTone(){try{this.audioContextState.set(Ie().state)}catch(e){throw console.error("Erreur lors de l'initialisation de Tone.js:",e),new Error("Audio non support\xE9 par le navigateur")}}startAudioContext(){return O(this,null,function*(){try{yield Lf(),this.audioContextState.set(Ie().state),console.log("Contexte audio d\xE9marr\xE9")}catch(e){throw console.error("Erreur lors du d\xE9marrage du contexte audio:",e),new Error("Impossible de d\xE9marrer le contexte audio")}})}loadAudioFile(e){return O(this,null,function*(){try{Ie().state!=="running"&&(yield this.startAudioContext()),this.dispose();let n=URL.createObjectURL(e);this.player=new Jr({url:n,loop:!1,onload:()=>{this.isReady.set(!0),this.duration.set(this.player.buffer.duration),console.log("Fichier audio charg\xE9:",e.name),this.player?.buffer&&(this.originalAudioBuffer=this.player.buffer.get(),this.rubberbandEngine.loadOriginalBuffer(this.originalAudioBuffer))}}),this.gainNode=new G(1),this.player.chain(this.gainNode,jb()),this.rubberbandEngine.getProcessedBuffer().subscribe(r=>{this.replaceAudioBuffer(r)}),yield Bb()}catch(n){throw console.error("Erreur lors du chargement du fichier audio:",n),this.isReady.set(!1),new Error("Impossible de charger le fichier audio")}})}play(){if(!this.player||!this.isReady()){console.warn("Aucun fichier audio charg\xE9");return}try{this.player.start(void 0,this.startOffset),this.startTime=to(),this.isPlaying.set(!0),this.startTimeUpdate()}catch(e){console.error("Erreur lors de la lecture:",e)}}pause(){if(this.player)try{let e=(to()-this.startTime)*this.playbackRate();this.startOffset=Math.min(this.startOffset+e,this.duration()),this.currentTime.set(this.startOffset),this.player.stop(),this.isPlaying.set(!1)}catch(e){console.error("Erreur lors de la mise en pause:",e)}}seekTo(e){if(!(!this.player||!this.isReady()))try{let n=Math.max(0,Math.min(e,this.duration())),r=this.isPlaying();r&&this.player.stop(),this.startOffset=n,this.currentTime.set(n),r&&(this.player.start(void 0,this.startOffset),this.startTime=to())}catch(n){console.error("Erreur lors du d\xE9placement de la t\xEAte de lecture:",n)}}setPitch(e){this.rubberbandEngine.setPitch(e)}setPlaybackRate(e){this.playbackRate.set(e),this.rubberbandEngine.setPlaybackRate(e)}setLoopPoints(e,n){if(e>=n){console.warn("Le point de d\xE9part doit \xEAtre inf\xE9rieur au point de fin");return}this.loopStart.set(e),this.loopEnd.set(n),this.player&&(this.player.loop=this.isLooping(),this.player.loopStart=e,this.player.loopEnd=n)}toggleLoop(){let e=!this.isLooping();this.isLooping.set(e),this.player&&(this.player.loop=e,e&&this.loopStart()!==null&&this.loopEnd()!==null&&(this.player.loopStart=this.loopStart(),this.player.loopEnd=this.loopEnd()))}resetPitch(){this.setPitch(0)}resetLoop(){this.loopStart.set(null),this.loopEnd.set(null),this.isLooping.set(!1),this.player&&(this.player.loop=!1)}startTimeUpdate(){let e=setInterval(()=>{if(!this.player||!this.isPlaying()){clearInterval(e);return}let n=(to()-this.startTime)*this.playbackRate(),r=this.startOffset+n;if(this.currentTime.set(r),this.isLooping()&&this.loopStart()!==null&&this.loopEnd()!==null){let o=this.loopEnd();if(r>=o){let s=this.loopStart();this.player.stop(),this.startOffset=s,this.currentTime.set(s),this.player.start(void 0,s),this.startTime=to(),console.log(`[Loop] Retour au point A: ${s.toFixed(2)}s`)}}else r>=this.duration()&&(this.isPlaying.set(!1),this.startOffset=0,this.currentTime.set(0),clearInterval(e))},100)}adjustLoopPoints(e){let n=this.loopStart(),r=this.loopEnd();if(n===null||r===null)return;if(!this.originalAudioBuffer){console.warn("[ToneEngineService] No original buffer for loop adjustment");return}let o=this.originalAudioBuffer.duration,s=e/o,i=n*s,a=r*s;i>=0&&a<=e&&i<a?(this.loopStart.set(i),this.loopEnd.set(a),this.player&&this.isLooping()&&(this.player.loopStart=i,this.player.loopEnd=a),console.log("[ToneEngineService] Loop points adjusted",{originalDuration:o,newDuration:e,ratio:s,oldStart:n,oldEnd:r,newStart:i,newEnd:a})):(console.warn("[ToneEngineService] Adjusted loop points invalid, resetting loop"),this.resetLoop())}replaceAudioBuffer(e){if(!this.player){console.warn("[ToneEngineService] No player to replace buffer");return}try{let n=this.isPlaying(),r=this.currentTime();n&&this.player.stop();let o=new et(e);this.player.buffer=o;let s=e.duration;this.duration.set(s),this.adjustLoopPoints(s),r>s?(this.startOffset=0,this.currentTime.set(0)):this.startOffset=r,n&&(this.player.start(void 0,this.startOffset),this.startTime=to(),this.startTimeUpdate()),console.log("[ToneEngineService] Buffer replaced successfully",{newDuration:s,wasPlaying:n,currentPosition:r})}catch(n){console.error("[ToneEngineService] Error replacing buffer:",n)}}dispose(){this.player&&(this.player.dispose(),this.player=null),this.gainNode&&(this.gainNode.dispose(),this.gainNode=null),this.isReady.set(!1),this.isPlaying.set(!1),this.currentTime.set(0),this.duration.set(0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var qb=class t{toneEngine=Y(su);volumeBeforeMute=100;isPlaying=this.toneEngine.isPlaying;currentTime=this.toneEngine.currentTime;duration=this.toneEngine.duration;isReady=this.toneEngine.isReady;volume=z(100);isMuted=z(!1);constructor(){this.checkAudioSupport()}checkAudioSupport(){try{if(!(window.AudioContext||window.webkitAudioContext))throw new Error("AudioContext non support\xE9")}catch(e){throw console.error("Le navigateur ne supporte pas l'API Web Audio:",e),new Error("Audio non support\xE9 par le navigateur")}}loadAudioFile(e){return O(this,null,function*(){try{yield this.toneEngine.loadAudioFile(e)}catch(n){throw console.error("Erreur lors du chargement du fichier:",n),n}})}play(){try{this.toneEngine.play()}catch(e){throw console.error("Erreur lors de la lecture:",e),e}}pause(){try{this.toneEngine.pause()}catch(e){throw console.error("Erreur lors de la mise en pause:",e),e}}seekTo(e){try{this.toneEngine.seekTo(e)}catch(n){throw console.error("Erreur lors du d\xE9placement de la t\xEAte de lecture:",n),n}}setVolume(e){let n=Math.max(0,Math.min(100,e));this.volume.set(n);let r=n/100;this.toneEngine.gainNode&&(this.toneEngine.gainNode.gain.value=r),n>0&&this.isMuted()&&this.isMuted.set(!1)}toggleMute(){let e=!this.isMuted();this.isMuted.set(e),e?(this.volumeBeforeMute=this.volume(),this.setVolume(0)):this.setVolume(this.volumeBeforeMute)}dispose(){this.toneEngine.dispose()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ub=class t{waveformData=z(null);peaks=z([]);canvasWidth=z(0);canvasHeight=z(0);isGenerating=z(!1);constructor(){}generateWaveform(e,n=1e3){return O(this,null,function*(){this.isGenerating.set(!0);try{let r=e.getChannelData(0);this.waveformData.set(r);let o=this.calculatePeaks(r,n);this.peaks.set(o),this.isGenerating.set(!1)}catch(r){throw console.error("Erreur lors de la g\xE9n\xE9ration de la waveform:",r),this.isGenerating.set(!1),r}})}drawWaveform(e,n="#3b82f6"){let r=this.peaks();if(!r||r.length===0){console.warn("Aucune donn\xE9e de waveform \xE0 afficher");return}let o=e.getContext("2d");if(!o){console.error("Impossible d'obtenir le contexte 2D du canvas");return}let s=e.width,i=e.height,a=i/2;o.clearRect(0,0,s,i),o.fillStyle=n,o.strokeStyle=n,o.lineWidth=1;let c=s/r.length;r.forEach((u,l)=>{let d=l*c,h=Math.max(1,Math.abs(u)*a);o.fillRect(d,a-h,c,h*2)}),this.canvasWidth.set(s),this.canvasHeight.set(i)}calculatePeaks(e,n){let r=Math.floor(e.length/n),o=[];for(let s=0;s<n;s++){let i=s*r,a=Math.min(i+r,e.length),c=0;for(let u=i;u<a;u++){let l=Math.abs(e[u]);l>c&&(c=l)}o.push(c)}return o}drawPlaceholder(e){let n=e.getContext("2d");if(!n)return;let r=e.width,o=e.height,s=o/2;n.clearRect(0,0,r,o),n.strokeStyle="#cbd5e1",n.lineWidth=2,n.beginPath(),n.moveTo(0,s),n.lineTo(r,s),n.stroke()}clearWaveform(){this.waveformData.set(null),this.peaks.set([]),this.isGenerating.set(!1)}getTimeFromX(e,n){let r=this.canvasWidth();return r===0?0:e/r*n}getXFromTime(e,n){let r=this.canvasWidth();return n===0?0:e/n*r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Hb=class t{isOpenSignal=z(!1);isEditModeSignal=z(!1);isOpen=this.isOpenSignal.asReadonly();isEditMode=this.isEditModeSignal.asReadonly();open(){this.isOpenSignal.set(!0)}close(){this.isOpenSignal.set(!1),this.isEditModeSignal.set(!1)}toggle(){this.isOpenSignal.update(e=>!e)}enterEditMode(){this.isEditModeSignal.set(!0)}exitEditMode(){this.isEditModeSignal.set(!1)}toggleEditMode(){this.isEditModeSignal.update(e=>!e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var _r={maxFavorites:10,maxTotalSize:104857600},Yf={pitch:0,playbackRate:1,currentTime:0,loopStart:null,loopEnd:null,loopEnabled:!1,volume:1,isMuted:!1};var Ii=class t{STORAGE_KEY="audio-looper-favorites";DB_NAME="AudioLooperDB";DB_VERSION=1;STORE_NAME="favorites";db=null;constructor(){this.initIndexedDB()}initIndexedDB(){return O(this,null,function*(){return new Promise((e,n)=>{let r=indexedDB.open(this.DB_NAME,this.DB_VERSION);r.onerror=()=>{console.error("Erreur lors de l'ouverture de IndexedDB:",r.error),n(r.error)},r.onsuccess=()=>O(this,null,function*(){this.db=r.result,yield this.cleanOrphanedEntries(),e()}),r.onupgradeneeded=o=>{let s=o.target.result;s.objectStoreNames.contains(this.STORE_NAME)||s.createObjectStore(this.STORE_NAME,{keyPath:"id"})}})})}ensureDB(){return O(this,null,function*(){if(this.db||(yield this.initIndexedDB()),!this.db)throw new Error("IndexedDB non initialis\xE9e");return this.db})}validateAudioBuffer(e){if(!e||e.trim().length===0)return{isValid:!1,errorMessage:"Donn\xE9es audio manquantes ou vides",errorCode:"CORRUPTED_DATA"};if(!/^[A-Za-z0-9+/]+=*$/.test(e.trim()))return{isValid:!1,errorMessage:"Format des donn\xE9es audio invalide (Base64 corrompu)",errorCode:"CORRUPTED_DATA"};let r=e.trim();if(r.length%4!==0)return{isValid:!1,errorMessage:"Taille des donn\xE9es audio invalide",errorCode:"CORRUPTED_DATA"};try{atob(r.substring(0,Math.min(100,r.length)))}catch{return{isValid:!1,errorMessage:"Donn\xE9es audio corrompues (impossible de d\xE9coder)",errorCode:"CORRUPTED_DATA"}}return{isValid:!0}}save(e){return O(this,null,function*(){try{let n=yield this.validateLimits(e);if(!n.isValid)return n;let r=this.validateAudioBuffer(e.audioData);if(!r.isValid)return r;let i=(yield this.ensureDB()).transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME);return yield new Promise((a,c)=>{let u=i.put(e);u.onsuccess=()=>a(),u.onerror=()=>c(u.error)}),yield this.updateMetadata(),{isValid:!0}}catch(n){return console.error("Erreur lors de la sauvegarde du favori:",n),n?.name==="QuotaExceededError"||n?.message?.includes("quota")||n?.message?.includes("storage")?{isValid:!1,errorMessage:"Espace de stockage insuffisant. Veuillez supprimer des favoris pour lib\xE9rer de l'espace.",errorCode:"QUOTA_EXCEEDED"}:{isValid:!1,errorMessage:"Erreur lors de la sauvegarde du favori",errorCode:"STORAGE_ERROR"}}})}load(e){return O(this,null,function*(){try{let o=(yield this.ensureDB()).transaction([this.STORE_NAME],"readonly").objectStore(this.STORE_NAME);return new Promise((s,i)=>{let a=o.get(e);a.onsuccess=()=>s(a.result||null),a.onerror=()=>i(a.error)})}catch(n){return console.error("Erreur lors du chargement du favori:",n),null}})}loadAll(){return O(this,null,function*(){try{let r=(yield this.ensureDB()).transaction([this.STORE_NAME],"readonly").objectStore(this.STORE_NAME),o=yield new Promise((i,a)=>{let c=r.getAll();c.onsuccess=()=>i(c.result||[]),c.onerror=()=>a(c.error)}),s=localStorage.getItem(this.STORAGE_KEY);if(s)try{let i=JSON.parse(s);if(i.ids&&Array.isArray(i.ids)){let a=[];for(let u of i.ids){let l=o.find(d=>d.id===u);l&&a.push(l)}let c=o.filter(u=>!i.ids.includes(u.id));return[...a,...c]}}catch(i){console.warn("Erreur lors de la lecture des m\xE9tadonn\xE9es d'ordre:",i)}return o}catch(e){return console.error("Erreur lors du chargement des favoris:",e),[]}})}remove(e){return O(this,null,function*(){try{let o=(yield this.ensureDB()).transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME);return yield new Promise((s,i)=>{let a=o.delete(e);a.onsuccess=()=>s(),a.onerror=()=>i(a.error)}),yield this.updateMetadata(),!0}catch(n){return console.error("Erreur lors de la suppression du favori:",n),!1}})}calculateTotalSize(){return O(this,null,function*(){return(yield this.loadAll()).reduce((n,r)=>n+r.size,0)})}getStorageStats(){return O(this,null,function*(){let e=yield this.loadAll(),n=e.reduce((i,a)=>i+a.size,0),r=e.length,o=_r.maxTotalSize-n,s=n/_r.maxTotalSize*100;return{currentCount:r,totalSize:n,availableSpace:o,usagePercentage:Math.round(s*100)/100}})}validateLimits(e){return O(this,null,function*(){let n=yield this.loadAll(),o=!!n.find(a=>a.id===e.id);return!o&&n.length>=_r.maxFavorites?{isValid:!1,errorMessage:`Limite de ${_r.maxFavorites} favoris atteinte`,errorCode:"MAX_FAVORITES"}:!o&&n.find(c=>c.fileName===e.fileName&&c.size===e.size)?{isValid:!1,errorMessage:`Un favori identique avec le nom "${e.fileName}" et la m\xEAme taille existe d\xE9j\xE0`,errorCode:"DUPLICATE_FILE"}:n.filter(a=>a.id!==e.id).reduce((a,c)=>a+c.size,0)+e.size>_r.maxTotalSize?{isValid:!1,errorMessage:`Limite de stockage de ${Math.round(_r.maxTotalSize/1048576)} MB d\xE9pass\xE9e`,errorCode:"MAX_SIZE"}:{isValid:!0}})}updateMetadata(){return O(this,null,function*(){let e=yield this.loadAll(),n={count:e.length,lastUpdated:new Date().toISOString(),ids:e.map(r=>r.id)};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))})}clearAll(){return O(this,null,function*(){try{let r=(yield this.ensureDB()).transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME);return yield new Promise((o,s)=>{let i=r.clear();i.onsuccess=()=>o(),i.onerror=()=>s(i.error)}),localStorage.removeItem(this.STORAGE_KEY),!0}catch(e){return console.error("Erreur lors de l'effacement des favoris:",e),!1}})}reorderAll(e){return O(this,null,function*(){try{let n={count:e.length,lastUpdated:new Date().toISOString(),ids:e.map(r=>r.id)};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),console.log("Ordre des favoris sauvegard\xE9 dans localStorage:",n.ids),!0}catch(n){return console.error("Erreur lors de la r\xE9organisation des favoris:",n),!1}})}cleanOrphanedEntries(){return O(this,null,function*(){try{let e=yield this.ensureDB(),r=e.transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME),o=yield new Promise((l,d)=>{let h=r.getAll();h.onsuccess=()=>l(h.result||[]),h.onerror=()=>d(h.error)}),s=localStorage.getItem(this.STORAGE_KEY),i=[];if(s)try{i=JSON.parse(s).ids||[]}catch{console.warn("M\xE9tadonn\xE9es localStorage corrompues, r\xE9initialisation")}let a=o.filter(l=>!i.includes(l.id));if(a.length>0){console.log(`Nettoyage de ${a.length} entr\xE9e(s) orpheline(s) dans IndexedDB`);let l=e.transaction([this.STORE_NAME],"readwrite"),d=l.objectStore(this.STORE_NAME);for(let h of a)d.delete(h.id);yield new Promise((h,f)=>{l.oncomplete=()=>h(),l.onerror=()=>f(l.error)})}let c=o.map(l=>l.id),u=i.filter(l=>!c.includes(l));if(u.length>0||a.length>0){console.log(`Nettoyage de ${u.length} ID(s) orphelin(s) dans localStorage`);let l=i.filter(h=>c.includes(h)),d={count:l.length,lastUpdated:new Date().toISOString(),ids:l};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(d))}(a.length>0||u.length>0)&&console.log("Nettoyage des entr\xE9es orphelines termin\xE9")}catch(e){console.error("Erreur lors du nettoyage des entr\xE9es orphelines:",e)}})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Zf=class t{constructor(e){this.storageService=e;this.loadFavorites()}favoritesSignal=z([]);loadingSignal=z(!1);storageStatsSignal=z({currentCount:0,totalSize:0,availableSpace:0,usagePercentage:0});favorites=this.favoritesSignal.asReadonly();loading=this.loadingSignal.asReadonly();storageStats=this.storageStatsSignal.asReadonly();hasFavorites=rn(()=>this.favoritesSignal().length>0);canAddMore=rn(()=>{let e=this.storageStatsSignal();return e.currentCount<10&&e.usagePercentage<100});loadFavorites(){return O(this,null,function*(){this.loadingSignal.set(!0);try{let e=yield this.storageService.loadAll();this.favoritesSignal.set(e),yield this.updateStorageStats()}catch(e){console.error("Erreur lors du chargement des favoris:",e),this.favoritesSignal.set([])}finally{this.loadingSignal.set(!1)}})}add(a,c,u,l,d){return O(this,arguments,function*(e,n,r,o,s,i={}){let h=this.generateUniqueId(),f={id:h,fileName:e,mimeType:n,audioData:r,size:o,duration:s,timestamp:new Date().toISOString(),settings:b(b({},Yf),i)},p=yield this.storageService.save(f);return p.isValid?(yield this.loadFavorites(),j(b({},p),{favoriteId:h})):p})}remove(e){return O(this,null,function*(){let n=yield this.storageService.remove(e);return n&&(yield this.loadFavorites()),n})}updateSettings(e,n){return O(this,null,function*(){let r=yield this.storageService.load(e);if(!r)return{isValid:!1,errorMessage:"Favori introuvable",errorCode:"INVALID_FORMAT"};r.settings=b(b({},r.settings),n);let o=yield this.storageService.save(r);if(o.isValid){let s=this.favoritesSignal(),i=s.findIndex(a=>a.id===e);if(i!==-1){let a=[...s];a[i]=r,this.favoritesSignal.set(a)}return j(b({},o),{favoriteId:e})}return o})}getById(e){return O(this,null,function*(){return yield this.storageService.load(e)})}list(){return this.favoritesSignal()}hasFileByName(e){return this.favoritesSignal().some(n=>n.fileName===e)}clearAll(){return O(this,null,function*(){let e=yield this.storageService.clearAll();return e&&(this.favoritesSignal.set([]),yield this.updateStorageStats()),e})}updateStorageStats(){return O(this,null,function*(){let e=yield this.storageService.getStorageStats();this.storageStatsSignal.set(e)})}generateUniqueId(){let e=Date.now(),n=Math.random().toString(36).substring(2,9);return`fav_${e}_${n}`}exportFavorite(e){let n=this.favoritesSignal().find(r=>r.id===e);return n?JSON.stringify(n,null,2):null}importFavorite(e){return O(this,null,function*(){try{let n=JSON.parse(e);n.id=this.generateUniqueId(),n.timestamp=new Date().toISOString();let r=yield this.storageService.save(n);return r.isValid&&(yield this.loadFavorites()),r}catch(n){return console.error("Erreur lors de l'import du favori:",n),{isValid:!1,errorMessage:"Format JSON invalide",errorCode:"INVALID_FORMAT"}}})}reorder(e){return O(this,null,function*(){try{let n=this.favoritesSignal();if(e.length!==n.length)return console.error("Nombre d'IDs invalide pour la r\xE9organisation"),!1;let r=[];for(let s of e){let i=n.find(a=>a.id===s);if(!i)return console.error(`Favori avec ID ${s} introuvable`),!1;r.push(i)}let o=yield this.storageService.reorderAll(r);return o&&(this.favoritesSignal.set(r),console.log("Ordre des favoris mis \xE0 jour")),o}catch(n){return console.error("Erreur lors de la r\xE9organisation des favoris:",n),!1}})}static \u0275fac=function(n){return new(n||t)(Qe(Ii))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};export{b as a,j as b,er as c,O as d,Fe as e,lw as f,me as g,Ou as h,ku as i,Vt as j,wr as k,hw as l,Vn as m,vn as n,bw as o,ww as p,Dw as q,Sr as r,Cr as s,Mw as t,Er as u,Ss as v,ua as w,kw as x,Rw as y,Pu as z,Fw as A,Cs as B,Pw as C,Ah as D,Lw as E,Vw as F,Es as G,Lu as H,jw as I,Uw as J,Hw as K,Vu as L,$w as M,Ww as N,zw as O,ju as P,Bu as Q,Gw as R,he as S,Dp as T,Z as U,Sp as V,UP as W,ye as X,ue as Y,Qe as Z,Y as _,Lp as $,qp as aa,sr as ba,Hp as ca,RD as da,HP as ea,$P as fa,WP as ga,zP as ha,GP as ia,DT as ja,qn as ka,nn as la,nc as ma,tr as na,It as oa,ir as pa,YP as qa,ZP as ra,Br as sa,z as ta,QP as ua,XP as va,HT as wa,$T as xa,KP as ya,JP as za,rc as Aa,Mo as Ba,XT as Ca,Vs as Da,eL as Ea,tL as Fa,nL as Ga,Tl as Ha,To as Ia,ja as Ja,jd as Ka,Wn as La,uL as Ma,Xs as Na,cE as Oa,uE as Pa,hL as Qa,Ag as Ra,qd as Sa,yE as Ta,IE as Ua,pL as Va,Rg as Wa,mL as Xa,kE as Ya,$s as Za,VE as _a,GE as $a,YE as ab,ZE as bb,gL as cb,yL as db,_L as eb,vL as fb,jg as gb,Bg as hb,c0 as ib,xL as jb,h0 as kb,bL as lb,g0 as mb,wL as nb,DL as ob,TL as pb,SL as qb,CL as rb,_0 as sb,Ug as tb,v0 as ub,x0 as vb,EL as wb,IL as xb,AL as yb,NL as zb,ML as Ab,Gg as Bb,OL as Cb,U0 as Db,H0 as Eb,$0 as Fb,rn as Gb,dc as Hb,kL as Ib,RL as Jb,Ks as Kb,fc as Lb,Z0 as Mb,$d as Nb,Q0 as Ob,Oo as Pb,Jg as Qb,ey as Rb,eI as Sb,tI as Tb,ry as Ub,nI as Vb,rI as Wb,oy as Xb,oI as Yb,sI as Zb,zd as _b,h2 as $b,ko as ac,v2 as bc,x2 as cc,b2 as dc,w2 as ec,D2 as fc,T2 as gc,iy as hc,ay as ic,S2 as jc,Xd as kc,Qd as lc,ti as mc,Kd as nc,Zd as oc,gc as pc,su as qc,qb as rc,Ub as sc,Hb as tc,Zf as uc};
