<div class="speed-control" role="group" aria-labelledby="speed-controls-title">
  <!-- Titre invisible pour screen readers -->
  <h2 id="speed-controls-title" class="sr-only">Contrôles de vitesse de lecture</h2>

  <!-- Aide contextuelle -->
  <div id="speed-help" class="sr-only">
    Modifiez la vitesse de lecture de la vidéo avec les boutons presets ou le menu déroulant pour des vitesses personnalisées.
  </div>

  <!-- Boutons presets principaux -->
  <div class="preset-buttons">
    <button
      *ngFor="let speed of presetSpeeds; let i = index"
      class="preset-btn"
      [class.active]="currentSpeed() === speed"
      [disabled]="!canControlSpeed()"
      (click)="setSpeed(speed)"
      [attr.aria-label]="'Set playback speed to ' + speed + 'x'"
      [attr.tabindex]="8 + i"
      [attr.aria-pressed]="currentSpeed() === speed"
      type="button">
      <span class="btn-text">{{ speed }}x</span>
    </button>
  </div>

  <!-- Menu déroulant pour vitesses avancées -->
  <div class="advanced-controls">
    <label for="advanced-speed-select" class="sr-only">Advanced playback speeds</label>
    <select
      id="advanced-speed-select"
      class="speed-dropdown"
      [value]="selectedAdvancedSpeed()"
      [disabled]="!canControlSpeed()"
      (change)="onAdvancedSpeedChange($event)"
      aria-label="Select advanced playback speed"
      tabindex="11"
      aria-describedby="speed-help">
      <option value="">Autres vitesses...</option>
      <option *ngFor="let speed of advancedSpeeds" [value]="speed">
        {{ speed }}x
      </option>
    </select>
  </div>
</div>
