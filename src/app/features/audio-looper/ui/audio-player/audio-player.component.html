<div class="audio-player">
  <!-- Bouton Play/Pause -->
  <button
    class="audio-player__play-button"
    [class.audio-player__play-button--playing]="isPlaying()"
    [disabled]="!isReady()"
    (click)="togglePlayPause()"
    type="button"
    [attr.aria-label]="isPlaying() ? 'Pause' : 'Play'"
  >
    <!-- Icône Play -->
    @if (!isPlaying()) {
      <svg class="audio-player__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 3l14 9-14 9V3z" fill="currentColor"/>
      </svg>
    }

    <!-- Icône Pause -->
    @if (isPlaying()) {
      <svg class="audio-player__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="6" y="4" width="4" height="16" fill="currentColor"/>
        <rect x="14" y="4" width="4" height="16" fill="currentColor"/>
      </svg>
    }
  </button>

  <!-- Affichage des temps -->
  <div class="audio-player__time-display">
    <span class="audio-player__current-time">{{ formattedCurrentTime() }}</span>
    <span class="audio-player__separator">/</span>
    <span class="audio-player__duration">{{ formattedDuration() }}</span>
  </div>

  <!-- Bouton Réglages Audio (minimaliste) -->
  <button
    class="audio-player__settings-btn"
    [class.audio-player__settings-btn--modified]="hasActiveModifications()"
    [disabled]="!isReady()"
    (click)="openAudioControls()"
    type="button"
    [attr.aria-label]="hasActiveModifications() ? 'Réglages audio modifiés: ' + modificationsLabel() : 'Réglages audio'"
  >
    <!-- Icône sliders minimaliste -->
    <svg class="audio-player__settings-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <line x1="4" y1="21" x2="4" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="4" y1="10" x2="4" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="12" y1="21" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="12" y1="8" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="20" y1="21" x2="20" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="20" y1="12" x2="20" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <circle cx="4" cy="12" r="2" fill="currentColor"/>
      <circle cx="12" cy="10" r="2" fill="currentColor"/>
      <circle cx="20" cy="14" r="2" fill="currentColor"/>
    </svg>

    <!-- Indicateur de modification (point lumineux) -->
    @if (hasActiveModifications()) {
      <span class="audio-player__settings-indicator"></span>
    }
  </button>

  <!-- Modal des contrôles audio (caché par défaut) -->
  <app-audio-controls-modal></app-audio-controls-modal>
</div>
