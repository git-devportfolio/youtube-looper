<div class="audio-player">
  <!-- Bouton Play/Pause -->
  <button
    class="audio-player__play-button"
    [class.audio-player__play-button--playing]="isPlaying()"
    [disabled]="!isReady()"
    (click)="togglePlayPause()"
    type="button"
    [attr.aria-label]="isPlaying() ? 'Pause' : 'Play'"
  >
    <!-- Icône Play -->
    @if (!isPlaying()) {
      <svg class="audio-player__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 3l14 9-14 9V3z" fill="currentColor"/>
      </svg>
    }

    <!-- Icône Pause -->
    @if (isPlaying()) {
      <svg class="audio-player__icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="6" y="4" width="4" height="16" fill="currentColor"/>
        <rect x="14" y="4" width="4" height="16" fill="currentColor"/>
      </svg>
    }
  </button>

  <!-- Affichage des temps -->
  <div class="audio-player__time-display">
    <span class="audio-player__current-time">{{ formattedCurrentTime() }}</span>
    <span class="audio-player__separator">/</span>
    <span class="audio-player__duration">{{ formattedDuration() }}</span>
  </div>

  <!-- Bouton Settings discret -->
  <button
    class="audio-player__settings-button"
    [class.audio-player__settings-button--active]="hasActiveModifications()"
    [disabled]="!isReady()"
    (click)="openAudioControls()"
    type="button"
    [attr.aria-label]="'Paramètres audio' + (hasActiveModifications() ? ' (modifié)' : '')"
    [title]="hasActiveModifications() ? modificationsLabel() : 'Tonalité & Vitesse'"
  >
    <!-- Icône Settings (sliders) -->
    <svg class="audio-player__settings-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 8h4m0 0a3 3 0 106 0m-6 0a3 3 0 016 0m6 0h2M3 16h2m0 0a3 3 0 106 0m-6 0a3 3 0 016 0m6 0h4"
            stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>

    <!-- Badge indicateur si modifications actives -->
    @if (hasActiveModifications()) {
      <span class="audio-player__settings-badge">{{ modificationsLabel() }}</span>
    }
  </button>

  <!-- Modal des contrôles audio (caché par défaut) -->
  <app-audio-controls-modal></app-audio-controls-modal>
</div>
